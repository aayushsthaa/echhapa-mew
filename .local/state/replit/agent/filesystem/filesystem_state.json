{"file_contents":{"index.php":{"content":"<?php\nrequire_once 'config/config.php';\nrequire_once 'classes/Article.php';\n\n$articleClass = new Article();\n\n// Get different types of content for modern layout\n$breaking_news = $articleClass->getBreakingNews(3);\n$featured_articles = $articleClass->getFeaturedArticles(6);\n$latest_articles = $articleClass->getLatestArticles(8);\n$trending_articles = $articleClass->getTrendingArticles(5);\n\n// Get categories for navigation\n$db = new Database();\n$conn = $db->getConnection();\n$categories_stmt = $conn->query(\"SELECT * FROM categories WHERE status = 'active' AND show_in_menu = true ORDER BY display_order\");\n$categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n\n// Get homepage categories\n$homepage_categories_stmt = $conn->query(\"SELECT * FROM categories WHERE status = 'active' AND show_on_homepage = true ORDER BY homepage_priority LIMIT 4\");\n$homepage_categories = $homepage_categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo SITE_NAME; ?> - Latest News & Updates</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <link href=\"public/css/style.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <!-- Modern Newspaper Header -->\n    <header class=\"newspaper-header\">\n        <!-- Top Header Section -->\n        <div class=\"header-top\">\n            <div class=\"container-fluid\">\n                <div class=\"logo-section\">\n                    <a href=\"index.php\" class=\"logo-link\">\n                        <img src=\"public/images/eechnapa-logo.png\" alt=\"Eechnapa\" class=\"newspaper-logo\">\n                    </a>\n                    <div class=\"current-date\">\n                        <?php echo date('l, F j, Y'); ?>\n                    </div>\n                    <div class=\"header-search\">\n                        <form method=\"GET\" action=\"search.php\">\n                            <div class=\"input-group\">\n                                <input class=\"form-control\" type=\"search\" name=\"q\" placeholder=\"Search news...\">\n                                <button class=\"btn\" type=\"submit\">\n                                    <i class=\"fas fa-search\"></i>\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Categories Navigation -->\n        <div class=\"categories-nav\">\n            <div class=\"container-fluid\">\n                <div class=\"categories-scroll-container\">\n                    <div class=\"categories-list\">\n                        <a href=\"index.php\" class=\"category-link active\">Home</a>\n                        <?php foreach ($categories as $category): ?>\n                        <a href=\"category.php?slug=<?php echo $category['slug']; ?>\" class=\"category-link\">\n                            <?php echo htmlspecialchars($category['name']); ?>\n                        </a>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </header>\n\n    <!-- Breaking News Banner -->\n    <?php if (!empty($breaking_news)): ?>\n    <section class=\"breaking-news-banner\">\n        <div class=\"container-fluid\">\n            <div class=\"breaking-ticker\">\n                <span class=\"breaking-label\">\n                    <i class=\"fas fa-bolt\"></i> BREAKING\n                </span>\n                <div class=\"breaking-content\">\n                    <?php foreach ($breaking_news as $index => $news): ?>\n                        <a href=\"article.php?slug=<?php echo $news['slug']; ?>\" class=\"breaking-item <?php echo $index === 0 ? 'active' : ''; ?>\">\n                            <?php echo htmlspecialchars($news['title']); ?>\n                        </a>\n                    <?php endforeach; ?>\n                </div>\n            </div>\n        </div>\n    </section>\n    <?php endif; ?>\n\n    <!-- Main Content Area -->\n    <main class=\"main-content\">\n        <div class=\"container-fluid\">\n            <!-- Hero Section - NEWS LAYOUT -->\n            <?php if (!empty($featured_articles)): ?>\n            <section class=\"hero-section mb-5\">\n                <div class=\"row g-4\">\n                    <!-- Main Featured Article - NEWS STYLE -->\n                    <div class=\"col-lg-6\">\n                        <?php $main_featured = $featured_articles[0]; ?>\n                        <article class=\"hero-article mb-4\">\n                            <?php if ($main_featured['featured_image']): ?>\n                            <div class=\"hero-image\">\n                                <img src=\"<?php echo htmlspecialchars($main_featured['featured_image']); ?>\" \n                                     alt=\"<?php echo htmlspecialchars($main_featured['title']); ?>\" \n                                     class=\"img-fluid\">\n                            </div>\n                            <?php endif; ?>\n                            <div class=\"hero-content\">\n                                        <div class=\"hero-meta mb-2\">\n                                            <span class=\"category-badge\">\n                                                <?php echo htmlspecialchars($main_featured['category_name']); ?>\n                                            </span>\n                                            <span class=\"read-time ms-2\">\n                                                <i class=\"fas fa-clock\"></i> 5 min read\n                                            </span>\n                                        </div>\n                                        <h1 class=\"hero-title\">\n                                            <a href=\"article.php?slug=<?php echo $main_featured['slug']; ?>\">\n                                                <?php echo htmlspecialchars($main_featured['title']); ?>\n                                            </a>\n                                        </h1>\n                                        <p class=\"hero-excerpt\">\n                                            <?php \n                                            $excerpt = $main_featured['excerpt'];\n                                            echo htmlspecialchars(strlen($excerpt) > 150 ? substr($excerpt, 0, 150) . '...' : $excerpt); \n                                            ?>\n                                        </p>\n                                        <div class=\"hero-author\">\n                                            <i class=\"fas fa-user\"></i>\n                                            <?php echo htmlspecialchars($main_featured['first_name'] . ' ' . $main_featured['last_name']); ?>\n                                            <span class=\"mx-2\">â€¢</span>\n                                            <?php echo date('M j, Y', strtotime($main_featured['published_at'] ?? $main_featured['created_at'])); ?>\n                                        </div>\n                            </div>\n                        </article>\n                    </div>\n                    \n                    <!-- Secondary Featured Articles -->\n                    <div class=\"col-lg-6\">\n                        <div class=\"secondary-featured\">\n                            <?php foreach (array_slice($featured_articles, 1, 4) as $article): ?>\n                            <article class=\"featured-item mb-3\">\n                                <div class=\"row g-3\">\n                                    <div class=\"<?php echo $article['featured_image'] ? 'col-8' : 'col-12'; ?>\">\n                                        <div class=\"featured-content\">\n                                            <div class=\"article-meta\">\n                                                <span class=\"category-tag\">\n                                                    <?php echo htmlspecialchars($article['category_name']); ?>\n                                                </span>\n                                                <span class=\"date\"><?php echo date('M j', strtotime($article['published_at'] ?? $article['created_at'])); ?></span>\n                                            </div>\n                                            <h3 class=\"featured-title\">\n                                                <a href=\"article.php?slug=<?php echo $article['slug']; ?>\">\n                                                    <?php echo htmlspecialchars($article['title']); ?>\n                                                </a>\n                                            </h3>\n                                            <p class=\"featured-excerpt\">\n                                                <?php \n                                                $excerpt = $article['excerpt'];\n                                                echo htmlspecialchars(strlen($excerpt) > 80 ? substr($excerpt, 0, 80) . '...' : $excerpt); \n                                                ?>\n                                            </p>\n                                        </div>\n                                    </div>\n                                    <?php if ($article['featured_image']): ?>\n                                    <div class=\"col-4\">\n                                        <div class=\"featured-image\">\n                                            <img src=\"<?php echo htmlspecialchars($article['featured_image']); ?>\" \n                                                 alt=\"<?php echo htmlspecialchars($article['title']); ?>\" \n                                                 class=\"img-fluid\">\n                                        </div>\n                                    </div>\n                                    <?php endif; ?>\n                                </div>\n                            </article>\n                            <?php endforeach; ?>\n                        </div>\n                    </div>\n                </div>\n            </section>\n            <?php endif; ?>\n\n            <!-- Content Grid Section -->\n            <section class=\"content-grid\">\n                <div class=\"row g-4\">\n                    <!-- Main Content Column -->\n                    <div class=\"col-lg-9\">\n                        <!-- Latest News Section -->\n                        <?php if (!empty($latest_articles)): ?>\n                        <section class=\"latest-news-section\">\n                            <div class=\"section-header\">\n                                <h2 class=\"section-title\">Latest News</h2>\n                                <a href=\"category.php\" class=\"view-all-link\">View All <i class=\"fas fa-arrow-right\"></i></a>\n                            </div>\n                            \n                            <div class=\"news-grid\">\n                                <?php foreach (array_slice($latest_articles, 0, 10) as $index => $article): ?>\n                                <article class=\"news-card mb-4 <?php echo $index === 0 ? 'featured-large' : ''; ?>\">\n                                    <div class=\"row g-3\">\n                                        <div class=\"<?php echo $article['featured_image'] ? 'col-8' : 'col-12'; ?>\">\n                                            <div class=\"news-content\">\n                                                <div class=\"news-meta mb-2\">\n                                                    <span class=\"category-badge\">\n                                                        <?php echo htmlspecialchars($article['category_name']); ?>\n                                                    </span>\n                                                    <span class=\"time-ago ms-2\"><?php echo date('H:i', strtotime($article['published_at'] ?? $article['created_at'])); ?></span>\n                                                </div>\n                                                <h3 class=\"news-title\">\n                                                    <a href=\"article.php?slug=<?php echo $article['slug']; ?>\">\n                                                        <?php echo htmlspecialchars($article['title']); ?>\n                                                    </a>\n                                                </h3>\n                                                <p class=\"news-excerpt\">\n                                                    <?php \n                                                    $excerpt = $article['excerpt'];\n                                                    $length = $index === 0 ? 120 : 80;\n                                                    echo htmlspecialchars(strlen($excerpt) > $length ? substr($excerpt, 0, $length) . '...' : $excerpt); \n                                                    ?>\n                                                </p>\n                                                <div class=\"news-footer\">\n                                                    <span class=\"author\"><?php echo htmlspecialchars($article['first_name'] . ' ' . $article['last_name']); ?></span>\n                                                    <span class=\"views ms-3\"><i class=\"fas fa-eye\"></i> <?php echo number_format($article['views']); ?></span>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <?php if ($article['featured_image']): ?>\n                                        <div class=\"col-4\">\n                                            <div class=\"news-image\">\n                                                <img src=\"<?php echo htmlspecialchars($article['featured_image']); ?>\" \n                                                     alt=\"<?php echo htmlspecialchars($article['title']); ?>\" \n                                                     class=\"img-fluid rounded\">\n                                            </div>\n                                        </div>\n                                        <?php endif; ?>\n                                    </div>\n                                </article>\n                                <?php endforeach; ?>\n                            </div>\n                        </section>\n                        <?php endif; ?>\n\n                        <!-- Category Sections -->\n                        <?php foreach ($homepage_categories as $category): ?>\n                        <?php \n                        $category_articles = $articleClass->getPublishedArticles(10, 0, $category['id']);\n                        if (!empty($category_articles)): \n                        ?>\n                        <section class=\"category-section\">\n                            <div class=\"section-header\">\n                                <h2 class=\"section-title\">\n                                    <?php echo htmlspecialchars($category['name']); ?>\n                                </h2>\n                                <a href=\"category.php?slug=<?php echo $category['slug']; ?>\" class=\"view-all-link\">\n                                    View All <i class=\"fas fa-arrow-right\"></i>\n                                </a>\n                            </div>\n                            \n                            <div class=\"category-articles\">\n                                <?php foreach ($category_articles as $cat_article): ?>\n                                <article class=\"category-item mb-4\">\n                                    <div class=\"row g-3\">\n                                        <div class=\"<?php echo $cat_article['featured_image'] ? 'col-md-8' : 'col-12'; ?>\">\n                                            <div class=\"category-content\">\n                                                <div class=\"article-meta\">\n                                                    <span class=\"date\"><?php echo date('M j, Y', strtotime($cat_article['published_at'] ?? $cat_article['created_at'])); ?></span>\n                                                    <span class=\"views\"><i class=\"fas fa-eye\"></i> <?php echo number_format($cat_article['views']); ?></span>\n                                                </div>\n                                                <h3 class=\"category-title\">\n                                                    <a href=\"article.php?slug=<?php echo $cat_article['slug']; ?>\">\n                                                        <?php echo htmlspecialchars($cat_article['title']); ?>\n                                                    </a>\n                                                </h3>\n                                                <p class=\"category-excerpt\">\n                                                    <?php \n                                                    $excerpt = $cat_article['excerpt'];\n                                                    echo htmlspecialchars(strlen($excerpt) > 100 ? substr($excerpt, 0, 100) . '...' : $excerpt); \n                                                    ?>\n                                                </p>\n                                            </div>\n                                        </div>\n                                        <?php if ($cat_article['featured_image']): ?>\n                                        <div class=\"col-md-4\">\n                                            <div class=\"category-image\">\n                                                <img src=\"<?php echo htmlspecialchars($cat_article['featured_image']); ?>\" \n                                                     alt=\"<?php echo htmlspecialchars($cat_article['title']); ?>\" \n                                                     class=\"img-fluid\">\n                                            </div>\n                                        </div>\n                                        <?php endif; ?>\n                                    </div>\n                                </article>\n                                <?php endforeach; ?>\n                            </div>\n                        </section>\n                        <?php endif; ?>\n                        <?php endforeach; ?>\n                    </div>\n\n                    <!-- Sidebar -->\n                    <div class=\"col-lg-3\">\n                        <aside class=\"main-sidebar\">\n                            <!-- Trending Section -->\n                            <?php if (!empty($trending_articles)): ?>\n                            <div class=\"sidebar-widget trending-widget\">\n                                <h3 class=\"widget-title\">Trending Now</h3>\n                                <div class=\"trending-list\">\n                                    <?php foreach ($trending_articles as $index => $trending): ?>\n                                    <article class=\"trending-item\">\n                                        <span class=\"trending-number\"><?php echo $index + 1; ?></span>\n                                        <div class=\"trending-content\">\n                                            <h4 class=\"trending-title\">\n                                                <a href=\"article.php?slug=<?php echo $trending['slug']; ?>\">\n                                                    <?php echo htmlspecialchars($trending['title']); ?>\n                                                </a>\n                                            </h4>\n                                            <div class=\"trending-meta\">\n                                                <span class=\"category\">\n                                                    <?php echo htmlspecialchars($trending['category_name']); ?>\n                                                </span>\n                                                <span class=\"views\"><i class=\"fas fa-eye\"></i> <?php echo number_format($trending['views']); ?></span>\n                                            </div>\n                                        </div>\n                                    </article>\n                                    <?php endforeach; ?>\n                                </div>\n                            </div>\n                            <?php endif; ?>\n\n                            <!-- Newsletter Signup -->\n                            <div class=\"sidebar-widget newsletter-widget\">\n                                <h3 class=\"widget-title\">Stay Updated</h3>\n                                <p>Get the latest news delivered straight to your inbox.</p>\n                                <form class=\"newsletter-form\">\n                                    <div class=\"input-group\">\n                                        <input type=\"email\" class=\"form-control\" placeholder=\"Your email address\">\n                                        <button class=\"btn btn-primary\" type=\"submit\">Subscribe</button>\n                                    </div>\n                                </form>\n                            </div>\n\n                            <!-- Popular Articles -->\n                            <div class=\"sidebar-widget popular-widget\">\n                                <h3 class=\"widget-title\">Most Read</h3>\n                                <div class=\"popular-list\">\n                                    <?php \n                                    $popular_articles = $articleClass->getPopularArticles(5);\n                                    foreach ($popular_articles as $popular): \n                                    ?>\n                                    <article class=\"popular-item mb-3\">\n                                        <div class=\"row g-2\">\n                                            <div class=\"<?php echo $popular['featured_image'] ? 'col-8' : 'col-12'; ?>\">\n                                                <div class=\"popular-content\">\n                                                    <h5 class=\"popular-title\">\n                                                        <a href=\"article.php?slug=<?php echo $popular['slug']; ?>\">\n                                                            <?php echo htmlspecialchars($popular['title']); ?>\n                                                        </a>\n                                                    </h5>\n                                                    <div class=\"popular-meta\">\n                                                        <span class=\"date\"><?php echo date('M j', strtotime($popular['published_at'] ?? $popular['created_at'])); ?></span>\n                                                        <span class=\"views\"><?php echo number_format($popular['views']); ?> views</span>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <?php if ($popular['featured_image']): ?>\n                                            <div class=\"col-4\">\n                                                <div class=\"popular-image\">\n                                                    <img src=\"<?php echo htmlspecialchars($popular['featured_image']); ?>\" \n                                                         alt=\"<?php echo htmlspecialchars($popular['title']); ?>\" \n                                                         class=\"img-fluid rounded\">\n                                                </div>\n                                            </div>\n                                            <?php endif; ?>\n                                        </div>\n                                    </article>\n                                    <?php endforeach; ?>\n                                </div>\n                            </div>\n\n                            <!-- Advertisement -->\n                            <div class=\"sidebar-widget ad-widget\">\n                                <div class=\"ad-placeholder\">\n                                    <h6>Advertisement</h6>\n                                    <p class=\"text-muted\">Ad space available</p>\n                                </div>\n                            </div>\n                        </aside>\n                    </div>\n                </div>\n            </section>\n        </div>\n    </main>\n\n    <!-- Footer -->\n    <footer class=\"main-footer\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <p>&copy; <?php echo date('Y'); ?> <?php echo SITE_NAME; ?>. All rights reserved.</p>\n                </div>\n                <div class=\"col-md-6 text-md-end\">\n                    <p><a href=\"admin/login.php\">Admin Login</a></p>\n                </div>\n            </div>\n        </div>\n    </footer>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script src=\"public/js/main.js\"></script>\n</body>\n</html>","size_bytes":25098},"article.php":{"content":"<?php\nrequire_once 'config/config.php';\nrequire_once 'classes/Article.php';\n\n$slug = sanitize($_GET['slug'] ?? '');\n\nif (empty($slug)) {\n    header(\"HTTP/1.0 404 Not Found\");\n    include '404.php';\n    exit;\n}\n\n$article = new Article();\n$article_data = $article->getArticleBySlug($slug);\n\nif (!$article_data) {\n    header(\"HTTP/1.0 404 Not Found\");\n    include '404.php';\n    exit;\n}\n\n// Get related articles from same category\n$related_articles = [];\nif ($article_data['category_id']) {\n    $db = new Database();\n    $conn = $db->getConnection();\n    $related_stmt = $conn->prepare(\"\n        SELECT a.*, c.name as category_name, c.slug as category_slug\n        FROM articles a \n        LEFT JOIN categories c ON a.category_id = c.id\n        WHERE a.category_id = ? AND a.slug != ? AND a.status = 'published'\n        ORDER BY a.published_at DESC \n        LIMIT 5\n    \");\n    $related_stmt->execute([$article_data['category_id'], $slug]);\n    $related_articles = $related_stmt->fetchAll(PDO::FETCH_ASSOC);\n}\n\n// Get categories for navigation\n$categories_stmt = $conn->query(\"SELECT * FROM categories WHERE status = 'active' AND show_in_menu = true ORDER BY display_order\");\n$categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo htmlspecialchars($article_data['title']); ?> - <?php echo SITE_NAME; ?></title>\n    <meta name=\"description\" content=\"<?php echo htmlspecialchars($article_data['excerpt'] ?: substr(strip_tags($article_data['content']), 0, 160)); ?>\">\n    <meta name=\"keywords\" content=\"<?php echo htmlspecialchars($article_data['category_name'] ?: ''); ?>\">\n    \n    <!-- Open Graph / Facebook -->\n    <meta property=\"og:type\" content=\"article\">\n    <meta property=\"og:url\" content=\"<?php echo 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>\">\n    <meta property=\"og:title\" content=\"<?php echo htmlspecialchars($article_data['title']); ?>\">\n    <meta property=\"og:description\" content=\"<?php echo htmlspecialchars($article_data['excerpt'] ?: substr(strip_tags($article_data['content']), 0, 160)); ?>\">\n    <?php if ($article_data['featured_image']): ?>\n    <meta property=\"og:image\" content=\"<?php echo htmlspecialchars($article_data['featured_image']); ?>\">\n    <?php endif; ?>\n\n    <!-- Twitter -->\n    <meta property=\"twitter:card\" content=\"summary_large_image\">\n    <meta property=\"twitter:url\" content=\"<?php echo 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>\">\n    <meta property=\"twitter:title\" content=\"<?php echo htmlspecialchars($article_data['title']); ?>\">\n    <meta property=\"twitter:description\" content=\"<?php echo htmlspecialchars($article_data['excerpt'] ?: substr(strip_tags($article_data['content']), 0, 160)); ?>\">\n    <?php if ($article_data['featured_image']): ?>\n    <meta property=\"twitter:image\" content=\"<?php echo htmlspecialchars($article_data['featured_image']); ?>\">\n    <?php endif; ?>\n    \n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"public/css/style.css\" rel=\"stylesheet\">\n    \n    <style>\n        .article-header {\n            background: var(--light-color);\n            padding: 3rem 0;\n        }\n        .article-content {\n            font-size: 1.1rem;\n            line-height: 1.8;\n            color: var(--text-dark);\n        }\n        .article-content img {\n            max-width: 100%;\n            height: auto;\n            border-radius: 8px;\n            margin: 1.5rem 0;\n        }\n        .article-content p {\n            margin-bottom: 1.5rem;\n        }\n        .article-content h2,\n        .article-content h3,\n        .article-content h4 {\n            margin: 2rem 0 1rem 0;\n            color: var(--text-dark);\n        }\n        .share-buttons {\n            position: sticky;\n            top: 100px;\n        }\n        .share-btn {\n            display: block;\n            width: 50px;\n            height: 50px;\n            border-radius: 50%;\n            color: white;\n            text-align: center;\n            line-height: 50px;\n            margin-bottom: 0.5rem;\n            text-decoration: none;\n            transition: transform 0.3s ease;\n        }\n        .share-btn:hover {\n            transform: scale(1.1);\n            color: white;\n        }\n        .share-facebook { background: #3b5998; }\n        .share-twitter { background: #1da1f2; }\n        .share-linkedin { background: #0077b5; }\n        .share-whatsapp { background: #25d366; }\n        \n        .reading-progress {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 0%;\n            height: 3px;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            z-index: 1050;\n            transition: width 0.1s ease;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"reading-progress\"></div>\n    \n    <!-- Newspaper Header -->\n    <header class=\"newspaper-header\">\n        <!-- Top Header Section -->\n        <div class=\"header-top\">\n            <div class=\"container-fluid\">\n                <div class=\"logo-section\">\n                    <a href=\"index.php\" class=\"logo-link\">\n                        <img src=\"public/images/eechnapa-logo.png\" alt=\"Eechnapa\" class=\"newspaper-logo\">\n                    </a>\n                    <div class=\"current-date\">\n                        <?php echo date('l, F j, Y'); ?>\n                    </div>\n                    <div class=\"header-search\">\n                        <form method=\"GET\" action=\"search.php\">\n                            <div class=\"input-group\">\n                                <input class=\"form-control\" type=\"search\" name=\"q\" placeholder=\"Search news...\">\n                                <button class=\"btn\" type=\"submit\">\n                                    Search\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Categories Navigation -->\n        <div class=\"categories-nav\">\n            <div class=\"container-fluid\">\n                <div class=\"categories-scroll-container\">\n                    <div class=\"categories-list\">\n                        <a href=\"index.php\" class=\"category-link\">Home</a>\n                        <?php foreach ($categories as $category): ?>\n                        <a href=\"category.php?slug=<?php echo $category['slug']; ?>\" \n                           class=\"category-link <?php echo $category['id'] == $article_data['category_id'] ? 'active' : ''; ?>\">\n                            <?php echo htmlspecialchars($category['name']); ?>\n                        </a>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </header>\n\n    <!-- Article Header -->\n    <section class=\"article-header\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-lg-8 mx-auto text-center\">\n                    <?php if ($article_data['is_breaking']): ?>\n                        <span class=\"badge bg-danger mb-3\" style=\"font-size: 1rem; padding: 0.5rem 1rem;\">\n                            <i class=\"fas fa-bolt\"></i> Breaking News\n                        </span>\n                    <?php endif; ?>\n                    \n                    <h1 class=\"display-4 fw-bold mb-3\"><?php echo htmlspecialchars($article_data['title']); ?></h1>\n                    \n                    <?php if ($article_data['excerpt']): ?>\n                        <p class=\"lead text-muted mb-4\"><?php echo htmlspecialchars($article_data['excerpt']); ?></p>\n                    <?php endif; ?>\n                    \n                    <div class=\"article-meta d-flex justify-content-center align-items-center flex-wrap gap-4\">\n                        <?php if ($article_data['category_name']): ?>\n                            <span class=\"badge bg-secondary category-badge\">\n                                <?php echo htmlspecialchars($article_data['category_name']); ?>\n                            </span>\n                        <?php endif; ?>\n                        \n                        <span class=\"text-muted\">\n                            <i class=\"fas fa-user\"></i>\n                            By <?php echo htmlspecialchars($article_data['first_name'] . ' ' . $article_data['last_name']); ?>\n                        </span>\n                        \n                        <span class=\"text-muted\">\n                            <i class=\"fas fa-calendar\"></i>\n                            <?php echo date('F j, Y', strtotime($article_data['published_at'] ?? $article_data['created_at'])); ?>\n                        </span>\n                        \n                        <span class=\"text-muted\">\n                            <i class=\"fas fa-eye\"></i>\n                            <?php echo number_format($article_data['views']); ?> views\n                        </span>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <!-- Main Content -->\n    <main class=\"main-content\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <!-- Article Content -->\n                <div class=\"col-lg-8\">\n                    <article>\n                        <?php if ($article_data['featured_image']): ?>\n                            <div class=\"featured-image mb-4\">\n                                <img src=\"<?php echo htmlspecialchars($article_data['featured_image']); ?>\" \n                                     alt=\"<?php echo htmlspecialchars($article_data['featured_image_alt'] ?: $article_data['title']); ?>\"\n                                     class=\"img-fluid rounded\">\n                            </div>\n                        <?php endif; ?>\n                        \n                        <div class=\"article-content\">\n                            <?php echo $article_data['content']; ?>\n                        </div>\n                        \n                        <!-- Social Sharing -->\n                        <div class=\"row mt-5 py-4 border-top\">\n                            <div class=\"col-12\">\n                                <h6 class=\"mb-3\">Share this article:</h6>\n                                <div class=\"d-flex gap-2 flex-wrap\">\n                                    <a href=\"#\" class=\"btn btn-outline-primary btn-sm share-btn\" \n                                       data-platform=\"facebook\" data-url=\"<?php echo 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>\" \n                                       data-title=\"<?php echo htmlspecialchars($article_data['title']); ?>\">\n                                        <i class=\"fab fa-facebook-f\"></i> Facebook\n                                    </a>\n                                    <a href=\"#\" class=\"btn btn-outline-info btn-sm share-btn\" \n                                       data-platform=\"twitter\" data-url=\"<?php echo 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>\" \n                                       data-title=\"<?php echo htmlspecialchars($article_data['title']); ?>\">\n                                        <i class=\"fab fa-twitter\"></i> Twitter\n                                    </a>\n                                    <a href=\"#\" class=\"btn btn-outline-primary btn-sm share-btn\" \n                                       data-platform=\"linkedin\" data-url=\"<?php echo 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>\" \n                                       data-title=\"<?php echo htmlspecialchars($article_data['title']); ?>\">\n                                        <i class=\"fab fa-linkedin\"></i> LinkedIn\n                                    </a>\n                                    <a href=\"#\" class=\"btn btn-outline-success btn-sm share-btn\" \n                                       data-platform=\"whatsapp\" data-url=\"<?php echo 'http://' . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>\" \n                                       data-title=\"<?php echo htmlspecialchars($article_data['title']); ?>\">\n                                        <i class=\"fab fa-whatsapp\"></i> WhatsApp\n                                    </a>\n                                </div>\n                            </div>\n                        </div>\n                    </article>\n\n                    <!-- Related Articles -->\n                    <?php if (!empty($related_articles)): ?>\n                    <section class=\"related-articles mt-5\">\n                        <h4 class=\"section-title\">Related Articles</h4>\n                        <div class=\"row\">\n                            <?php foreach ($related_articles as $related): ?>\n                            <div class=\"col-md-6 mb-3\">\n                                <article class=\"news-item\">\n                                    <?php if ($related['featured_image']): ?>\n                                    <div class=\"article-image\">\n                                        <img src=\"<?php echo htmlspecialchars($related['featured_image']); ?>\" \n                                             alt=\"<?php echo htmlspecialchars($related['title']); ?>\">\n                                    </div>\n                                    <?php endif; ?>\n                                    <div class=\"article-content\">\n                                        <div class=\"article-meta\">\n                                            <span class=\"date\"><?php echo date('M j', strtotime($related['published_at'] ?? $related['created_at'])); ?></span>\n                                        </div>\n                                        <h6><a href=\"article.php?slug=<?php echo $related['slug']; ?>\"><?php echo htmlspecialchars($related['title']); ?></a></h6>\n                                    </div>\n                                </article>\n                            </div>\n                            <?php endforeach; ?>\n                        </div>\n                    </section>\n                    <?php endif; ?>\n                </div>\n\n                <!-- Sidebar -->\n                <div class=\"col-lg-4\">\n                    <aside class=\"sidebar\">\n                        <!-- Floating Share Buttons -->\n                        <div class=\"share-buttons d-none d-lg-block\">\n                            <a href=\"#\" class=\"share-btn share-facebook\" data-platform=\"facebook\" title=\"Share on Facebook\">\n                                <i class=\"fab fa-facebook-f\"></i>\n                            </a>\n                            <a href=\"#\" class=\"share-btn share-twitter\" data-platform=\"twitter\" title=\"Share on Twitter\">\n                                <i class=\"fab fa-twitter\"></i>\n                            </a>\n                            <a href=\"#\" class=\"share-btn share-linkedin\" data-platform=\"linkedin\" title=\"Share on LinkedIn\">\n                                <i class=\"fab fa-linkedin\"></i>\n                            </a>\n                            <a href=\"#\" class=\"share-btn share-whatsapp\" data-platform=\"whatsapp\" title=\"Share on WhatsApp\">\n                                <i class=\"fab fa-whatsapp\"></i>\n                            </a>\n                        </div>\n\n                        <!-- Popular Articles -->\n                        <div class=\"widget\">\n                            <h4 class=\"widget-title\">Popular Articles</h4>\n                            <div class=\"popular-articles\">\n                                <p class=\"text-muted\">Popular articles will appear here.</p>\n                            </div>\n                        </div>\n\n                        <!-- Advertisement -->\n                        <div class=\"widget\">\n                            <div class=\"ad-placeholder\">\n                                <h6>Advertisement</h6>\n                                <p class=\"text-muted\">Ad space available</p>\n                            </div>\n                        </div>\n                    </aside>\n                </div>\n            </div>\n        </div>\n    </main>\n\n    <!-- Footer -->\n    <footer class=\"main-footer\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <p>&copy; <?php echo date('Y'); ?> <?php echo SITE_NAME; ?>. All rights reserved.</p>\n                </div>\n                <div class=\"col-md-6 text-md-end\">\n                    <p><a href=\"admin/login.php\">Admin Login</a></p>\n                </div>\n            </div>\n        </div>\n    </footer>\n\n    <!-- Comments Section -->\n    <section class=\"comments-section\">\n        <div class=\"container\">\n            <div class=\"row justify-content-center\">\n                <div class=\"col-lg-8\">\n                    <div class=\"comments-container\">\n                        <h4 class=\"comments-title\">\n                            <i class=\"fas fa-comments\"></i> \n                            Comments \n                            <span class=\"comments-count\" id=\"commentsCount\">\n                                <?php \n                                require_once 'classes/Comment.php';\n                                $commentClass = new Comment();\n                                $commentCount = $commentClass->getCommentCount($article_data['id']);\n                                echo \"($commentCount)\";\n                                ?>\n                            </span>\n                        </h4>\n                        \n                        <!-- Comment Form -->\n                        <div class=\"comment-form-section\">\n                            <h5>Leave a Comment</h5>\n                            <form id=\"commentForm\" class=\"comment-form\">\n                                <input type=\"hidden\" name=\"article_id\" value=\"<?php echo $article_data['id']; ?>\">\n                                <div class=\"row\">\n                                    <div class=\"col-md-6 mb-3\">\n                                        <input type=\"text\" class=\"form-control\" name=\"author_name\" placeholder=\"Your Name *\" required>\n                                    </div>\n                                    <div class=\"col-md-6 mb-3\">\n                                        <input type=\"email\" class=\"form-control\" name=\"author_email\" placeholder=\"Your Email *\" required>\n                                    </div>\n                                </div>\n                                <div class=\"mb-3\">\n                                    <textarea class=\"form-control\" name=\"content\" rows=\"4\" placeholder=\"Write your comment here...\" required></textarea>\n                                </div>\n                                <button type=\"submit\" class=\"btn btn-primary\">\n                                    <i class=\"fas fa-paper-plane\"></i> Post Comment\n                                </button>\n                            </form>\n                        </div>\n                        \n                        <!-- Comments List -->\n                        <div class=\"comments-list\" id=\"commentsList\">\n                            <?php \n                            $comments = $commentClass->getCommentsByArticle($article_data['id']);\n                            foreach ($comments as $comment): \n                            ?>\n                            <div class=\"comment-item\" data-comment-id=\"<?php echo $comment['id']; ?>\">\n                                <div class=\"comment-header\">\n                                    <div class=\"comment-author\">\n                                        <i class=\"fas fa-user-circle\"></i>\n                                        <strong><?php echo htmlspecialchars($comment['author_name']); ?></strong>\n                                    </div>\n                                    <div class=\"comment-date\">\n                                        <?php echo date('M j, Y \\a\\t g:i A', strtotime($comment['created_at'])); ?>\n                                    </div>\n                                </div>\n                                <div class=\"comment-content\">\n                                    <?php echo nl2br(htmlspecialchars($comment['content'])); ?>\n                                </div>\n                                <div class=\"comment-actions\">\n                                    <button class=\"btn btn-link btn-sm reply-btn\" data-comment-id=\"<?php echo $comment['id']; ?>\">\n                                        <i class=\"fas fa-reply\"></i> Reply\n                                    </button>\n                                </div>\n                                \n                                <!-- Replies -->\n                                <?php if (!empty($comment['replies'])): ?>\n                                <div class=\"comment-replies\">\n                                    <?php foreach ($comment['replies'] as $reply): ?>\n                                    <div class=\"comment-item reply\">\n                                        <div class=\"comment-header\">\n                                            <div class=\"comment-author\">\n                                                <i class=\"fas fa-user-circle\"></i>\n                                                <strong><?php echo htmlspecialchars($reply['author_name']); ?></strong>\n                                            </div>\n                                            <div class=\"comment-date\">\n                                                <?php echo date('M j, Y \\a\\t g:i A', strtotime($reply['created_at'])); ?>\n                                            </div>\n                                        </div>\n                                        <div class=\"comment-content\">\n                                            <?php echo nl2br(htmlspecialchars($reply['content'])); ?>\n                                        </div>\n                                    </div>\n                                    <?php endforeach; ?>\n                                </div>\n                                <?php endif; ?>\n                                \n                                <!-- Reply Form (hidden by default) -->\n                                <div class=\"reply-form\" id=\"replyForm<?php echo $comment['id']; ?>\" style=\"display: none;\">\n                                    <form class=\"comment-reply-form\" data-parent-id=\"<?php echo $comment['id']; ?>\">\n                                        <input type=\"hidden\" name=\"article_id\" value=\"<?php echo $article_data['id']; ?>\">\n                                        <input type=\"hidden\" name=\"parent_id\" value=\"<?php echo $comment['id']; ?>\">\n                                        <div class=\"row\">\n                                            <div class=\"col-md-6 mb-3\">\n                                                <input type=\"text\" class=\"form-control\" name=\"author_name\" placeholder=\"Your Name *\" required>\n                                            </div>\n                                            <div class=\"col-md-6 mb-3\">\n                                                <input type=\"email\" class=\"form-control\" name=\"author_email\" placeholder=\"Your Email *\" required>\n                                            </div>\n                                        </div>\n                                        <div class=\"mb-3\">\n                                            <textarea class=\"form-control\" name=\"content\" rows=\"3\" placeholder=\"Write your reply...\" required></textarea>\n                                        </div>\n                                        <div class=\"reply-actions\">\n                                            <button type=\"submit\" class=\"btn btn-primary btn-sm\">Post Reply</button>\n                                            <button type=\"button\" class=\"btn btn-secondary btn-sm cancel-reply\">Cancel</button>\n                                        </div>\n                                    </form>\n                                </div>\n                            </div>\n                            <?php endforeach; ?>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script src=\"public/js/main.js\"></script>\n    <script>\n        // Comments functionality\n        document.addEventListener('DOMContentLoaded', function() {\n            // Comment form submission\n            const commentForm = document.getElementById('commentForm');\n            if (commentForm) {\n                commentForm.addEventListener('submit', function(e) {\n                    e.preventDefault();\n                    submitComment(this);\n                });\n            }\n            \n            // Reply button handlers\n            document.querySelectorAll('.reply-btn').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    const commentId = this.dataset.commentId;\n                    toggleReplyForm(commentId);\n                });\n            });\n            \n            // Cancel reply buttons\n            document.querySelectorAll('.cancel-reply').forEach(btn => {\n                btn.addEventListener('click', function() {\n                    const replyForm = this.closest('.reply-form');\n                    replyForm.style.display = 'none';\n                });\n            });\n            \n            // Reply form submissions\n            document.querySelectorAll('.comment-reply-form').forEach(form => {\n                form.addEventListener('submit', function(e) {\n                    e.preventDefault();\n                    submitComment(this);\n                });\n            });\n        });\n        \n        function submitComment(form) {\n            const formData = new FormData(form);\n            \n            fetch('submit-comment.php', {\n                method: 'POST',\n                body: formData\n            })\n            .then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    // Show success message\n                    showMessage('Comment submitted successfully! It will appear after moderation.', 'success');\n                    \n                    // Reset form\n                    form.reset();\n                    \n                    // Hide reply form if it's a reply\n                    if (form.classList.contains('comment-reply-form')) {\n                        form.closest('.reply-form').style.display = 'none';\n                    }\n                } else {\n                    showMessage(data.message || 'Failed to submit comment. Please try again.', 'error');\n                }\n            })\n            .catch(error => {\n                console.error('Error:', error);\n                showMessage('Network error. Please try again.', 'error');\n            });\n        }\n        \n        function toggleReplyForm(commentId) {\n            const replyForm = document.getElementById('replyForm' + commentId);\n            if (replyForm.style.display === 'none' || !replyForm.style.display) {\n                replyForm.style.display = 'block';\n                replyForm.querySelector('input[name=\"author_name\"]').focus();\n            } else {\n                replyForm.style.display = 'none';\n            }\n        }\n        \n        function showMessage(message, type) {\n            const alertClass = type === 'success' ? 'alert-success' : 'alert-danger';\n            const alert = document.createElement('div');\n            alert.className = `alert ${alertClass} alert-dismissible fade show`;\n            alert.innerHTML = `\n                ${message}\n                <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n            `;\n            \n            const commentsSection = document.querySelector('.comments-section');\n            commentsSection.insertBefore(alert, commentsSection.firstChild);\n            \n            // Auto-remove after 5 seconds\n            setTimeout(() => {\n                if (alert.parentNode) {\n                    alert.remove();\n                }\n            }, 5000);\n        }\n    </script>\n</body>\n</html>","size_bytes":28470},"category.php":{"content":"<?php\nrequire_once 'config/config.php';\nrequire_once 'classes/Article.php';\n\n$slug = sanitize($_GET['slug'] ?? '');\n$page = max(1, intval($_GET['page'] ?? 1));\n$search = sanitize($_GET['search'] ?? '');\n$date_filter = sanitize($_GET['date_filter'] ?? '');\n$limit = ARTICLES_PER_PAGE;\n$offset = ($page - 1) * $limit;\n\n// Get category\n$db = new Database();\n$conn = $db->getConnection();\n$category_stmt = $conn->prepare(\"SELECT * FROM categories WHERE slug = ? AND status = 'active'\");\n$category_stmt->execute([$slug]);\n$category = $category_stmt->fetch(PDO::FETCH_ASSOC);\n\nif (!$category) {\n    header(\"HTTP/1.0 404 Not Found\");\n    include '404.php';\n    exit;\n}\n// Build article query with search and date filters\n$where_conditions = [\"a.status = 'published'\", \"a.category_id = \" . intval($category['id'])];\n$params = [];\n\nif ($search) {\n    $where_conditions[] = \"(a.title LIKE ? OR a.content LIKE ? OR a.excerpt LIKE ?)\";\n    $params[] = \"%$search%\";\n    $params[] = \"%$search%\";\n    $params[] = \"%$search%\";\n}\n\nif ($date_filter) {\n    switch ($date_filter) {\n        case 'today':\n            $where_conditions[] = \"DATE(a.published_at) = CURRENT_DATE\";\n            break;\n        case 'week':\n            $where_conditions[] = \"a.published_at >= CURRENT_DATE - INTERVAL '7 days'\";\n            break;\n        case 'month':\n            $where_conditions[] = \"a.published_at >= CURRENT_DATE - INTERVAL '30 days'\";\n            break;\n    }\n}\n\n$where_clause = 'WHERE ' . implode(' AND ', $where_conditions);\n\n$query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                 u.first_name, u.last_name\n          FROM articles a\n          LEFT JOIN categories c ON a.category_id = c.id\n          LEFT JOIN users u ON a.author_id = u.id\n          $where_clause\n          ORDER BY a.is_breaking DESC, a.is_featured DESC, a.published_at DESC\n          LIMIT ? OFFSET ?\";\n\n$params[] = $limit;\n$params[] = $offset;\n\n$stmt = $conn->prepare($query);\n$stmt->execute($params);\n$articles = $stmt->fetchAll(PDO::FETCH_ASSOC);\n\n// Get all categories for navigation\n$categories_stmt = $conn->query(\"SELECT * FROM categories WHERE status = 'active' AND show_in_menu = true ORDER BY display_order\");\n$categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title><?php echo htmlspecialchars($category['name']); ?> - <?php echo SITE_NAME; ?></title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"public/css/style.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <!-- Newspaper Header -->\n    <header class=\"newspaper-header\">\n        <!-- Top Header Section -->\n        <div class=\"header-top\">\n            <div class=\"container-fluid\">\n                <div class=\"logo-section\">\n                    <a href=\"index.php\" class=\"logo-link\">\n                        <img src=\"public/images/eechnapa-logo.png\" alt=\"Eechnapa\" class=\"newspaper-logo\">\n                    </a>\n                    <div class=\"current-date\">\n                        <?php echo date('l, F j, Y'); ?>\n                    </div>\n                    <div class=\"header-search\">\n                        <form method=\"GET\" action=\"search.php\">\n                            <div class=\"input-group\">\n                                <input class=\"form-control\" type=\"search\" name=\"q\" placeholder=\"Search news...\">\n                                <button class=\"btn\" type=\"submit\">\n                                    Search\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Categories Navigation -->\n        <div class=\"categories-nav\">\n            <div class=\"container-fluid\">\n                <div class=\"categories-scroll-container\">\n                    <div class=\"categories-list\">\n                        <a href=\"index.php\" class=\"category-link\">Home</a>\n                        <?php foreach ($categories as $cat): ?>\n                        <a href=\"category.php?slug=<?php echo $cat['slug']; ?>\" \n                           class=\"category-link <?php echo $cat['slug'] === $slug ? 'active' : ''; ?>\">\n                            <?php echo htmlspecialchars($cat['name']); ?>\n                        </a>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </header>\n\n    <!-- Main Content -->\n    <main class=\"main-content\">\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-12\">\n                    <!-- Category Header -->\n                    <div class=\"newspaper-section\">\n                        <h3 class=\"section-title category-header\">\n                            <?php echo htmlspecialchars($category['name']); ?> News\n                        </h3>\n                        <?php if ($category['description']): ?>\n                            <p class=\"category-description\"><?php echo htmlspecialchars($category['description']); ?></p>\n                        <?php endif; ?>\n                        \n                        <!-- Search and Filter Controls -->\n                        <div class=\"category-controls mb-4\">\n                            <div class=\"row g-3\">\n                                <div class=\"col-md-6\">\n                                    <form method=\"GET\" class=\"search-form\">\n                                        <input type=\"hidden\" name=\"slug\" value=\"<?php echo htmlspecialchars($slug); ?>\">\n                                        <input type=\"hidden\" name=\"date_filter\" value=\"<?php echo htmlspecialchars($date_filter); ?>\">\n                                        <div class=\"input-group\">\n                                            <input type=\"text\" class=\"form-control\" name=\"search\" \n                                                   placeholder=\"Search in <?php echo htmlspecialchars($category['name']); ?>...\" \n                                                   value=\"<?php echo htmlspecialchars($search); ?>\">\n                                            <button class=\"btn btn-outline-secondary\" type=\"submit\">\n                                                <i class=\"fas fa-search\"></i>\n                                            </button>\n                                        </div>\n                                    </form>\n                                </div>\n                                <div class=\"col-md-3\">\n                                    <form method=\"GET\" class=\"filter-form\">\n                                        <input type=\"hidden\" name=\"slug\" value=\"<?php echo htmlspecialchars($slug); ?>\">\n                                        <input type=\"hidden\" name=\"search\" value=\"<?php echo htmlspecialchars($search); ?>\">\n                                        <select name=\"date_filter\" class=\"form-select\" onchange=\"this.form.submit()\">\n                                            <option value=\"\">All Time</option>\n                                            <option value=\"today\" <?php echo $date_filter === 'today' ? 'selected' : ''; ?>>Today</option>\n                                            <option value=\"week\" <?php echo $date_filter === 'week' ? 'selected' : ''; ?>>This Week</option>\n                                            <option value=\"month\" <?php echo $date_filter === 'month' ? 'selected' : ''; ?>>This Month</option>\n                                        </select>\n                                    </form>\n                                </div>\n                                <div class=\"col-md-3\">\n                                    <?php if ($search || $date_filter): ?>\n                                        <a href=\"category.php?slug=<?php echo htmlspecialchars($slug); ?>\" class=\"btn btn-outline-danger\">\n                                            <i class=\"fas fa-times\"></i> Clear Filters\n                                        </a>\n                                    <?php endif; ?>\n                                    <span class=\"text-muted ms-2\">\n                                        <?php echo count($articles); ?> articles found\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <?php if (empty($articles)): ?>\n                        <div class=\"text-center py-5\">\n                            <h4>No articles in this category</h4>\n                            <p class=\"text-muted\">Check back later for updates</p>\n                            <a href=\"index.php\" class=\"category-item\">Back to Home</a>\n                        </div>\n                    <?php else: ?>\n                        <!-- Newspaper-style Article List -->\n                        <div class=\"list-layout\">\n                            <?php foreach ($articles as $article_item): ?>\n                            <article class=\"list-item mb-4\">\n                                <div class=\"row align-items-center g-3\">\n                                    <div class=\"<?php echo $article_item['featured_image'] ? 'col-md-8' : 'col-12'; ?>\">\n                                        <div class=\"article-content\">\n                                            <div class=\"article-meta mb-2\">\n                                                <span class=\"category\" style=\"color: <?php echo htmlspecialchars($category['color']); ?>\">\n                                                    <?php echo htmlspecialchars($category['name']); ?>\n                                                </span>\n                                                <span class=\"date ms-3\"><?php echo date('M j, Y', strtotime($article_item['published_at'] ?? $article_item['created_at'])); ?></span>\n                                                <span class=\"views ms-3\"><?php echo number_format($article_item['views']); ?> views</span>\n                                                <?php if ($article_item['is_breaking']): ?>\n                                                <span class=\"breaking-badge ms-3\">Breaking</span>\n                                                <?php endif; ?>\n                                            </div>\n                                            <h5><a href=\"article.php?slug=<?php echo $article_item['slug']; ?>\"><?php echo htmlspecialchars($article_item['title']); ?></a></h5>\n                                            <p><?php \n                                            $length = $article_item['featured_image'] ? 120 : 200;\n                                            echo htmlspecialchars(substr($article_item['excerpt'] ?? $article_item['content'], 0, $length)) . '...'; \n                                            ?></p>\n                                        </div>\n                                    </div>\n                                    <?php if ($article_item['featured_image']): ?>\n                                    <div class=\"col-md-4\">\n                                        <div class=\"article-image\">\n                                            <img src=\"<?php echo htmlspecialchars($article_item['featured_image']); ?>\" \n                                                 alt=\"<?php echo htmlspecialchars($article_item['title']); ?>\"\n                                                 class=\"img-fluid rounded\">\n                                        </div>\n                                    </div>\n                                    <?php endif; ?>\n                                </div>\n                            </article>\n                            <?php endforeach; ?>\n                        </div>\n                    <?php endif; ?>\n                </div>\n            </div>\n        </div>\n    </main>\n\n    <!-- Footer -->\n    <footer class=\"main-footer\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <p>&copy; <?php echo date('Y'); ?> <?php echo SITE_NAME; ?>. All rights reserved.</p>\n                </div>\n                <div class=\"col-md-6 text-md-end\">\n                    <p><a href=\"admin/login.php\">Admin Login</a></p>\n                </div>\n            </div>\n        </div>\n    </footer>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script src=\"public/js/main.js\"></script>\n</body>\n</html>","size_bytes":12776},"replit.md":{"content":"# Overview\n\nThis is a professional news portal built with PHP, featuring a complete content management system (CMS) with both frontend public interface and backend admin dashboard. The application provides article publishing, user management, and a rich text editing experience for content creators.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# System Architecture\n\n## Frontend Architecture\n- **Multi-layered CSS Design**: Uses CSS custom properties (CSS variables) for consistent theming across admin and public interfaces\n- **Component-based Styling**: Separate stylesheets for admin dashboard (`admin.css`), rich text editor (`editor.css`), and public frontend (`style.css`)\n- **Progressive Enhancement**: JavaScript features like lazy loading, smooth scrolling, and debounced search enhance the basic functionality\n- **Custom Rich Text Editor**: Built-in WYSIWYG editor (`ProfessionalEditor` class) with formatting tools and media insertion capabilities\n\n## Backend Architecture\n- **PHP-based Server**: Traditional server-side rendering with PHP handling all backend logic\n- **Session Management**: PHP sessions for user authentication and state management\n- **MVC-like Structure**: Organized separation between presentation (CSS/JS), business logic (PHP), and data handling\n\n## Content Management Features\n- **Rich Text Editing**: Custom editor with formatting options, heading styles, text alignment, and media insertion\n- **SEO-friendly URLs**: Dynamic slug generation from article titles for better search engine optimization\n- **Responsive Design**: Mobile-first approach with flexible grid system and responsive navigation\n- **Image Optimization**: Lazy loading implementation for improved page performance\n\n## User Interface Design\n- **Professional Theming**: Gradient color schemes with CSS custom properties for easy customization\n- **Admin Dashboard**: Fixed sidebar navigation with collapsible mobile view\n- **Interactive Elements**: Hover effects, transitions, and active states for better user experience\n- **Accessibility Features**: Proper semantic HTML structure and keyboard navigation support\n\n# Recent Changes (September 2025)\n\n## Homepage Enhancement\n- **Dynamic Sections System**: Created configurable homepage sections (breaking, trending, latest, featured) with multiple layout options (banner, grid, list)\n- **Database Schema Updates**: Added homepage_sections table and comments table, enhanced categories with homepage visibility controls\n- **Sample Content**: Added 15+ realistic articles across 5 categories with professional images and content\n- **Variable Scope Fixes**: Resolved PHP variable naming conflicts in nested loops for proper article display\n\n## Database Improvements\n- **Article Class Enhancement**: Added missing CRUD methods (getById, update, delete) for complete article management\n- **Comments System**: Created Comment class structure ready for implementation\n- **Category Management**: Enhanced with homepage display options and color coding\n\n# External Dependencies\n\n## Frontend Libraries\n- **Font Awesome**: Icon library for UI elements and editor toolbar buttons\n- **Inter Font**: Google Fonts integration for typography consistency\n- **Modern Browser APIs**: Intersection Observer for lazy loading, CSS Grid and Flexbox for layout\n\n## Development Tools\n- **Native JavaScript**: No external JavaScript frameworks, using vanilla JS for all interactions\n- **CSS Grid & Flexbox**: Modern CSS layout techniques for responsive design\n- **PHP Session Handling**: Built-in PHP session management for user authentication\n\n## Browser Compatibility\n- **Modern Browser Support**: Utilizes contemporary web standards like CSS custom properties, Intersection Observer, and ES6+ JavaScript features\n- **Progressive Enhancement**: Core functionality works without JavaScript, enhanced features layer on top","size_bytes":3883},"search.php":{"content":"<?php\nrequire_once 'config/config.php';\nrequire_once 'classes/Article.php';\n\n$query = sanitize($_GET['q'] ?? '');\n$page = max(1, intval($_GET['page'] ?? 1));\n$limit = ARTICLES_PER_PAGE;\n$offset = ($page - 1) * $limit;\n\n$article = new Article();\n$articles = [];\n\nif (!empty($query)) {\n    $articles = $article->getAllArticles($limit, $offset, $query, 'published');\n}\n\n// Get categories for navigation\n$db = new Database();\n$conn = $db->getConnection();\n$categories_stmt = $conn->query(\"SELECT * FROM categories WHERE status = 'active' AND show_in_menu = true ORDER BY display_order\");\n$categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Search: <?php echo htmlspecialchars($query); ?> - <?php echo SITE_NAME; ?></title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"public/css/style.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <!-- Newspaper Header -->\n    <header class=\"newspaper-header\">\n        <!-- Top Header Section -->\n        <div class=\"header-top\">\n            <div class=\"container-fluid\">\n                <div class=\"logo-section\">\n                    <a href=\"index.php\" class=\"logo-link\">\n                        <img src=\"public/images/eechnapa-logo.png\" alt=\"Eechnapa\" class=\"newspaper-logo\">\n                    </a>\n                    <div class=\"current-date\">\n                        <?php echo date('l, F j, Y'); ?>\n                    </div>\n                    <div class=\"header-search\">\n                        <form method=\"GET\" action=\"search.php\">\n                            <div class=\"input-group\">\n                                <input class=\"form-control\" type=\"search\" name=\"q\" placeholder=\"Search news...\" value=\"<?php echo htmlspecialchars($query); ?>\">\n                                <button class=\"btn\" type=\"submit\">\n                                    Search\n                                </button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n        \n        <!-- Categories Navigation -->\n        <div class=\"categories-nav\">\n            <div class=\"container-fluid\">\n                <div class=\"categories-scroll-container\">\n                    <div class=\"categories-list\">\n                        <a href=\"index.php\" class=\"category-link\">Home</a>\n                        <?php foreach ($categories as $category): ?>\n                        <a href=\"category.php?slug=<?php echo $category['slug']; ?>\" class=\"category-link\">\n                            <?php echo htmlspecialchars($category['name']); ?>\n                        </a>\n                        <?php endforeach; ?>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </header>\n\n    <!-- Main Content -->\n    <main class=\"main-content\">\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-12\">\n                    <h2 class=\"section-title\">Search Results for: \"<?php echo htmlspecialchars($query); ?>\"</h2>\n                    \n                    <?php if (empty($query)): ?>\n                        <div class=\"text-center py-5\">\n                            <i class=\"fas fa-search fa-3x text-muted mb-3\"></i>\n                            <h4>Enter a search term</h4>\n                            <p class=\"text-muted\">Use the search box above to find articles</p>\n                        </div>\n                    <?php elseif (empty($articles)): ?>\n                        <div class=\"text-center py-5\">\n                            <i class=\"fas fa-search fa-3x text-muted mb-3\"></i>\n                            <h4>No results found</h4>\n                            <p class=\"text-muted\">Try different keywords or browse our categories</p>\n                        </div>\n                    <?php else: ?>\n                        <div class=\"row\">\n                            <?php foreach ($articles as $article_item): ?>\n                            <div class=\"col-md-6 col-lg-4 mb-4\">\n                                <article class=\"news-item\">\n                                    <?php if ($article_item['featured_image']): ?>\n                                    <div class=\"article-image\">\n                                        <img src=\"<?php echo htmlspecialchars($article_item['featured_image']); ?>\" \n                                             alt=\"<?php echo htmlspecialchars($article_item['title']); ?>\">\n                                    </div>\n                                    <?php endif; ?>\n                                    <div class=\"article-content\">\n                                        <div class=\"article-meta\">\n                                            <span class=\"date\"><?php echo date('M j, Y', strtotime($article_item['created_at'])); ?></span>\n                                        </div>\n                                        <h5><a href=\"article.php?slug=<?php echo $article_item['slug']; ?>\"><?php echo htmlspecialchars($article_item['title']); ?></a></h5>\n                                        <p><?php echo htmlspecialchars(substr($article_item['excerpt'] ?? $article_item['content'], 0, 150)) . '...'; ?></p>\n                                        <div class=\"article-stats\">\n                                            <span><i class=\"fas fa-eye\"></i> <?php echo number_format($article_item['views']); ?></span>\n                                        </div>\n                                    </div>\n                                </article>\n                            </div>\n                            <?php endforeach; ?>\n                        </div>\n                    <?php endif; ?>\n                </div>\n            </div>\n        </div>\n    </main>\n\n    <!-- Footer -->\n    <footer class=\"main-footer\">\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <p>&copy; <?php echo date('Y'); ?> <?php echo SITE_NAME; ?>. All rights reserved.</p>\n                </div>\n                <div class=\"col-md-6 text-md-end\">\n                    <p><a href=\"admin/login.php\">Admin Login</a></p>\n                </div>\n            </div>\n        </div>\n    </footer>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script src=\"public/js/main.js\"></script>\n</body>\n</html>","size_bytes":6719},"admin/ads.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\n\n$success = '';\n$error = '';\n\n$db = new Database();\n$conn = $db->getConnection();\n\n// Handle form submissions\nif ($_POST) {\n    if (isset($_POST['action'])) {\n        switch ($_POST['action']) {\n            case 'create':\n                $title = sanitize($_POST['title'] ?? '');\n                $type = sanitize($_POST['type'] ?? 'banner');\n                $position = sanitize($_POST['position'] ?? 'sidebar');\n                $content = $_POST['content'] ?? '';\n                $click_url = sanitize($_POST['click_url'] ?? '');\n                $image_url = sanitize($_POST['image_url'] ?? '');\n                $status = sanitize($_POST['status'] ?? 'active');\n                $start_date = sanitize($_POST['start_date'] ?? '');\n                $end_date = sanitize($_POST['end_date'] ?? '');\n                \n                if (empty($title)) {\n                    $error = 'Ad title is required';\n                } else {\n                    $stmt = $conn->prepare(\"\n                        INSERT INTO ads (title, type, position, content, click_url, image_url, status, start_date, end_date, created_by) \n                        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n                    \");\n                    \n                    if ($stmt->execute([\n                        $title, $type, $position, $content, $click_url, $image_url, \n                        $status, $start_date ?: null, $end_date ?: null, $_SESSION['user_id']\n                    ])) {\n                        $success = 'Advertisement created successfully';\n                    } else {\n                        $error = 'Failed to create advertisement';\n                    }\n                }\n                break;\n                \n            case 'delete':\n                $ad_id = intval($_POST['ad_id'] ?? 0);\n                if ($ad_id > 0) {\n                    $stmt = $conn->prepare(\"DELETE FROM ads WHERE id = ?\");\n                    if ($stmt->execute([$ad_id])) {\n                        $success = 'Advertisement deleted successfully';\n                    } else {\n                        $error = 'Failed to delete advertisement';\n                    }\n                }\n                break;\n                \n            case 'toggle_status':\n                $ad_id = intval($_POST['ad_id'] ?? 0);\n                $status = sanitize($_POST['status'] ?? 'active');\n                \n                if ($ad_id > 0) {\n                    $stmt = $conn->prepare(\"UPDATE ads SET status = ? WHERE id = ?\");\n                    if ($stmt->execute([$status, $ad_id])) {\n                        $success = 'Advertisement status updated';\n                    } else {\n                        $error = 'Failed to update status';\n                    }\n                }\n                break;\n        }\n    }\n}\n\n// Get all ads\n$ads_stmt = $conn->query(\"\n    SELECT a.*, u.first_name, u.last_name, \n           (SELECT COUNT(*) FROM ad_clicks WHERE ad_id = a.id) as clicks,\n           (SELECT COUNT(*) FROM ad_impressions WHERE ad_id = a.id) as impressions\n    FROM ads a \n    LEFT JOIN users u ON a.created_by = u.id \n    ORDER BY a.created_at DESC\n\");\n$ads = $ads_stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Advertisement Management - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n    <style>\n        .ad-preview {\n            border: 1px solid #dee2e6;\n            border-radius: 8px;\n            padding: 15px;\n            margin-top: 15px;\n            background: #f8f9fa;\n        }\n        .ad-stats {\n            display: flex;\n            gap: 20px;\n        }\n        .stat-item {\n            text-align: center;\n            padding: 10px;\n            background: white;\n            border-radius: 6px;\n            flex: 1;\n        }\n        .ad-type-badge {\n            display: inline-block;\n            padding: 2px 8px;\n            border-radius: 4px;\n            font-size: 12px;\n            font-weight: 500;\n        }\n        .ad-type-banner { background: #e3f2fd; color: #1976d2; }\n        .ad-type-square { background: #f3e5f5; color: #7b1fa2; }\n        .ad-type-text { background: #e8f5e8; color: #388e3c; }\n        .ad-type-video { background: #fff3e0; color: #f57c00; }\n    </style>\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n            </div>\n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\"><i class=\"fas fa-tachometer-alt\"></i> Dashboard</a>\n                </li>\n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\"><i class=\"fas fa-file-alt\"></i> Articles</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"article-create.php\"><i class=\"fas fa-plus-circle\"></i> New Article</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\"><i class=\"fas fa-tags\"></i> Categories</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"media.php\"><i class=\"fas fa-images\"></i> Media Library</a>\n                </li>\n                <li class=\"menu-item active\">\n                    <a href=\"ads.php\"><i class=\"fas fa-bullhorn\"></i> Advertisements</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">Advertisement Management</h5>\n                </div>\n                <div class=\"topbar-right\">\n                    <button class=\"btn btn-primary btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#createAdModal\">\n                        <i class=\"fas fa-plus\"></i> New Advertisement\n                    </button>\n                </div>\n            </div>\n\n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <?php if ($error): ?>\n                        <div class=\"alert alert-danger alert-dismissible fade show\">\n                            <i class=\"fas fa-exclamation-triangle\"></i> <?php echo $error; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n\n                    <!-- Ads List -->\n                    <div class=\"card\">\n                        <div class=\"card-body\">\n                            <?php if (empty($ads)): ?>\n                                <div class=\"text-center py-5\">\n                                    <i class=\"fas fa-bullhorn fa-3x text-muted mb-3\"></i>\n                                    <h5>No advertisements found</h5>\n                                    <p class=\"text-muted\">Create your first advertisement to start monetizing</p>\n                                    <button class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#createAdModal\">\n                                        <i class=\"fas fa-plus\"></i> Create Advertisement\n                                    </button>\n                                </div>\n                            <?php else: ?>\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-hover\">\n                                        <thead>\n                                            <tr>\n                                                <th>Title</th>\n                                                <th>Type</th>\n                                                <th>Position</th>\n                                                <th>Performance</th>\n                                                <th>Status</th>\n                                                <th>Schedule</th>\n                                                <th>Actions</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <?php foreach ($ads as $ad): ?>\n                                            <tr>\n                                                <td>\n                                                    <strong><?php echo htmlspecialchars($ad['title']); ?></strong>\n                                                    <br><small class=\"text-muted\">by <?php echo htmlspecialchars($ad['first_name'] . ' ' . $ad['last_name']); ?></small>\n                                                </td>\n                                                <td>\n                                                    <span class=\"ad-type-badge ad-type-<?php echo $ad['type']; ?>\">\n                                                        <?php echo ucfirst($ad['type']); ?>\n                                                    </span>\n                                                </td>\n                                                <td><?php echo ucfirst($ad['position']); ?></td>\n                                                <td>\n                                                    <div class=\"ad-stats\">\n                                                        <div class=\"stat-item\">\n                                                            <div class=\"fw-bold text-primary\"><?php echo number_format($ad['impressions']); ?></div>\n                                                            <small>Impressions</small>\n                                                        </div>\n                                                        <div class=\"stat-item\">\n                                                            <div class=\"fw-bold text-success\"><?php echo number_format($ad['clicks']); ?></div>\n                                                            <small>Clicks</small>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                                <td>\n                                                    <form method=\"POST\" style=\"display: inline;\" onchange=\"this.submit()\">\n                                                        <input type=\"hidden\" name=\"action\" value=\"toggle_status\">\n                                                        <input type=\"hidden\" name=\"ad_id\" value=\"<?php echo $ad['id']; ?>\">\n                                                        <select name=\"status\" class=\"form-select form-select-sm\">\n                                                            <option value=\"active\" <?php echo $ad['status'] === 'active' ? 'selected' : ''; ?>>Active</option>\n                                                            <option value=\"paused\" <?php echo $ad['status'] === 'paused' ? 'selected' : ''; ?>>Paused</option>\n                                                            <option value=\"expired\" <?php echo $ad['status'] === 'expired' ? 'selected' : ''; ?>>Expired</option>\n                                                        </select>\n                                                    </form>\n                                                </td>\n                                                <td>\n                                                    <?php if ($ad['start_date']): ?>\n                                                        <small>\n                                                            <strong>Start:</strong> <?php echo date('M j, Y', strtotime($ad['start_date'])); ?><br>\n                                                            <?php if ($ad['end_date']): ?>\n                                                                <strong>End:</strong> <?php echo date('M j, Y', strtotime($ad['end_date'])); ?>\n                                                            <?php endif; ?>\n                                                        </small>\n                                                    <?php else: ?>\n                                                        <span class=\"text-muted\">Always Active</span>\n                                                    <?php endif; ?>\n                                                </td>\n                                                <td>\n                                                    <div class=\"btn-group btn-group-sm\">\n                                                        <button type=\"button\" class=\"btn btn-outline-info\" \n                                                                onclick=\"previewAd(<?php echo htmlspecialchars(json_encode($ad)); ?>)\" \n                                                                title=\"Preview\">\n                                                            <i class=\"fas fa-eye\"></i>\n                                                        </button>\n                                                        <button type=\"button\" class=\"btn btn-outline-primary\" \n                                                                onclick=\"editAd(<?php echo $ad['id']; ?>)\" title=\"Edit\">\n                                                            <i class=\"fas fa-edit\"></i>\n                                                        </button>\n                                                        <form method=\"POST\" style=\"display: inline;\" \n                                                              onsubmit=\"return confirm('Are you sure you want to delete this ad?')\">\n                                                            <input type=\"hidden\" name=\"action\" value=\"delete\">\n                                                            <input type=\"hidden\" name=\"ad_id\" value=\"<?php echo $ad['id']; ?>\">\n                                                            <button type=\"submit\" class=\"btn btn-outline-danger\" title=\"Delete\">\n                                                                <i class=\"fas fa-trash\"></i>\n                                                            </button>\n                                                        </form>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                            <?php endforeach; ?>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Create Ad Modal -->\n    <div class=\"modal fade\" id=\"createAdModal\" tabindex=\"-1\">\n        <div class=\"modal-dialog modal-lg\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">Create New Advertisement</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                </div>\n                <form method=\"POST\">\n                    <input type=\"hidden\" name=\"action\" value=\"create\">\n                    <div class=\"modal-body\">\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"title\" class=\"form-label\">Ad Title *</label>\n                                    <input type=\"text\" class=\"form-control\" name=\"title\" id=\"title\" required>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"type\" class=\"form-label\">Ad Type *</label>\n                                    <select class=\"form-select\" name=\"type\" id=\"type\" onchange=\"updateAdPreview()\" required>\n                                        <option value=\"banner\">Banner (728x90)</option>\n                                        <option value=\"square\">Square (300x300)</option>\n                                        <option value=\"text\">Text Only</option>\n                                        <option value=\"video\">Video</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"position\" class=\"form-label\">Position *</label>\n                                    <select class=\"form-select\" name=\"position\" id=\"position\" required>\n                                        <option value=\"header\">Header</option>\n                                        <option value=\"sidebar\">Sidebar</option>\n                                        <option value=\"footer\">Footer</option>\n                                        <option value=\"content-top\">Content Top</option>\n                                        <option value=\"content-bottom\">Content Bottom</option>\n                                        <option value=\"between-articles\">Between Articles</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"status\" class=\"form-label\">Status</label>\n                                    <select class=\"form-select\" name=\"status\" id=\"status\">\n                                        <option value=\"active\">Active</option>\n                                        <option value=\"paused\">Paused</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class=\"mb-3\">\n                            <label for=\"content\" class=\"form-label\">Ad Content</label>\n                            <textarea class=\"form-control\" name=\"content\" id=\"content\" rows=\"4\" \n                                      placeholder=\"HTML content for your ad (for text/banner ads)\"></textarea>\n                        </div>\n                        \n                        <div class=\"mb-3\">\n                            <label for=\"image_url\" class=\"form-label\">Image URL</label>\n                            <div class=\"input-group\">\n                                <input type=\"url\" class=\"form-control\" name=\"image_url\" id=\"image_url\" \n                                       placeholder=\"https://example.com/ad-image.jpg\" onchange=\"updateAdPreview()\">\n                                <button type=\"button\" class=\"btn btn-outline-secondary\" onclick=\"openMediaLibrary()\">\n                                    <i class=\"fas fa-images\"></i> Browse\n                                </button>\n                            </div>\n                        </div>\n                        \n                        <div class=\"mb-3\">\n                            <label for=\"click_url\" class=\"form-label\">Click URL</label>\n                            <input type=\"url\" class=\"form-control\" name=\"click_url\" id=\"click_url\" \n                                   placeholder=\"https://example.com/landing-page\">\n                        </div>\n                        \n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"start_date\" class=\"form-label\">Start Date (Optional)</label>\n                                    <input type=\"date\" class=\"form-control\" name=\"start_date\" id=\"start_date\">\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"end_date\" class=\"form-label\">End Date (Optional)</label>\n                                    <input type=\"date\" class=\"form-control\" name=\"end_date\" id=\"end_date\">\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <!-- Ad Preview -->\n                        <div class=\"ad-preview\" id=\"adPreview\">\n                            <h6>Ad Preview</h6>\n                            <div id=\"previewContent\">\n                                <p class=\"text-muted\">Fill in the fields above to see a preview</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"submit\" class=\"btn btn-primary\">\n                            <i class=\"fas fa-plus\"></i> Create Advertisement\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script>\n        function updateAdPreview() {\n            const title = document.getElementById('title').value;\n            const type = document.getElementById('type').value;\n            const imageUrl = document.getElementById('image_url').value;\n            const content = document.getElementById('content').value;\n            const previewContent = document.getElementById('previewContent');\n            \n            let previewHTML = '';\n            \n            if (type === 'banner' || type === 'square') {\n                if (imageUrl) {\n                    previewHTML = `<img src=\"${imageUrl}\" alt=\"${title}\" style=\"max-width: 100%; height: auto; border: 1px solid #ddd;\">`;\n                } else if (content) {\n                    previewHTML = content;\n                } else {\n                    previewHTML = `<div style=\"background: #f0f0f0; padding: 20px; text-align: center; border: 2px dashed #ccc;\">${title || 'Ad Title'}</div>`;\n                }\n            } else if (type === 'text') {\n                previewHTML = content || title || 'Text advertisement content';\n            } else if (type === 'video') {\n                previewHTML = '<div style=\"background: #000; color: white; padding: 20px; text-align: center;\"><i class=\"fas fa-play\"></i> Video Advertisement</div>';\n            }\n            \n            previewContent.innerHTML = previewHTML;\n        }\n        \n        function previewAd(adData) {\n            alert('Ad Preview:\\n\\nTitle: ' + adData.title + '\\nType: ' + adData.type + '\\nPosition: ' + adData.position);\n        }\n        \n        function editAd(adId) {\n            alert('Edit functionality will be implemented');\n        }\n        \n        function openMediaLibrary() {\n            window.open('media.php', 'mediaLibrary', 'width=800,height=600');\n        }\n        \n        // Auto-update preview on input change\n        document.addEventListener('DOMContentLoaded', function() {\n            const inputs = ['title', 'type', 'image_url', 'content'];\n            inputs.forEach(id => {\n                const element = document.getElementById(id);\n                if (element) {\n                    element.addEventListener('input', updateAdPreview);\n                    element.addEventListener('change', updateAdPreview);\n                }\n            });\n        });\n    </script>\n</body>\n</html>","size_bytes":24849},"admin/article-create.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\nrequire_once '../classes/Article.php';\n\n// Get categories\n$db = new Database();\n$conn = $db->getConnection();\n$categories_stmt = $conn->query(\"SELECT * FROM categories WHERE status = 'active' ORDER BY name\");\n$categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n\n$success = '';\n$error = '';\n\nif ($_POST) {\n    $title = sanitize($_POST['title'] ?? '');\n    $content = $_POST['content'] ?? '';\n    $excerpt = sanitize($_POST['excerpt'] ?? '');\n    $category_id = intval($_POST['category_id'] ?? 0);\n    $status = sanitize($_POST['status'] ?? 'draft');\n    $featured_image = sanitize($_POST['featured_image'] ?? '');\n    $is_featured = isset($_POST['is_featured']) ? 1 : 0;\n    $is_breaking = isset($_POST['is_breaking']) ? 1 : 0;\n    \n    // Basic validation\n    if (empty($title) || empty($content)) {\n        $error = 'Please fill in title and content';\n    } else {\n        $slug = generateSlug($title);\n        \n        // Check if slug exists\n        $slug_check = $conn->prepare(\"SELECT id FROM articles WHERE slug = ?\");\n        $slug_check->execute([$slug]);\n        if ($slug_check->rowCount() > 0) {\n            $slug .= '-' . time();\n        }\n        \n        $article_data = [\n            'title' => $title,\n            'slug' => $slug,\n            'excerpt' => $excerpt,\n            'content' => $content,\n            'featured_image' => $featured_image,\n            'featured_image_alt' => $title,\n            'author_id' => $_SESSION['user_id'],\n            'category_id' => $category_id ?: null,\n            'status' => $status,\n            'published_at' => $status === 'published' ? date('Y-m-d H:i:s') : null,\n            'scheduled_at' => $status === 'scheduled' ? sanitize($_POST['scheduled_at'] ?? '') : null,\n            'meta_title' => $title,\n            'meta_description' => $excerpt,\n            'meta_keywords' => '',\n            'is_featured' => $is_featured,\n            'is_breaking' => $is_breaking\n        ];\n        \n        $article = new Article();\n        if ($article->create($article_data)) {\n            $success = 'Article created successfully!';\n        } else {\n            $error = 'Failed to create article';\n        }\n    }\n}\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Create Article - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/editor.css\" rel=\"stylesheet\">\n    <!-- Content Blocks Editor -->\n    <style>\n        .editor-container {\n            border: 2px solid #dee2e6;\n            border-radius: 8px;\n            overflow: hidden;\n        }\n        .editor-toolbar {\n            background: #f8f9fa;\n            border-bottom: 1px solid #dee2e6;\n            padding: 8px;\n        }\n        .editor-toolbar button {\n            background: none;\n            border: 1px solid #dee2e6;\n            padding: 4px 8px;\n            margin: 2px;\n            border-radius: 4px;\n            cursor: pointer;\n        }\n        .editor-toolbar button:hover {\n            background: #e9ecef;\n        }\n        .editor-toolbar button.active {\n            background: #007bff;\n            color: white;\n        }\n        .editor-content {\n            min-height: 400px;\n            padding: 16px;\n            outline: none;\n            font-family: 'Inter', sans-serif;\n            line-height: 1.6;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Include sidebar navigation (same as dashboard) -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n                <p class=\"text-muted\">v1.0</p>\n            </div>\n            \n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\">\n                        <i class=\"fas fa-tachometer-alt\"></i>\n                        <span>Dashboard</span>\n                    </a>\n                </li>\n                \n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\">\n                        <i class=\"fas fa-file-alt\"></i>\n                        <span>Articles</span>\n                    </a>\n                </li>\n                <li class=\"menu-item active\">\n                    <a href=\"article-create.php\">\n                        <i class=\"fas fa-plus-circle\"></i>\n                        <span>New Article</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\">\n                        <i class=\"fas fa-tags\"></i>\n                        <span>Categories</span>\n                    </a>\n                </li>\n            </ul>\n        </nav>\n        \n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">Create New Article</h5>\n                </div>\n                <div class=\"topbar-right\">\n                    <div class=\"dropdown\">\n                        <button class=\"btn btn-link dropdown-toggle\" type=\"button\" id=\"userDropdown\" data-bs-toggle=\"dropdown\">\n                            <i class=\"fas fa-user-circle\"></i>\n                            <?php echo $_SESSION['user_name']; ?>\n                        </button>\n                        <ul class=\"dropdown-menu dropdown-menu-end\">\n                            <li><a class=\"dropdown-item\" href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <?php if ($error): ?>\n                        <div class=\"alert alert-danger alert-dismissible fade show\">\n                            <i class=\"fas fa-exclamation-triangle\"></i> <?php echo $error; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <form method=\"POST\" data-validate>\n                        <div class=\"row\">\n                            <div class=\"col-lg-8\">\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Article Content</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"title\" class=\"form-label\">Title *</label>\n                                            <input type=\"text\" class=\"form-control\" id=\"title\" name=\"title\" \n                                                   value=\"<?php echo isset($_POST['title']) ? htmlspecialchars($_POST['title']) : ''; ?>\" required>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"excerpt\" class=\"form-label\">Excerpt</label>\n                                            <textarea class=\"form-control\" id=\"excerpt\" name=\"excerpt\" rows=\"3\" \n                                                      placeholder=\"Brief summary of the article\"><?php echo isset($_POST['excerpt']) ? htmlspecialchars($_POST['excerpt']) : ''; ?></textarea>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label class=\"form-label\">Article Content *</label>\n                                            <p class=\"text-muted mb-3\">Use the content blocks below to create rich articles with text, images, videos, and quotes.</p>\n                                            <div id=\"content-blocks-editor\"></div>\n                                            <textarea name=\"content\" id=\"finalContent\" style=\"display:none;\" required></textarea>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <div class=\"col-lg-4\">\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Publish Settings</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"status\" class=\"form-label\">Status</label>\n                                            <select class=\"form-select\" id=\"status\" name=\"status\" onchange=\"toggleScheduleOptions()\">\n                                                <option value=\"draft\" <?php echo (isset($_POST['status']) && $_POST['status'] === 'draft') ? 'selected' : ''; ?>>Draft</option>\n                                                <option value=\"published\" <?php echo (isset($_POST['status']) && $_POST['status'] === 'published') ? 'selected' : ''; ?>>Published</option>\n                                                <option value=\"scheduled\" <?php echo (isset($_POST['status']) && $_POST['status'] === 'scheduled') ? 'selected' : ''; ?>>Schedule for Later</option>\n                                            </select>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\" id=\"scheduleOptions\" style=\"display: none;\">\n                                            <label for=\"scheduled_at\" class=\"form-label\">Publish Date & Time</label>\n                                            <input type=\"datetime-local\" class=\"form-control\" id=\"scheduled_at\" name=\"scheduled_at\" \n                                                   value=\"<?php echo isset($_POST['scheduled_at']) ? $_POST['scheduled_at'] : ''; ?>\">\n                                            <small class=\"text-muted\">Article will be automatically published at this time</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"category_id\" class=\"form-label\">Category</label>\n                                            <select class=\"form-select\" id=\"category_id\" name=\"category_id\">\n                                                <option value=\"\">Select Category</option>\n                                                <?php foreach ($categories as $category): ?>\n                                                <option value=\"<?php echo $category['id']; ?>\" \n                                                        <?php echo (isset($_POST['category_id']) && $_POST['category_id'] == $category['id']) ? 'selected' : ''; ?>>\n                                                    <?php echo htmlspecialchars($category['name']); ?>\n                                                </option>\n                                                <?php endforeach; ?>\n                                            </select>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"featured_image\" class=\"form-label\">Featured Image</label>\n                                            <div class=\"featured-image-upload\">\n                                                <div class=\"upload-area\" id=\"featuredImageUpload\">\n                                                    <div class=\"upload-placeholder\">\n                                                        <i class=\"fas fa-image\"></i>\n                                                        <p>Click to upload featured image</p>\n                                                        <p class=\"text-muted\">Recommended: 1200x600px</p>\n                                                    </div>\n                                                </div>\n                                                <input type=\"file\" id=\"featuredImageFile\" accept=\"image/*\" style=\"display: none;\">\n                                                <input type=\"hidden\" name=\"featured_image\" id=\"featuredImageUrl\" \n                                                       value=\"<?php echo isset($_POST['featured_image']) ? htmlspecialchars($_POST['featured_image']) : ''; ?>\">\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" id=\"is_featured\" name=\"is_featured\" \n                                                       <?php echo isset($_POST['is_featured']) ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"is_featured\">\n                                                    Featured Article\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" id=\"is_breaking\" name=\"is_breaking\" \n                                                       <?php echo isset($_POST['is_breaking']) ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"is_breaking\">\n                                                    Breaking News\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"d-grid\">\n                                            <button type=\"submit\" class=\"btn btn-primary\">\n                                                <i class=\"fas fa-save\"></i> Create Article\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script src=\"../public/js/admin.js\"></script>\n    <script src=\"../public/js/content-blocks.js\"></script>\n    <script>\n        // Featured Image Upload Handler\n        document.addEventListener('DOMContentLoaded', function() {\n            const featuredImageUpload = document.getElementById('featuredImageUpload');\n            const featuredImageFile = document.getElementById('featuredImageFile');\n            const featuredImageUrl = document.getElementById('featuredImageUrl');\n            \n            if (featuredImageUpload && featuredImageFile) {\n                featuredImageUpload.onclick = function() {\n                    featuredImageFile.click();\n                };\n                \n                featuredImageFile.onchange = async function() {\n                    const file = this.files[0];\n                    if (!file) return;\n                    \n                    featuredImageUpload.innerHTML = '<div class=\"upload-progress\"><i class=\"fas fa-spinner fa-spin\"></i> Uploading...</div>';\n                    \n                    const formData = new FormData();\n                    formData.append('image', file);\n                    \n                    try {\n                        const response = await fetch('upload-image.php', {\n                            method: 'POST',\n                            body: formData\n                        });\n                        \n                        const result = await response.json();\n                        \n                        if (result.success) {\n                            featuredImageUpload.innerHTML = `<img src=\"${result.url}\" alt=\"Featured image\" style=\"max-width: 100%; height: auto;\">`;\n                            featuredImageUrl.value = result.url;\n                        } else {\n                            featuredImageUpload.innerHTML = `<div class=\"upload-error\"><i class=\"fas fa-exclamation-triangle\"></i><p>Upload failed: ${result.message}</p></div>`;\n                        }\n                    } catch (error) {\n                        featuredImageUpload.innerHTML = `<div class=\"upload-error\"><i class=\"fas fa-exclamation-triangle\"></i><p>Upload failed: Network error</p></div>`;\n                    }\n                };\n            }\n            \n            // Form Submission Handler\n            const form = document.querySelector('form[data-validate]');\n            if (form) {\n                form.onsubmit = function(e) {\n                    // Collect content from blocks editor\n                    if (typeof contentEditor !== 'undefined') {\n                        const blocks = contentEditor.getContent();\n                        const contentJson = JSON.stringify(blocks);\n                        document.getElementById('finalContent').value = contentJson;\n                    }\n                    \n                    // Validate required fields\n                    const title = document.getElementById('title').value.trim();\n                    const finalContent = document.getElementById('finalContent').value.trim();\n                    \n                    if (!title) {\n                        alert('Please enter a title.');\n                        e.preventDefault();\n                        return false;\n                    }\n                    \n                    if (!finalContent || finalContent === '[]') {\n                        alert('Please add some content to your article.');\n                        e.preventDefault();\n                        return false;\n                    }\n                    \n                    return true;\n                };\n            }\n        });\n        \n        // Schedule Options Toggle\n        function toggleScheduleOptions() {\n            const status = document.getElementById('status').value;\n            const scheduleOptions = document.getElementById('scheduleOptions');\n            if (status === 'scheduled') {\n                scheduleOptions.style.display = 'block';\n            } else {\n                scheduleOptions.style.display = 'none';\n            }\n        }\n    </script>\n</body>\n</html>","size_bytes":20170},"admin/article-edit.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\nrequire_once '../classes/Article.php';\n\n$article_id = intval($_GET['id'] ?? 0);\n\nif ($article_id <= 0) {\n    redirect('articles.php');\n}\n\n$article = new Article();\n$article_data = $article->getById($article_id);\n\nif (!$article_data) {\n    redirect('articles.php');\n}\n\n// Get categories\n$db = new Database();\n$conn = $db->getConnection();\n$categories_stmt = $conn->query(\"SELECT * FROM categories WHERE status = 'active' ORDER BY name\");\n$categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n\n$success = '';\n$error = '';\n\nif ($_POST) {\n    $title = sanitize($_POST['title'] ?? '');\n    $content = $_POST['content'] ?? '';\n    $excerpt = sanitize($_POST['excerpt'] ?? '');\n    $category_id = intval($_POST['category_id'] ?? 0);\n    $status = sanitize($_POST['status'] ?? 'draft');\n    $featured_image = sanitize($_POST['featured_image'] ?? '');\n    $is_featured = isset($_POST['is_featured']) ? 1 : 0;\n    $is_breaking = isset($_POST['is_breaking']) ? 1 : 0;\n    $scheduled_at = $status === 'scheduled' ? sanitize($_POST['scheduled_at'] ?? '') : null;\n    \n    // Basic validation\n    if (empty($title) || empty($content)) {\n        $error = 'Please fill in title and content';\n    } else {\n        // Generate slug from title if changed\n        $slug = $article_data['slug'];\n        if ($title !== $article_data['title']) {\n            $new_slug = generateSlug($title);\n            \n            // Check if new slug exists (exclude current article)\n            $slug_check = $conn->prepare(\"SELECT id FROM articles WHERE slug = ? AND id != ?\");\n            $slug_check->execute([$new_slug, $article_id]);\n            if ($slug_check->rowCount() > 0) {\n                $new_slug .= '-' . time();\n            }\n            $slug = $new_slug;\n        }\n        \n        $update_data = [\n            'title' => $title,\n            'slug' => $slug,\n            'excerpt' => $excerpt,\n            'content' => $content,\n            'featured_image' => $featured_image,\n            'featured_image_alt' => $title,\n            'category_id' => $category_id ?: null,\n            'status' => $status,\n            'published_at' => ($status === 'published' && !$article_data['published_at']) ? date('Y-m-d H:i:s') : $article_data['published_at'],\n            'scheduled_at' => $scheduled_at,\n            'meta_title' => $title,\n            'meta_description' => $excerpt,\n            'is_featured' => $is_featured,\n            'is_breaking' => $is_breaking,\n            'updated_at' => date('Y-m-d H:i:s')\n        ];\n        \n        if ($article->update($article_id, $update_data)) {\n            $success = 'Article updated successfully!';\n            // Refresh article data\n            $article_data = $article->getById($article_id);\n        } else {\n            $error = 'Failed to update article';\n        }\n    }\n}\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Edit Article - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/editor.css\" rel=\"stylesheet\">\n    <style>\n        .editor-container {\n            border: 2px solid #dee2e6;\n            border-radius: 8px;\n            overflow: hidden;\n        }\n        .editor-toolbar {\n            background: #f8f9fa;\n            border-bottom: 1px solid #dee2e6;\n            padding: 8px;\n        }\n        .editor-toolbar button {\n            background: none;\n            border: 1px solid #dee2e6;\n            padding: 4px 8px;\n            margin: 2px;\n            border-radius: 4px;\n            cursor: pointer;\n        }\n        .editor-toolbar button:hover {\n            background: #e9ecef;\n        }\n        .editor-toolbar button.active {\n            background: #007bff;\n            color: white;\n        }\n        .editor-content {\n            min-height: 400px;\n            padding: 16px;\n            outline: none;\n            font-family: 'Inter', sans-serif;\n            line-height: 1.6;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Include sidebar navigation (same as create page) -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n                <p class=\"text-muted\">v1.0</p>\n            </div>\n            \n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\">\n                        <i class=\"fas fa-tachometer-alt\"></i>\n                        <span>Dashboard</span>\n                    </a>\n                </li>\n                \n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\">\n                        <i class=\"fas fa-file-alt\"></i>\n                        <span>Articles</span>\n                    </a>\n                </li>\n                <li class=\"menu-item active\">\n                    <a href=\"article-create.php\">\n                        <i class=\"fas fa-plus-circle\"></i>\n                        <span>New Article</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\">\n                        <i class=\"fas fa-tags\"></i>\n                        <span>Categories</span>\n                    </a>\n                </li>\n            </ul>\n        </nav>\n        \n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">Edit Article</h5>\n                    <span class=\"badge bg-info ms-2\"><?php echo ucfirst($article_data['status']); ?></span>\n                </div>\n                <div class=\"topbar-right\">\n                    <a href=\"articles.php\" class=\"btn btn-outline-secondary btn-sm me-2\">\n                        <i class=\"fas fa-arrow-left\"></i> Back to Articles\n                    </a>\n                    <?php if ($article_data['status'] === 'published'): ?>\n                    <a href=\"../article.php?slug=<?php echo $article_data['slug']; ?>\" target=\"_blank\" class=\"btn btn-outline-success btn-sm me-2\">\n                        <i class=\"fas fa-external-link-alt\"></i> View Article\n                    </a>\n                    <?php endif; ?>\n                    <div class=\"dropdown\">\n                        <button class=\"btn btn-link dropdown-toggle\" type=\"button\" id=\"userDropdown\" data-bs-toggle=\"dropdown\">\n                            <i class=\"fas fa-user-circle\"></i>\n                            <?php echo $_SESSION['user_name'] ?? 'Admin'; ?>\n                        </button>\n                        <ul class=\"dropdown-menu dropdown-menu-end\">\n                            <li><a class=\"dropdown-item\" href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <?php if ($error): ?>\n                        <div class=\"alert alert-danger alert-dismissible fade show\">\n                            <i class=\"fas fa-exclamation-triangle\"></i> <?php echo $error; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <form method=\"POST\" data-validate>\n                        <div class=\"row\">\n                            <div class=\"col-lg-8\">\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Article Content</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"title\" class=\"form-label\">Title *</label>\n                                            <input type=\"text\" class=\"form-control\" id=\"title\" name=\"title\" \n                                                   value=\"<?php echo htmlspecialchars($article_data['title']); ?>\" required>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"excerpt\" class=\"form-label\">Excerpt</label>\n                                            <textarea class=\"form-control\" id=\"excerpt\" name=\"excerpt\" rows=\"3\" \n                                                      placeholder=\"Brief summary of the article\"><?php echo htmlspecialchars($article_data['excerpt'] ?? ''); ?></textarea>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label class=\"form-label\">Article Content *</label>\n                                            <p class=\"text-muted mb-3\">Use the content blocks below to create rich articles with text, images, videos, and quotes.</p>\n                                            <div id=\"content-blocks-editor\"></div>\n                                            <textarea name=\"content\" id=\"finalContent\" style=\"display:none;\" required><?php echo htmlspecialchars($article_data['content']); ?></textarea>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            \n                            <div class=\"col-lg-4\">\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Publish Settings</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"status\" class=\"form-label\">Status</label>\n                                            <select class=\"form-select\" id=\"status\" name=\"status\" onchange=\"toggleScheduleOptions()\">\n                                                <option value=\"draft\" <?php echo $article_data['status'] === 'draft' ? 'selected' : ''; ?>>Draft</option>\n                                                <option value=\"published\" <?php echo $article_data['status'] === 'published' ? 'selected' : ''; ?>>Published</option>\n                                                <option value=\"scheduled\" <?php echo $article_data['status'] === 'scheduled' ? 'selected' : ''; ?>>Schedule for Later</option>\n                                            </select>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\" id=\"scheduleOptions\" style=\"display: <?php echo $article_data['status'] === 'scheduled' ? 'block' : 'none'; ?>;\">\n                                            <label for=\"scheduled_at\" class=\"form-label\">Publish Date & Time</label>\n                                            <input type=\"datetime-local\" class=\"form-control\" id=\"scheduled_at\" name=\"scheduled_at\" \n                                                   value=\"<?php echo $article_data['scheduled_at'] ? date('Y-m-d\\TH:i', strtotime($article_data['scheduled_at'])) : ''; ?>\">\n                                            <small class=\"text-muted\">Article will be automatically published at this time</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"category_id\" class=\"form-label\">Category</label>\n                                            <select class=\"form-select\" id=\"category_id\" name=\"category_id\">\n                                                <option value=\"\">Select Category</option>\n                                                <?php foreach ($categories as $category): ?>\n                                                <option value=\"<?php echo $category['id']; ?>\" \n                                                        <?php echo $article_data['category_id'] == $category['id'] ? 'selected' : ''; ?>>\n                                                    <?php echo htmlspecialchars($category['name']); ?>\n                                                </option>\n                                                <?php endforeach; ?>\n                                            </select>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"featured_image\" class=\"form-label\">Featured Image</label>\n                                            <div class=\"featured-image-upload\">\n                                                <div class=\"upload-area\" id=\"featuredImageUpload\">\n                                                    <?php if ($article_data['featured_image']): ?>\n                                                        <img src=\"<?php echo htmlspecialchars($article_data['featured_image']); ?>\" \n                                                             alt=\"Featured image\" style=\"max-width: 100%; height: auto;\">\n                                                    <?php else: ?>\n                                                        <div class=\"upload-placeholder\">\n                                                            <i class=\"fas fa-image\"></i>\n                                                            <p>Click to upload featured image</p>\n                                                            <p class=\"text-muted\">Recommended: 1200x600px</p>\n                                                        </div>\n                                                    <?php endif; ?>\n                                                </div>\n                                                <input type=\"file\" id=\"featuredImageFile\" accept=\"image/*\" style=\"display: none;\">\n                                                <input type=\"hidden\" name=\"featured_image\" id=\"featuredImageUrl\" \n                                                       value=\"<?php echo htmlspecialchars($article_data['featured_image'] ?? ''); ?>\">\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" id=\"is_featured\" name=\"is_featured\" \n                                                       <?php echo $article_data['is_featured'] ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"is_featured\">\n                                                    Featured Article\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" id=\"is_breaking\" name=\"is_breaking\" \n                                                       <?php echo $article_data['is_breaking'] ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"is_breaking\">\n                                                    Breaking News\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"d-grid gap-2\">\n                                            <button type=\"submit\" class=\"btn btn-primary\">\n                                                <i class=\"fas fa-save\"></i> Update Article\n                                            </button>\n                                        </div>\n                                        \n                                        <hr>\n                                        \n                                        <div class=\"article-meta\">\n                                            <small class=\"text-muted\">\n                                                <strong>Created:</strong> <?php echo date('M j, Y g:i A', strtotime($article_data['created_at'])); ?><br>\n                                                <strong>Updated:</strong> <?php echo date('M j, Y g:i A', strtotime($article_data['updated_at'])); ?><br>\n                                                <strong>Views:</strong> <?php echo number_format($article_data['views']); ?><br>\n                                                <strong>Author:</strong> <?php echo htmlspecialchars($article_data['first_name'] . ' ' . $article_data['last_name']); ?>\n                                            </small>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script src=\"../public/js/admin.js\"></script>\n    <script src=\"../public/js/content-blocks.js\"></script>\n    <script>\n        // Featured Image Upload Handler\n        document.addEventListener('DOMContentLoaded', function() {\n            const featuredImageUpload = document.getElementById('featuredImageUpload');\n            const featuredImageFile = document.getElementById('featuredImageFile');\n            const featuredImageUrl = document.getElementById('featuredImageUrl');\n            \n            if (featuredImageUpload && featuredImageFile) {\n                featuredImageUpload.onclick = function() {\n                    featuredImageFile.click();\n                };\n                \n                featuredImageFile.onchange = async function() {\n                    const file = this.files[0];\n                    if (!file) return;\n                    \n                    featuredImageUpload.innerHTML = '<div class=\"upload-progress\"><i class=\"fas fa-spinner fa-spin\"></i> Uploading...</div>';\n                    \n                    const formData = new FormData();\n                    formData.append('image', file);\n                    \n                    try {\n                        const response = await fetch('upload-image.php', {\n                            method: 'POST',\n                            body: formData\n                        });\n                        \n                        const result = await response.json();\n                        \n                        if (result.success) {\n                            featuredImageUpload.innerHTML = `<img src=\"${result.url}\" alt=\"Featured image\" style=\"max-width: 100%; height: auto;\">`;\n                            featuredImageUrl.value = result.url;\n                        } else {\n                            featuredImageUpload.innerHTML = `<div class=\"upload-error\"><i class=\"fas fa-exclamation-triangle\"></i><p>Upload failed: ${result.message}</p></div>`;\n                        }\n                    } catch (error) {\n                        featuredImageUpload.innerHTML = `<div class=\"upload-error\"><i class=\"fas fa-exclamation-triangle\"></i><p>Upload failed: Network error</p></div>`;\n                    }\n                };\n            }\n            \n            // Form Submission Handler\n            const form = document.querySelector('form[data-validate]');\n            if (form) {\n                form.onsubmit = function(e) {\n                    // Collect content from blocks editor\n                    if (typeof contentEditor !== 'undefined') {\n                        const blocks = contentEditor.getContent();\n                        const contentJson = JSON.stringify(blocks);\n                        document.getElementById('finalContent').value = contentJson;\n                    }\n                    \n                    // Validate required fields\n                    const title = document.getElementById('title').value.trim();\n                    const finalContent = document.getElementById('finalContent').value.trim();\n                    \n                    if (!title) {\n                        alert('Please enter a title.');\n                        e.preventDefault();\n                        return false;\n                    }\n                    \n                    if (!finalContent || finalContent === '[]') {\n                        alert('Please add some content to your article.');\n                        e.preventDefault();\n                        return false;\n                    }\n                    \n                    return true;\n                };\n            }\n        });\n        \n        // Schedule Options Toggle\n        function toggleScheduleOptions() {\n            const status = document.getElementById('status').value;\n            const scheduleOptions = document.getElementById('scheduleOptions');\n            if (status === 'scheduled') {\n                scheduleOptions.style.display = 'block';\n            } else {\n                scheduleOptions.style.display = 'none';\n            }\n        }\n    </script>\n</body>\n</html>","size_bytes":22922},"admin/articles.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\nrequire_once '../classes/Article.php';\n\n$article = new Article();\n$db = new Database();\n$conn = $db->getConnection();\n\n// Handle bulk actions\nif ($_POST && isset($_POST['bulk_action']) && isset($_POST['article_ids'])) {\n    $action = sanitize($_POST['bulk_action']);\n    $article_ids = array_map('intval', $_POST['article_ids']);\n    \n    if ($action === 'delete' && !empty($article_ids)) {\n        $placeholders = implode(',', array_fill(0, count($article_ids), '?'));\n        $stmt = $conn->prepare(\"DELETE FROM articles WHERE id IN ($placeholders)\");\n        if ($stmt->execute($article_ids)) {\n            $success = count($article_ids) . \" articles deleted successfully\";\n        }\n    }\n}\n\n// Pagination and filters\n$page = max(1, intval($_GET['page'] ?? 1));\n$limit = ADMIN_ARTICLES_PER_PAGE;\n$offset = ($page - 1) * $limit;\n$search = sanitize($_GET['search'] ?? '');\n$status_filter = sanitize($_GET['status'] ?? '');\n\n// Get articles\n$articles = $article->getAllArticles($limit, $offset, $search, $status_filter);\n\n// Get total count for pagination\n$total_query = \"SELECT COUNT(*) FROM articles a WHERE 1=1\";\n$params = [];\n\nif ($search) {\n    $total_query .= \" AND (a.title LIKE ? OR a.content LIKE ?)\";\n    $params[] = \"%$search%\";\n    $params[] = \"%$search%\";\n}\n\nif ($status_filter) {\n    $total_query .= \" AND a.status = ?\";\n    $params[] = $status_filter;\n}\n\n$total_stmt = $conn->prepare($total_query);\n$total_stmt->execute($params);\n$total_articles = $total_stmt->fetchColumn();\n$total_pages = ceil($total_articles / $limit);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Articles - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n            </div>\n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\"><i class=\"fas fa-tachometer-alt\"></i> Dashboard</a>\n                </li>\n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item active\">\n                    <a href=\"articles.php\"><i class=\"fas fa-file-alt\"></i> Articles</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"article-create.php\"><i class=\"fas fa-plus-circle\"></i> New Article</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">Manage Articles</h5>\n                </div>\n                <div class=\"topbar-right\">\n                    <a href=\"article-create.php\" class=\"btn btn-primary btn-sm\">\n                        <i class=\"fas fa-plus\"></i> New Article\n                    </a>\n                </div>\n            </div>\n\n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <!-- Filters -->\n                    <div class=\"card mb-4\">\n                        <div class=\"card-body\">\n                            <form method=\"GET\" class=\"row g-3\">\n                                <div class=\"col-md-4\">\n                                    <input type=\"text\" class=\"form-control\" name=\"search\" \n                                           placeholder=\"Search articles...\" value=\"<?php echo htmlspecialchars($search); ?>\">\n                                </div>\n                                <div class=\"col-md-3\">\n                                    <select name=\"status\" class=\"form-select\">\n                                        <option value=\"\">All Status</option>\n                                        <option value=\"draft\" <?php echo $status_filter === 'draft' ? 'selected' : ''; ?>>Draft</option>\n                                        <option value=\"published\" <?php echo $status_filter === 'published' ? 'selected' : ''; ?>>Published</option>\n                                        <option value=\"scheduled\" <?php echo $status_filter === 'scheduled' ? 'selected' : ''; ?>>Scheduled</option>\n                                    </select>\n                                </div>\n                                <div class=\"col-md-2\">\n                                    <button type=\"submit\" class=\"btn btn-outline-primary\">\n                                        <i class=\"fas fa-search\"></i> Filter\n                                    </button>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n\n                    <!-- Articles List -->\n                    <div class=\"card\">\n                        <div class=\"card-body\">\n                            <?php if (empty($articles)): ?>\n                                <div class=\"text-center py-4\">\n                                    <i class=\"fas fa-file-alt fa-3x text-muted mb-3\"></i>\n                                    <h5>No articles found</h5>\n                                    <p class=\"text-muted\">Start by creating your first article</p>\n                                    <a href=\"article-create.php\" class=\"btn btn-primary\">Create Article</a>\n                                </div>\n                            <?php else: ?>\n                                <form method=\"POST\" id=\"articlesForm\">\n                                    <div class=\"table-responsive\">\n                                        <table class=\"table table-hover\">\n                                            <thead>\n                                                <tr>\n                                                    <th width=\"40\">\n                                                        <input type=\"checkbox\" id=\"selectAll\">\n                                                    </th>\n                                                    <th>Title</th>\n                                                    <th>Category</th>\n                                                    <th>Status</th>\n                                                    <th>Views</th>\n                                                    <th>Date</th>\n                                                    <th>Actions</th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n                                                <?php foreach ($articles as $art): ?>\n                                                <tr>\n                                                    <td>\n                                                        <input type=\"checkbox\" name=\"article_ids[]\" value=\"<?php echo $art['id']; ?>\">\n                                                    </td>\n                                                    <td>\n                                                        <div>\n                                                            <strong><?php echo htmlspecialchars($art['title']); ?></strong>\n                                                            <?php if ($art['is_featured']): ?>\n                                                                <span class=\"badge bg-warning ms-1\">Featured</span>\n                                                            <?php endif; ?>\n                                                            <?php if ($art['is_breaking']): ?>\n                                                                <span class=\"badge bg-danger ms-1\">Breaking</span>\n                                                            <?php endif; ?>\n                                                        </div>\n                                                        <small class=\"text-muted\">by <?php echo htmlspecialchars($art['first_name'] . ' ' . $art['last_name']); ?></small>\n                                                    </td>\n                                                    <td>\n                                                        <?php if ($art['category_name']): ?>\n                                                            <span class=\"badge\" style=\"background-color: #007bff\">\n                                                                <?php echo htmlspecialchars($art['category_name']); ?>\n                                                            </span>\n                                                        <?php else: ?>\n                                                            <span class=\"text-muted\">Uncategorized</span>\n                                                        <?php endif; ?>\n                                                    </td>\n                                                    <td>\n                                                        <span class=\"badge bg-<?php echo $art['status'] === 'published' ? 'success' : ($art['status'] === 'draft' ? 'secondary' : 'info'); ?>\">\n                                                            <?php echo ucfirst($art['status']); ?>\n                                                        </span>\n                                                    </td>\n                                                    <td><?php echo number_format($art['views']); ?></td>\n                                                    <td><?php echo date('M j, Y', strtotime($art['created_at'])); ?></td>\n                                                    <td>\n                                                        <div class=\"btn-group btn-group-sm\">\n                                                            <a href=\"article-edit.php?id=<?php echo $art['id']; ?>\" \n                                                               class=\"btn btn-outline-primary\" title=\"Edit\">\n                                                                <i class=\"fas fa-edit\"></i>\n                                                            </a>\n                                                            <?php if ($art['status'] === 'published'): ?>\n                                                            <a href=\"../article.php?slug=<?php echo $art['slug']; ?>\" \n                                                               class=\"btn btn-outline-success\" title=\"View\" target=\"_blank\">\n                                                                <i class=\"fas fa-external-link-alt\"></i>\n                                                            </a>\n                                                            <?php endif; ?>\n                                                        </div>\n                                                    </td>\n                                                </tr>\n                                                <?php endforeach; ?>\n                                            </tbody>\n                                        </table>\n                                    </div>\n\n                                    <!-- Bulk Actions -->\n                                    <div class=\"row mt-3\">\n                                        <div class=\"col-md-6\">\n                                            <div class=\"d-flex align-items-center\">\n                                                <select name=\"bulk_action\" class=\"form-select me-2\" style=\"width: auto;\">\n                                                    <option value=\"\">Bulk Actions</option>\n                                                    <option value=\"delete\">Delete</option>\n                                                </select>\n                                                <button type=\"submit\" class=\"btn btn-outline-danger btn-sm\" \n                                                        onclick=\"return confirm('Are you sure?')\">Apply</button>\n                                            </div>\n                                        </div>\n                                        <div class=\"col-md-6\">\n                                            <!-- Pagination -->\n                                            <?php if ($total_pages > 1): ?>\n                                            <nav aria-label=\"Articles pagination\">\n                                                <ul class=\"pagination pagination-sm justify-content-end mb-0\">\n                                                    <?php if ($page > 1): ?>\n                                                    <li class=\"page-item\">\n                                                        <a class=\"page-link\" href=\"?page=<?php echo ($page - 1); ?><?php echo $search ? '&search=' . urlencode($search) : ''; ?><?php echo $status_filter ? '&status=' . urlencode($status_filter) : ''; ?>\">Previous</a>\n                                                    </li>\n                                                    <?php endif; ?>\n\n                                                    <?php for ($i = max(1, $page - 2); $i <= min($total_pages, $page + 2); $i++): ?>\n                                                    <li class=\"page-item <?php echo $i === $page ? 'active' : ''; ?>\">\n                                                        <a class=\"page-link\" href=\"?page=<?php echo $i; ?><?php echo $search ? '&search=' . urlencode($search) : ''; ?><?php echo $status_filter ? '&status=' . urlencode($status_filter) : ''; ?>\"><?php echo $i; ?></a>\n                                                    </li>\n                                                    <?php endfor; ?>\n\n                                                    <?php if ($page < $total_pages): ?>\n                                                    <li class=\"page-item\">\n                                                        <a class=\"page-link\" href=\"?page=<?php echo ($page + 1); ?><?php echo $search ? '&search=' . urlencode($search) : ''; ?><?php echo $status_filter ? '&status=' . urlencode($status_filter) : ''; ?>\">Next</a>\n                                                    </li>\n                                                    <?php endif; ?>\n                                                </ul>\n                                            </nav>\n                                            <?php endif; ?>\n                                        </div>\n                                    </div>\n                                </form>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script>\n        // Select all functionality\n        document.getElementById('selectAll').addEventListener('change', function() {\n            const checkboxes = document.querySelectorAll('input[name=\"article_ids[]\"]');\n            checkboxes.forEach(checkbox => checkbox.checked = this.checked);\n        });\n    </script>\n</body>\n</html>","size_bytes":15541},"admin/categories.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\n\n$db = new Database();\n$conn = $db->getConnection();\n\n$success = '';\n$error = '';\n\n// Handle form submissions\nif ($_POST) {\n    if (isset($_POST['action']) && $_POST['action'] === 'create') {\n        $name = sanitize($_POST['name'] ?? '');\n        $description = sanitize($_POST['description'] ?? '');\n        $color = sanitize($_POST['color'] ?? '#007bff');\n        \n        if (empty($name)) {\n            $error = 'Category name is required';\n        } else {\n            $slug = generateSlug($name);\n            \n            // Check if slug exists\n            $slug_check = $conn->prepare(\"SELECT id FROM categories WHERE slug = ?\");\n            $slug_check->execute([$slug]);\n            if ($slug_check->rowCount() > 0) {\n                $slug .= '-' . time();\n            }\n            \n            $stmt = $conn->prepare(\"INSERT INTO categories (name, slug, description, color, display_order, status) VALUES (?, ?, ?, ?, 0, 'active')\");\n            if ($stmt->execute([$name, $slug, $description, $color])) {\n                $success = 'Category created successfully';\n            } else {\n                $error = 'Failed to create category';\n            }\n        }\n    }\n}\n\n// Get all categories\n$categories_stmt = $conn->query(\"SELECT * FROM categories ORDER BY display_order, name\");\n$categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Categories - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n            </div>\n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\"><i class=\"fas fa-tachometer-alt\"></i> Dashboard</a>\n                </li>\n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\"><i class=\"fas fa-file-alt\"></i> Articles</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"article-create.php\"><i class=\"fas fa-plus-circle\"></i> New Article</a>\n                </li>\n                <li class=\"menu-item active\">\n                    <a href=\"categories.php\"><i class=\"fas fa-tags\"></i> Categories</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">Manage Categories</h5>\n                </div>\n            </div>\n\n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <?php if ($error): ?>\n                        <div class=\"alert alert-danger alert-dismissible fade show\">\n                            <i class=\"fas fa-exclamation-triangle\"></i> <?php echo $error; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n\n                    <div class=\"row\">\n                        <div class=\"col-md-8\">\n                            <!-- Categories List -->\n                            <div class=\"card\">\n                                <div class=\"card-header\">\n                                    <h5 class=\"card-title mb-0\">Categories</h5>\n                                </div>\n                                <div class=\"card-body\">\n                                    <?php if (empty($categories)): ?>\n                                        <div class=\"text-center py-4\">\n                                            <i class=\"fas fa-tags fa-3x text-muted mb-3\"></i>\n                                            <h5>No categories found</h5>\n                                            <p class=\"text-muted\">Create your first category to organize articles</p>\n                                        </div>\n                                    <?php else: ?>\n                                        <div class=\"table-responsive\">\n                                            <table class=\"table table-hover\">\n                                                <thead>\n                                                    <tr>\n                                                        <th>Name</th>\n                                                        <th>Slug</th>\n                                                        <th>Color</th>\n                                                        <th>Articles</th>\n                                                        <th>Status</th>\n                                                        <th>Actions</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                    <?php foreach ($categories as $category): ?>\n                                                    <tr>\n                                                        <td>\n                                                            <strong><?php echo htmlspecialchars($category['name']); ?></strong>\n                                                            <?php if ($category['description']): ?>\n                                                                <br><small class=\"text-muted\"><?php echo htmlspecialchars($category['description']); ?></small>\n                                                            <?php endif; ?>\n                                                        </td>\n                                                        <td>\n                                                            <code><?php echo htmlspecialchars($category['slug']); ?></code>\n                                                        </td>\n                                                        <td>\n                                                            <span class=\"badge bg-info\">\n                                                                <?php echo htmlspecialchars($category['color']); ?>\n                                                            </span>\n                                                        </td>\n                                                        <td>\n                                                            <?php\n                                                            $count_stmt = $conn->prepare(\"SELECT COUNT(*) FROM articles WHERE category_id = ?\");\n                                                            $count_stmt->execute([$category['id']]);\n                                                            echo $count_stmt->fetchColumn();\n                                                            ?>\n                                                        </td>\n                                                        <td>\n                                                            <span class=\"badge bg-<?php echo $category['status'] === 'active' ? 'success' : 'secondary'; ?>\">\n                                                                <?php echo ucfirst($category['status']); ?>\n                                                            </span>\n                                                        </td>\n                                                        <td>\n                                                            <div class=\"btn-group btn-group-sm\">\n                                                                <a href=\"category-edit.php?id=<?php echo $category['id']; ?>\" \n                                                                   class=\"btn btn-outline-primary\" title=\"Edit\">\n                                                                    <i class=\"fas fa-edit\"></i>\n                                                                </a>\n                                                                <a href=\"../category.php?slug=<?php echo $category['slug']; ?>\" \n                                                                   class=\"btn btn-outline-success\" title=\"View\" target=\"_blank\">\n                                                                    <i class=\"fas fa-external-link-alt\"></i>\n                                                                </a>\n                                                            </div>\n                                                        </td>\n                                                    </tr>\n                                                    <?php endforeach; ?>\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    <?php endif; ?>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"col-md-4\">\n                            <!-- Add New Category -->\n                            <div class=\"card\">\n                                <div class=\"card-header\">\n                                    <h5 class=\"card-title mb-0\">Add New Category</h5>\n                                </div>\n                                <div class=\"card-body\">\n                                    <form method=\"POST\">\n                                        <input type=\"hidden\" name=\"action\" value=\"create\">\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"name\" class=\"form-label\">Name *</label>\n                                            <input type=\"text\" class=\"form-control\" id=\"name\" name=\"name\" \n                                                   value=\"<?php echo isset($_POST['name']) ? htmlspecialchars($_POST['name']) : ''; ?>\" required>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"description\" class=\"form-label\">Description</label>\n                                            <textarea class=\"form-control\" id=\"description\" name=\"description\" rows=\"3\"><?php echo isset($_POST['description']) ? htmlspecialchars($_POST['description']) : ''; ?></textarea>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"color\" class=\"form-label\">Color</label>\n                                            <input type=\"color\" class=\"form-control form-control-color\" id=\"color\" name=\"color\" \n                                                   value=\"<?php echo isset($_POST['color']) ? htmlspecialchars($_POST['color']) : '#007bff'; ?>\">\n                                        </div>\n                                        \n                                        <div class=\"d-grid\">\n                                            <button type=\"submit\" class=\"btn btn-primary\">\n                                                <i class=\"fas fa-plus\"></i> Add Category\n                                            </button>\n                                        </div>\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":12755},"admin/dashboard.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\nrequire_once '../classes/Article.php';\n\n$article = new Article();\n\n// Get dashboard statistics\n$db = new Database();\n$conn = $db->getConnection();\n\n$stats = [];\n$stats['total_articles'] = $conn->query(\"SELECT COUNT(*) FROM articles\")->fetchColumn();\n$stats['published_articles'] = $conn->query(\"SELECT COUNT(*) FROM articles WHERE status = 'published'\")->fetchColumn();\n$stats['draft_articles'] = $conn->query(\"SELECT COUNT(*) FROM articles WHERE status = 'draft'\")->fetchColumn();\n$stats['total_views'] = $conn->query(\"SELECT COALESCE(SUM(views), 0) FROM articles\")->fetchColumn();\n\n// Get recent articles\n$recent_articles = $article->getAllArticles(5);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Dashboard - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n                <p class=\"text-muted\">v1.0</p>\n            </div>\n            \n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item active\">\n                    <a href=\"dashboard.php\">\n                        <i class=\"fas fa-tachometer-alt\"></i>\n                        <span>Dashboard</span>\n                    </a>\n                </li>\n                \n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\">\n                        <i class=\"fas fa-file-alt\"></i>\n                        <span>Articles</span>\n                        <span class=\"badge bg-primary\"><?php echo $stats['total_articles']; ?></span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"article-create.php\">\n                        <i class=\"fas fa-plus-circle\"></i>\n                        <span>New Article</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\">\n                        <i class=\"fas fa-tags\"></i>\n                        <span>Categories</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"media.php\">\n                        <i class=\"fas fa-images\"></i>\n                        <span>Media Library</span>\n                    </a>\n                </li>\n                \n                <li class=\"menu-header\">Layout & Design</li>\n                <li class=\"menu-item\">\n                    <a href=\"homepage-layout.php\">\n                        <i class=\"fas fa-th-large\"></i>\n                        <span>Homepage Layout</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"ads.php\">\n                        <i class=\"fas fa-ad\"></i>\n                        <span>Advertisements</span>\n                    </a>\n                </li>\n                \n                <li class=\"menu-header\">Configuration</li>\n                <li class=\"menu-item\">\n                    <a href=\"settings.php\">\n                        <i class=\"fas fa-cog\"></i>\n                        <span>Site Settings</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"seo-settings.php\">\n                        <i class=\"fas fa-search-plus\"></i>\n                        <span>SEO & Social</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"users.php\">\n                        <i class=\"fas fa-users\"></i>\n                        <span>Users</span>\n                    </a>\n                </li>\n                \n                <li class=\"menu-header\">System</li>\n                <li class=\"menu-item\">\n                    <a href=\"comments.php\">\n                        <i class=\"fas fa-comments\"></i>\n                        <span>Comments</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"../index.php\" target=\"_blank\">\n                        <i class=\"fas fa-external-link-alt\"></i>\n                        <span>View Site</span>\n                    </a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\">\n                        <i class=\"fas fa-sign-out-alt\"></i>\n                        <span>Logout</span>\n                    </a>\n                </li>\n            </ul>\n        </nav>\n        \n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <button class=\"btn btn-link sidebar-toggle d-lg-none\">\n                        <i class=\"fas fa-bars\"></i>\n                    </button>\n                    <h5 class=\"mb-0\">Dashboard Overview</h5>\n                </div>\n                <div class=\"topbar-right\">\n                    <div class=\"dropdown\">\n                        <button class=\"btn btn-link dropdown-toggle\" type=\"button\" id=\"userDropdown\" data-bs-toggle=\"dropdown\">\n                            <i class=\"fas fa-user-circle\"></i>\n                            <?php echo $_SESSION['user_name']; ?>\n                        </button>\n                        <ul class=\"dropdown-menu dropdown-menu-end\">\n                            <li><a class=\"dropdown-item\" href=\"profile.php\"><i class=\"fas fa-user\"></i> Profile</a></li>\n                            <li><a class=\"dropdown-item\" href=\"settings.php\"><i class=\"fas fa-cog\"></i> Settings</a></li>\n                            <li><hr class=\"dropdown-divider\"></li>\n                            <li><a class=\"dropdown-item\" href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n            \n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <!-- Statistics Cards -->\n                    <div class=\"row mb-4\">\n                        <div class=\"col-xl-3 col-md-6 mb-3\">\n                            <div class=\"stat-card\">\n                                <div class=\"stat-icon bg-primary\">\n                                    <i class=\"fas fa-file-alt\"></i>\n                                </div>\n                                <div class=\"stat-info\">\n                                    <h3><?php echo number_format($stats['total_articles']); ?></h3>\n                                    <p>Total Articles</p>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class=\"col-xl-3 col-md-6 mb-3\">\n                            <div class=\"stat-card\">\n                                <div class=\"stat-icon bg-success\">\n                                    <i class=\"fas fa-check-circle\"></i>\n                                </div>\n                                <div class=\"stat-info\">\n                                    <h3><?php echo number_format($stats['published_articles']); ?></h3>\n                                    <p>Published</p>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class=\"col-xl-3 col-md-6 mb-3\">\n                            <div class=\"stat-card\">\n                                <div class=\"stat-icon bg-warning\">\n                                    <i class=\"fas fa-edit\"></i>\n                                </div>\n                                <div class=\"stat-info\">\n                                    <h3><?php echo number_format($stats['draft_articles']); ?></h3>\n                                    <p>Drafts</p>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class=\"col-xl-3 col-md-6 mb-3\">\n                            <div class=\"stat-card\">\n                                <div class=\"stat-icon bg-info\">\n                                    <i class=\"fas fa-eye\"></i>\n                                </div>\n                                <div class=\"stat-info\">\n                                    <h3><?php echo number_format($stats['total_views']); ?></h3>\n                                    <p>Total Views</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <!-- Quick Actions -->\n                    <div class=\"row mb-4\">\n                        <div class=\"col-12\">\n                            <div class=\"card\">\n                                <div class=\"card-header\">\n                                    <h5 class=\"card-title mb-0\">Quick Actions</h5>\n                                </div>\n                                <div class=\"card-body\">\n                                    <div class=\"row\">\n                                        <div class=\"col-md-2 col-6 mb-3\">\n                                            <a href=\"article-create.php\" class=\"quick-action\">\n                                                <i class=\"fas fa-plus-circle text-primary\"></i>\n                                                <span>New Article</span>\n                                            </a>\n                                        </div>\n                                        <div class=\"col-md-2 col-6 mb-3\">\n                                            <a href=\"media.php\" class=\"quick-action\">\n                                                <i class=\"fas fa-upload text-success\"></i>\n                                                <span>Upload Media</span>\n                                            </a>\n                                        </div>\n                                        <div class=\"col-md-2 col-6 mb-3\">\n                                            <a href=\"categories.php\" class=\"quick-action\">\n                                                <i class=\"fas fa-tags text-warning\"></i>\n                                                <span>Categories</span>\n                                            </a>\n                                        </div>\n                                        <div class=\"col-md-2 col-6 mb-3\">\n                                            <a href=\"homepage-layout.php\" class=\"quick-action\">\n                                                <i class=\"fas fa-th-large text-info\"></i>\n                                                <span>Layout</span>\n                                            </a>\n                                        </div>\n                                        <div class=\"col-md-2 col-6 mb-3\">\n                                            <a href=\"ads.php\" class=\"quick-action\">\n                                                <i class=\"fas fa-ad text-danger\"></i>\n                                                <span>Ads</span>\n                                            </a>\n                                        </div>\n                                        <div class=\"col-md-2 col-6 mb-3\">\n                                            <a href=\"settings.php\" class=\"quick-action\">\n                                                <i class=\"fas fa-cog text-secondary\"></i>\n                                                <span>Settings</span>\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    \n                    <!-- Recent Articles -->\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <div class=\"card\">\n                                <div class=\"card-header d-flex justify-content-between align-items-center\">\n                                    <h5 class=\"card-title mb-0\">Recent Articles</h5>\n                                    <a href=\"articles.php\" class=\"btn btn-sm btn-outline-primary\">View All</a>\n                                </div>\n                                <div class=\"card-body\">\n                                    <?php if (empty($recent_articles)): ?>\n                                        <div class=\"text-center py-4\">\n                                            <i class=\"fas fa-file-alt fa-3x text-muted mb-3\"></i>\n                                            <h5>No articles found</h5>\n                                            <p class=\"text-muted\">Start by creating your first article</p>\n                                            <a href=\"article-create.php\" class=\"btn btn-primary\">Create Article</a>\n                                        </div>\n                                    <?php else: ?>\n                                        <div class=\"table-responsive\">\n                                            <table class=\"table table-hover\">\n                                                <thead>\n                                                    <tr>\n                                                        <th>Title</th>\n                                                        <th>Category</th>\n                                                        <th>Status</th>\n                                                        <th>Views</th>\n                                                        <th>Date</th>\n                                                        <th>Actions</th>\n                                                    </tr>\n                                                </thead>\n                                                <tbody>\n                                                    <?php foreach ($recent_articles as $art): ?>\n                                                    <tr>\n                                                        <td>\n                                                            <strong><?php echo htmlspecialchars($art['title']); ?></strong>\n                                                            <?php if ($art['is_featured']): ?>\n                                                                <span class=\"badge bg-warning ms-1\">Featured</span>\n                                                            <?php endif; ?>\n                                                            <?php if ($art['is_breaking']): ?>\n                                                                <span class=\"badge bg-danger ms-1\">Breaking</span>\n                                                            <?php endif; ?>\n                                                        </td>\n                                                        <td>\n                                                            <?php if ($art['category_name']): ?>\n                                                                <span class=\"badge bg-secondary\">\n                                                                    <?php echo htmlspecialchars($art['category_name']); ?>\n                                                                </span>\n                                                            <?php else: ?>\n                                                                <span class=\"text-muted\">Uncategorized</span>\n                                                            <?php endif; ?>\n                                                        </td>\n                                                        <td>\n                                                            <?php\n                                                            $status_class = [\n                                                                'draft' => 'bg-secondary',\n                                                                'published' => 'bg-success',\n                                                                'scheduled' => 'bg-info',\n                                                                'archived' => 'bg-dark'\n                                                            ];\n                                                            ?>\n                                                            <span class=\"badge <?php echo $status_class[$art['status']] ?? 'bg-secondary'; ?>\">\n                                                                <?php echo ucfirst($art['status']); ?>\n                                                            </span>\n                                                        </td>\n                                                        <td><?php echo number_format($art['views']); ?></td>\n                                                        <td><?php echo date('M j, Y', strtotime($art['created_at'])); ?></td>\n                                                        <td>\n                                                            <div class=\"btn-group btn-group-sm\">\n                                                                <a href=\"article-edit.php?id=<?php echo $art['id']; ?>\" \n                                                                   class=\"btn btn-outline-primary\" title=\"Edit\">\n                                                                    <i class=\"fas fa-edit\"></i>\n                                                                </a>\n                                                                <?php if ($art['status'] === 'published'): ?>\n                                                                <a href=\"../article.php?slug=<?php echo $art['slug']; ?>\" \n                                                                   class=\"btn btn-outline-success\" title=\"View\" target=\"_blank\">\n                                                                    <i class=\"fas fa-external-link-alt\"></i>\n                                                                </a>\n                                                                <?php endif; ?>\n                                                            </div>\n                                                        </td>\n                                                    </tr>\n                                                    <?php endforeach; ?>\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    <?php endif; ?>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script src=\"../public/js/admin.js\"></script>\n</body>\n</html>","size_bytes":19588},"admin/homepage-layout.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\n\n$success = '';\n$error = '';\n\n$db = new Database();\n$conn = $db->getConnection();\n\n// Handle layout updates\nif ($_POST && isset($_POST['action'])) {\n    switch ($_POST['action']) {\n        case 'update_layout':\n            $main_layout = sanitize($_POST['main_layout'] ?? '');\n            $sidebar_layout = sanitize($_POST['sidebar_layout'] ?? '');\n            $featured_categories = $_POST['featured_categories'] ?? [];\n            $articles_per_section = intval($_POST['articles_per_section'] ?? 5);\n            $show_breaking_news = isset($_POST['show_breaking_news']) ? 1 : 0;\n            $show_trending = isset($_POST['show_trending']) ? 1 : 0;\n            \n            // Save layout settings\n            $settings = [\n                'main_layout' => $main_layout,\n                'sidebar_layout' => $sidebar_layout,\n                'featured_categories' => json_encode($featured_categories),\n                'articles_per_section' => $articles_per_section,\n                'show_breaking_news' => $show_breaking_news,\n                'show_trending' => $show_trending\n            ];\n            \n            foreach ($settings as $key => $value) {\n                $stmt = $conn->prepare(\"INSERT INTO settings (setting_key, setting_value) VALUES (?, ?) ON CONFLICT (setting_key) DO UPDATE SET setting_value = ?, updated_at = CURRENT_TIMESTAMP\");\n                $stmt->execute([$key, $value, $value]);\n            }\n            \n            // Handle category display settings\n            if (isset($_POST['category_settings'])) {\n                foreach ($_POST['category_settings'] as $cat_id => $settings) {\n                    $layout_style = sanitize($settings['layout_style'] ?? 'list');\n                    $show_on_homepage = isset($settings['show_on_homepage']) ? 1 : 0;\n                    $display_order = intval($settings['display_order'] ?? 0);\n                    $articles_limit = intval($settings['articles_limit'] ?? 4);\n                    $show_excerpts = isset($settings['show_excerpts']) ? 1 : 0;\n                    $show_images = isset($settings['show_images']) ? 1 : 0;\n                    \n                    $stmt = $conn->prepare(\"INSERT INTO category_display_settings (category_id, layout_style, show_on_homepage, display_order, articles_limit, show_excerpts, show_images) VALUES (?, ?, ?, ?, ?, ?, ?) ON CONFLICT (category_id) DO UPDATE SET layout_style = ?, show_on_homepage = ?, display_order = ?, articles_limit = ?, show_excerpts = ?, show_images = ?, updated_at = CURRENT_TIMESTAMP\");\n                    $stmt->execute([$cat_id, $layout_style, $show_on_homepage, $display_order, $articles_limit, $show_excerpts, $show_images, $layout_style, $show_on_homepage, $display_order, $articles_limit, $show_excerpts, $show_images]);\n                }\n            }\n            \n            $success = 'Homepage layout updated successfully';\n            break;\n            \n        case 'reset_layout':\n            // Reset to default layout\n            $defaults = [\n                'main_layout' => 'mixed',\n                'sidebar_layout' => 'widgets',\n                'featured_categories' => json_encode([]),\n                'articles_per_section' => 5,\n                'show_breaking_news' => 1,\n                'show_trending' => 1\n            ];\n            \n            foreach ($defaults as $key => $value) {\n                $stmt = $conn->prepare(\"INSERT INTO settings (setting_key, setting_value) VALUES (?, ?) ON CONFLICT (setting_key) DO UPDATE SET setting_value = ?, updated_at = CURRENT_TIMESTAMP\");\n                $stmt->execute([$key, $value, $value]);\n            }\n            \n            $success = 'Layout reset to default settings';\n            break;\n    }\n}\n\n// Get current settings\nfunction getSetting($conn, $key, $default = '') {\n    $stmt = $conn->prepare(\"SELECT setting_value FROM settings WHERE setting_key = ?\");\n    $stmt->execute([$key]);\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    return $result ? $result['setting_value'] : $default;\n}\n\n$current_main_layout = getSetting($conn, 'main_layout', 'mixed');\n$current_sidebar_layout = getSetting($conn, 'sidebar_layout', 'widgets');\n$featured_categories = json_decode(getSetting($conn, 'featured_categories', '[]'), true);\n$articles_per_section = intval(getSetting($conn, 'articles_per_section', '5'));\n$show_breaking_news = intval(getSetting($conn, 'show_breaking_news', '1'));\n$show_trending = intval(getSetting($conn, 'show_trending', '1'));\n\n// Get all categories with display settings\n$categories_stmt = $conn->query(\"\n    SELECT c.*, \n           COALESCE(cds.layout_style, 'list') as layout_style,\n           COALESCE(cds.show_on_homepage, true) as show_on_homepage,\n           COALESCE(cds.display_order, c.display_order) as display_order,\n           COALESCE(cds.articles_limit, 4) as articles_limit,\n           COALESCE(cds.show_excerpts, true) as show_excerpts,\n           COALESCE(cds.show_images, true) as show_images\n    FROM categories c\n    LEFT JOIN category_display_settings cds ON c.id = cds.category_id\n    WHERE c.status = 'active' \n    ORDER BY COALESCE(cds.display_order, c.display_order)\n\");\n$categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Homepage Layout Manager - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n    <style>\n        .layout-preview {\n            border: 1px solid #dee2e6;\n            border-radius: 8px;\n            padding: 20px;\n            background: #f8f9fa;\n            margin-top: 20px;\n        }\n        .preview-section {\n            background: white;\n            border: 2px dashed #dee2e6;\n            padding: 15px;\n            margin-bottom: 10px;\n            border-radius: 6px;\n            text-align: center;\n            color: #6c757d;\n        }\n        .layout-option {\n            border: 2px solid #dee2e6;\n            border-radius: 8px;\n            padding: 15px;\n            cursor: pointer;\n            transition: all 0.3s;\n            margin-bottom: 15px;\n        }\n        .layout-option:hover {\n            border-color: #007bff;\n        }\n        .layout-option.active {\n            border-color: #007bff;\n            background: #e3f2fd;\n        }\n        .layout-grid {\n            display: grid;\n            gap: 10px;\n            height: 100px;\n            border: 1px solid #ccc;\n            padding: 5px;\n            border-radius: 4px;\n            margin-bottom: 10px;\n        }\n        .layout-mixed { grid-template-columns: 2fr 1fr; }\n        .layout-featured { grid-template-columns: 1fr; }\n        .layout-category { grid-template-columns: 1fr 1fr; }\n        .layout-latest { grid-template-columns: 1fr; }\n        \n        .grid-item {\n            background: #007bff;\n            border-radius: 3px;\n            opacity: 0.7;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n            </div>\n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\"><i class=\"fas fa-tachometer-alt\"></i> Dashboard</a>\n                </li>\n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\"><i class=\"fas fa-file-alt\"></i> Articles</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\"><i class=\"fas fa-tags\"></i> Categories</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"media.php\"><i class=\"fas fa-images\"></i> Media Library</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"ads.php\"><i class=\"fas fa-bullhorn\"></i> Advertisements</a>\n                </li>\n                <li class=\"menu-header\">Site Settings</li>\n                <li class=\"menu-item active\">\n                    <a href=\"homepage-layout.php\"><i class=\"fas fa-layout\"></i> Homepage Layout</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"seo-settings.php\"><i class=\"fas fa-search\"></i> SEO Settings</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"users.php\"><i class=\"fas fa-users\"></i> Users</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">Homepage Layout Manager</h5>\n                </div>\n                <div class=\"topbar-right\">\n                    <form method=\"POST\" style=\"display: inline;\">\n                        <input type=\"hidden\" name=\"action\" value=\"reset_layout\">\n                        <button type=\"submit\" class=\"btn btn-outline-secondary btn-sm\" onclick=\"return confirm('Reset layout to defaults?')\">\n                            <i class=\"fas fa-undo\"></i> Reset to Default\n                        </button>\n                    </form>\n                </div>\n            </div>\n\n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n\n                    <form method=\"POST\">\n                        <input type=\"hidden\" name=\"action\" value=\"update_layout\">\n                        \n                        <div class=\"row\">\n                            <div class=\"col-lg-8\">\n                                <!-- Main Content Layout -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Main Content Layout</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"row\">\n                                            <div class=\"col-md-6\">\n                                                <div class=\"layout-option <?php echo $current_main_layout === 'mixed' ? 'active' : ''; ?>\" \n                                                     onclick=\"selectLayout('main', 'mixed')\">\n                                                    <div class=\"layout-grid layout-mixed\">\n                                                        <div class=\"grid-item\"></div>\n                                                        <div class=\"grid-item\"></div>\n                                                    </div>\n                                                    <label>\n                                                        <input type=\"radio\" name=\"main_layout\" value=\"mixed\" \n                                                               <?php echo $current_main_layout === 'mixed' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                        <strong>Mixed Layout</strong><br>\n                                                        <small class=\"text-muted\">Featured articles + Latest articles in two columns</small>\n                                                    </label>\n                                                </div>\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <div class=\"layout-option <?php echo $current_main_layout === 'featured' ? 'active' : ''; ?>\" \n                                                     onclick=\"selectLayout('main', 'featured')\">\n                                                    <div class=\"layout-grid layout-featured\">\n                                                        <div class=\"grid-item\"></div>\n                                                    </div>\n                                                    <label>\n                                                        <input type=\"radio\" name=\"main_layout\" value=\"featured\" \n                                                               <?php echo $current_main_layout === 'featured' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                        <strong>Featured Only</strong><br>\n                                                        <small class=\"text-muted\">Large featured articles only</small>\n                                                    </label>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class=\"row\">\n                                            <div class=\"col-md-6\">\n                                                <div class=\"layout-option <?php echo $current_main_layout === 'category' ? 'active' : ''; ?>\" \n                                                     onclick=\"selectLayout('main', 'category')\">\n                                                    <div class=\"layout-grid layout-category\">\n                                                        <div class=\"grid-item\"></div>\n                                                        <div class=\"grid-item\"></div>\n                                                    </div>\n                                                    <label>\n                                                        <input type=\"radio\" name=\"main_layout\" value=\"category\" \n                                                               <?php echo $current_main_layout === 'category' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                        <strong>Category Based</strong><br>\n                                                        <small class=\"text-muted\">Articles grouped by categories</small>\n                                                    </label>\n                                                </div>\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <div class=\"layout-option <?php echo $current_main_layout === 'latest' ? 'active' : ''; ?>\" \n                                                     onclick=\"selectLayout('main', 'latest')\">\n                                                    <div class=\"layout-grid layout-latest\">\n                                                        <div class=\"grid-item\"></div>\n                                                    </div>\n                                                    <label>\n                                                        <input type=\"radio\" name=\"main_layout\" value=\"latest\" \n                                                               <?php echo $current_main_layout === 'latest' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                        <strong>Latest Articles</strong><br>\n                                                        <small class=\"text-muted\">Latest articles in chronological order</small>\n                                                    </label>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- Featured Categories -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Featured Categories</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <p class=\"text-muted mb-3\">Select categories to highlight on the homepage</p>\n                                        <div class=\"row\">\n                                            <?php foreach ($categories as $category): ?>\n                                            <div class=\"col-md-4 mb-2\">\n                                                <div class=\"form-check\">\n                                                    <input class=\"form-check-input\" type=\"checkbox\" name=\"featured_categories[]\" \n                                                           value=\"<?php echo $category['id']; ?>\" \n                                                           id=\"cat_<?php echo $category['id']; ?>\"\n                                                           <?php echo in_array($category['id'], $featured_categories) ? 'checked' : ''; ?>>\n                                                    <label class=\"form-check-label\" for=\"cat_<?php echo $category['id']; ?>\">\n                                                        <span class=\"badge bg-primary me-2\">&nbsp;</span>\n                                                        <?php echo htmlspecialchars($category['name']); ?>\n                                                    </label>\n                                                </div>\n                                            </div>\n                                            <?php endforeach; ?>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- Individual Category Display Settings -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Category Display Settings</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <p class=\"text-muted mb-4\">Configure how each category appears on the homepage</p>\n                                        <?php foreach ($categories as $category): ?>\n                                        <div class=\"border rounded p-3 mb-3\" style=\"background: #f8f9fa;\">\n                                            <h6 class=\"mb-3\">\n                                                <span class=\"badge bg-primary me-2\">&nbsp;</span>\n                                                <?php echo htmlspecialchars($category['name']); ?>\n                                            </h6>\n                                            \n                                            <div class=\"row\">\n                                                <div class=\"col-md-6\">\n                                                    <div class=\"mb-3\">\n                                                        <label class=\"form-label\">Layout Style</label>\n                                                        <select class=\"form-select form-select-sm\" name=\"category_settings[<?php echo $category['id']; ?>][layout_style]\">\n                                                            <option value=\"list\" <?php echo $category['layout_style'] === 'list' ? 'selected' : ''; ?>>List View</option>\n                                                            <option value=\"grid\" <?php echo $category['layout_style'] === 'grid' ? 'selected' : ''; ?>>Grid View</option>\n                                                            <option value=\"banner\" <?php echo $category['layout_style'] === 'banner' ? 'selected' : ''; ?>>Banner Style</option>\n                                                            <option value=\"card\" <?php echo $category['layout_style'] === 'card' ? 'selected' : ''; ?>>Card Layout</option>\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-md-6\">\n                                                    <div class=\"mb-3\">\n                                                        <label class=\"form-label\">Display Order</label>\n                                                        <input type=\"number\" class=\"form-control form-control-sm\" \n                                                               name=\"category_settings[<?php echo $category['id']; ?>][display_order]\" \n                                                               value=\"<?php echo $category['display_order']; ?>\" min=\"0\" max=\"100\">\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            \n                                            <div class=\"row\">\n                                                <div class=\"col-md-6\">\n                                                    <div class=\"mb-3\">\n                                                        <label class=\"form-label\">Articles Limit</label>\n                                                        <select class=\"form-select form-select-sm\" name=\"category_settings[<?php echo $category['id']; ?>][articles_limit]\">\n                                                            <option value=\"2\" <?php echo $category['articles_limit'] == 2 ? 'selected' : ''; ?>>2 Articles</option>\n                                                            <option value=\"4\" <?php echo $category['articles_limit'] == 4 ? 'selected' : ''; ?>>4 Articles</option>\n                                                            <option value=\"6\" <?php echo $category['articles_limit'] == 6 ? 'selected' : ''; ?>>6 Articles</option>\n                                                            <option value=\"8\" <?php echo $category['articles_limit'] == 8 ? 'selected' : ''; ?>>8 Articles</option>\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-md-6\">\n                                                    <div class=\"form-check-group\">\n                                                        <div class=\"form-check\">\n                                                            <input class=\"form-check-input\" type=\"checkbox\" \n                                                                   name=\"category_settings[<?php echo $category['id']; ?>][show_on_homepage]\" \n                                                                   id=\"show_<?php echo $category['id']; ?>\"\n                                                                   <?php echo $category['show_on_homepage'] ? 'checked' : ''; ?>>\n                                                            <label class=\"form-check-label\" for=\"show_<?php echo $category['id']; ?>\">\n                                                                Show on Homepage\n                                                            </label>\n                                                        </div>\n                                                        <div class=\"form-check\">\n                                                            <input class=\"form-check-input\" type=\"checkbox\" \n                                                                   name=\"category_settings[<?php echo $category['id']; ?>][show_excerpts]\" \n                                                                   id=\"excerpts_<?php echo $category['id']; ?>\"\n                                                                   <?php echo $category['show_excerpts'] ? 'checked' : ''; ?>>\n                                                            <label class=\"form-check-label\" for=\"excerpts_<?php echo $category['id']; ?>\">\n                                                                Show Excerpts\n                                                            </label>\n                                                        </div>\n                                                        <div class=\"form-check\">\n                                                            <input class=\"form-check-input\" type=\"checkbox\" \n                                                                   name=\"category_settings[<?php echo $category['id']; ?>][show_images]\" \n                                                                   id=\"images_<?php echo $category['id']; ?>\"\n                                                                   <?php echo $category['show_images'] ? 'checked' : ''; ?>>\n                                                            <label class=\"form-check-label\" for=\"images_<?php echo $category['id']; ?>\">\n                                                                Show Images\n                                                            </label>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <?php endforeach; ?>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"col-lg-4\">\n                                <!-- Sidebar Layout -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Sidebar Layout</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"layout-option <?php echo $current_sidebar_layout === 'widgets' ? 'active' : ''; ?>\" \n                                             onclick=\"selectLayout('sidebar', 'widgets')\">\n                                            <label>\n                                                <input type=\"radio\" name=\"sidebar_layout\" value=\"widgets\" \n                                                       <?php echo $current_sidebar_layout === 'widgets' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                <strong>Widgets</strong><br>\n                                                <small class=\"text-muted\">Popular articles, categories, ads</small>\n                                            </label>\n                                        </div>\n                                        \n                                        <div class=\"layout-option <?php echo $current_sidebar_layout === 'trending' ? 'active' : ''; ?>\" \n                                             onclick=\"selectLayout('sidebar', 'trending')\">\n                                            <label>\n                                                <input type=\"radio\" name=\"sidebar_layout\" value=\"trending\" \n                                                       <?php echo $current_sidebar_layout === 'trending' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                <strong>Trending Only</strong><br>\n                                                <small class=\"text-muted\">Focus on trending/popular content</small>\n                                            </label>\n                                        </div>\n                                        \n                                        <div class=\"layout-option <?php echo $current_sidebar_layout === 'minimal' ? 'active' : ''; ?>\" \n                                             onclick=\"selectLayout('sidebar', 'minimal')\">\n                                            <label>\n                                                <input type=\"radio\" name=\"sidebar_layout\" value=\"minimal\" \n                                                       <?php echo $current_sidebar_layout === 'minimal' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                <strong>Minimal</strong><br>\n                                                <small class=\"text-muted\">Clean sidebar with essential widgets only</small>\n                                            </label>\n                                        </div>\n                                        \n                                        <div class=\"layout-option <?php echo $current_sidebar_layout === 'social' ? 'active' : ''; ?>\" \n                                             onclick=\"selectLayout('sidebar', 'social')\">\n                                            <label>\n                                                <input type=\"radio\" name=\"sidebar_layout\" value=\"social\" \n                                                       <?php echo $current_sidebar_layout === 'social' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                <strong>Social Focus</strong><br>\n                                                <small class=\"text-muted\">Social media feeds and sharing</small>\n                                            </label>\n                                        </div>\n                                        \n                                        <div class=\"layout-option <?php echo $current_sidebar_layout === 'newsletter' ? 'active' : ''; ?>\" \n                                             onclick=\"selectLayout('sidebar', 'newsletter')\">\n                                            <label>\n                                                <input type=\"radio\" name=\"sidebar_layout\" value=\"newsletter\" \n                                                       <?php echo $current_sidebar_layout === 'newsletter' ? 'checked' : ''; ?> style=\"display: none;\">\n                                                <strong>Newsletter Focus</strong><br>\n                                                <small class=\"text-muted\">Newsletter signup and popular articles</small>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- General Settings -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Display Settings</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"articles_per_section\" class=\"form-label\">Articles per Section</label>\n                                            <select class=\"form-select\" name=\"articles_per_section\" id=\"articles_per_section\">\n                                                <option value=\"3\" <?php echo $articles_per_section == 3 ? 'selected' : ''; ?>>3 Articles</option>\n                                                <option value=\"5\" <?php echo $articles_per_section == 5 ? 'selected' : ''; ?>>5 Articles</option>\n                                                <option value=\"8\" <?php echo $articles_per_section == 8 ? 'selected' : ''; ?>>8 Articles</option>\n                                                <option value=\"10\" <?php echo $articles_per_section == 10 ? 'selected' : ''; ?>>10 Articles</option>\n                                            </select>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"show_breaking_news\" \n                                                       id=\"show_breaking_news\" <?php echo $show_breaking_news ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"show_breaking_news\">\n                                                    Show Breaking News Banner\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"show_trending\" \n                                                       id=\"show_trending\" <?php echo $show_trending ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"show_trending\">\n                                                    Show Trending Section\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"d-grid\">\n                                            <button type=\"submit\" class=\"btn btn-primary\">\n                                                <i class=\"fas fa-save\"></i> Save Layout Settings\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n\n                        <!-- Layout Preview -->\n                        <div class=\"layout-preview\">\n                            <h6><i class=\"fas fa-eye\"></i> Layout Preview</h6>\n                            <div class=\"row\">\n                                <div class=\"col-8\">\n                                    <div class=\"preview-section\" id=\"mainPreview\">\n                                        Main Content Area - <?php echo ucfirst($current_main_layout); ?> Layout\n                                    </div>\n                                </div>\n                                <div class=\"col-4\">\n                                    <div class=\"preview-section\">\n                                        Sidebar - <?php echo ucfirst($current_sidebar_layout); ?> Layout\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script>\n        function selectLayout(type, layout) {\n            // Update radio buttons\n            const radios = document.querySelectorAll(`input[name=\"${type}_layout\"]`);\n            radios.forEach(radio => {\n                radio.checked = radio.value === layout;\n            });\n            \n            // Update visual selection\n            const options = document.querySelectorAll('.layout-option');\n            options.forEach(option => {\n                option.classList.remove('active');\n            });\n            event.currentTarget.classList.add('active');\n            \n            // Update preview\n            updatePreview();\n        }\n        \n        function updatePreview() {\n            const mainLayout = document.querySelector('input[name=\"main_layout\"]:checked')?.value || 'mixed';\n            const sidebarLayout = document.querySelector('input[name=\"sidebar_layout\"]:checked')?.value || 'widgets';\n            \n            const mainPreview = document.getElementById('mainPreview');\n            mainPreview.textContent = `Main Content Area - ${mainLayout.charAt(0).toUpperCase() + mainLayout.slice(1)} Layout`;\n        }\n        \n        // Initialize preview on page load\n        document.addEventListener('DOMContentLoaded', updatePreview);\n    </script>\n</body>\n</html>","size_bytes":36868},"admin/login.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../classes/User.php';\n\n$user = new User();\n\n// Redirect if already logged in\nif ($user->isLoggedIn()) {\n    redirect('dashboard.php');\n}\n\n$error = '';\n\nif ($_POST) {\n    $username = sanitize($_POST['username'] ?? '');\n    $password = $_POST['password'] ?? '';\n    \n    if (empty($username) || empty($password)) {\n        $error = 'Please fill in all fields';\n    } else {\n        $login_result = $user->login($username, $password);\n        if ($login_result) {\n            $_SESSION['user_id'] = $login_result['id'];\n            $_SESSION['user_role'] = $login_result['role'];\n            $_SESSION['user_name'] = $login_result['first_name'] . ' ' . $login_result['last_name'];\n            $_SESSION['username'] = $login_result['username'];\n            redirect('dashboard.php');\n        } else {\n            $error = 'Invalid username/email or password';\n        }\n    }\n}\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Admin Login - <?php echo SITE_NAME; ?></title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <style>\n        body {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n        }\n        .login-container {\n            min-height: 100vh;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        .login-card {\n            background: rgba(255, 255, 255, 0.95);\n            backdrop-filter: blur(10px);\n            border: 1px solid rgba(255, 255, 255, 0.2);\n            border-radius: 16px;\n            padding: 2.5rem;\n            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);\n            width: 100%;\n            max-width: 400px;\n        }\n        .login-header {\n            text-align: center;\n            margin-bottom: 2rem;\n        }\n        .login-header h2 {\n            color: #2d3748;\n            font-weight: 700;\n            margin-bottom: 0.5rem;\n        }\n        .login-header p {\n            color: #718096;\n            font-size: 0.9rem;\n        }\n        .form-floating > label {\n            color: #718096;\n        }\n        .form-control {\n            border: 2px solid #e2e8f0;\n            border-radius: 12px;\n            padding: 0.75rem 1rem;\n            font-size: 0.95rem;\n            transition: all 0.3s ease;\n        }\n        .form-control:focus {\n            border-color: #667eea;\n            box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);\n        }\n        .btn-primary {\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            border: none;\n            border-radius: 12px;\n            padding: 0.75rem 1.5rem;\n            font-weight: 600;\n            letter-spacing: 0.5px;\n            transition: all 0.3s ease;\n        }\n        .btn-primary:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);\n        }\n        .alert {\n            border-radius: 12px;\n            border: none;\n            font-size: 0.9rem;\n        }\n        .alert-danger {\n            background-color: #fed7d7;\n            color: #c53030;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"login-container\">\n        <div class=\"login-card\">\n            <div class=\"login-header\">\n                <h2><i class=\"fas fa-newspaper text-primary\"></i> News Admin</h2>\n                <p>Sign in to your account to continue</p>\n            </div>\n            \n            <?php if ($error): ?>\n                <div class=\"alert alert-danger\" role=\"alert\">\n                    <i class=\"fas fa-exclamation-triangle\"></i> <?php echo $error; ?>\n                </div>\n            <?php endif; ?>\n            \n            <form method=\"POST\">\n                <div class=\"form-floating mb-3\">\n                    <input type=\"text\" class=\"form-control\" id=\"username\" name=\"username\" \n                           placeholder=\"Username or Email\" required \n                           value=\"<?php echo isset($_POST['username']) ? htmlspecialchars($_POST['username']) : ''; ?>\">\n                    <label for=\"username\"><i class=\"fas fa-user\"></i> Username or Email</label>\n                </div>\n                \n                <div class=\"form-floating mb-4\">\n                    <input type=\"password\" class=\"form-control\" id=\"password\" name=\"password\" \n                           placeholder=\"Password\" required>\n                    <label for=\"password\"><i class=\"fas fa-lock\"></i> Password</label>\n                </div>\n                \n                <button type=\"submit\" class=\"btn btn-primary w-100 mb-3\">\n                    <i class=\"fas fa-sign-in-alt\"></i> Sign In\n                </button>\n                \n                <div class=\"text-center\">\n                    <small class=\"text-muted\">\n                        Default: admin / admin123\n                    </small>\n                </div>\n            </form>\n        </div>\n    </div>\n    \n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":5432},"admin/logout.php":{"content":"<?php\nrequire_once '../config/config.php';\nrequire_once '../classes/User.php';\n\n$user = new User();\n$user->logout();\n?>","size_bytes":119},"admin/media.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\n\n$success = '';\n$error = '';\n\n$db = new Database();\n$conn = $db->getConnection();\n\n// Handle file uploads\nif ($_POST && isset($_FILES['media_file'])) {\n    $uploadDir = '../uploads/';\n    \n    // Create upload directory if it doesn't exist\n    if (!file_exists($uploadDir)) {\n        mkdir($uploadDir, 0755, true);\n    }\n    \n    $file = $_FILES['media_file'];\n    $fileName = time() . '_' . basename($file['name']);\n    $targetPath = $uploadDir . $fileName;\n    $fileType = strtolower(pathinfo($targetPath, PATHINFO_EXTENSION));\n    \n    // Validate file type\n    $allowedTypes = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'pdf', 'doc', 'docx', 'zip'];\n    \n    if (in_array($fileType, $allowedTypes)) {\n        if (move_uploaded_file($file['tmp_name'], $targetPath)) {\n            // Save to database\n            $stmt = $conn->prepare(\"INSERT INTO media (title, file_name, file_path, file_type, file_size, alt_text, uploaded_by) VALUES (?, ?, ?, ?, ?, ?, ?)\");\n            $title = sanitize($_POST['title'] ?? $file['name']);\n            $altText = sanitize($_POST['alt_text'] ?? '');\n            \n            if ($stmt->execute([$title, $fileName, 'uploads/' . $fileName, $fileType, $file['size'], $altText, $_SESSION['user_id']])) {\n                $success = 'Media uploaded successfully';\n            } else {\n                $error = 'Failed to save media to database';\n            }\n        } else {\n            $error = 'Failed to upload file';\n        }\n    } else {\n        $error = 'Invalid file type';\n    }\n}\n\n// Handle media deletion\nif (isset($_POST['delete_media'])) {\n    $mediaId = intval($_POST['media_id']);\n    \n    // Get file path before deletion\n    $stmt = $conn->prepare(\"SELECT file_path FROM media WHERE id = ?\");\n    $stmt->execute([$mediaId]);\n    $media = $stmt->fetch(PDO::FETCH_ASSOC);\n    \n    if ($media) {\n        // Delete file from filesystem\n        $filePath = '../' . $media['file_path'];\n        if (file_exists($filePath)) {\n            unlink($filePath);\n        }\n        \n        // Delete from database\n        $deleteStmt = $conn->prepare(\"DELETE FROM media WHERE id = ?\");\n        if ($deleteStmt->execute([$mediaId])) {\n            $success = 'Media deleted successfully';\n        } else {\n            $error = 'Failed to delete media';\n        }\n    }\n}\n\n// Get all media files\n$page = max(1, intval($_GET['page'] ?? 1));\n$limit = 20;\n$offset = ($page - 1) * $limit;\n\n$media_stmt = $conn->prepare(\"SELECT m.*, u.first_name, u.last_name FROM media m LEFT JOIN users u ON m.uploaded_by = u.id ORDER BY m.created_at DESC LIMIT ? OFFSET ?\");\n$media_stmt->execute([$limit, $offset]);\n$media_files = $media_stmt->fetchAll(PDO::FETCH_ASSOC);\n\n// Get total count\n$count_stmt = $conn->query(\"SELECT COUNT(*) FROM media\");\n$total_media = $count_stmt->fetchColumn();\n$total_pages = ceil($total_media / $limit);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Media Library - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n    <style>\n        .media-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n            gap: 20px;\n        }\n        .media-item {\n            border: 1px solid #dee2e6;\n            border-radius: 8px;\n            overflow: hidden;\n            transition: transform 0.2s;\n        }\n        .media-item:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(0,0,0,0.1);\n        }\n        .media-preview {\n            height: 150px;\n            background: #f8f9fa;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            overflow: hidden;\n        }\n        .media-preview img {\n            max-width: 100%;\n            max-height: 100%;\n            object-fit: cover;\n        }\n        .media-info {\n            padding: 15px;\n        }\n        .upload-area {\n            border: 2px dashed #dee2e6;\n            border-radius: 8px;\n            padding: 40px 20px;\n            text-align: center;\n            margin-bottom: 30px;\n            cursor: pointer;\n            transition: all 0.3s;\n        }\n        .upload-area:hover {\n            border-color: #007bff;\n            background: #f8f9fa;\n        }\n        .upload-area.dragover {\n            border-color: #007bff;\n            background: #e3f2fd;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n            </div>\n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\"><i class=\"fas fa-tachometer-alt\"></i> Dashboard</a>\n                </li>\n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\"><i class=\"fas fa-file-alt\"></i> Articles</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"article-create.php\"><i class=\"fas fa-plus-circle\"></i> New Article</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\"><i class=\"fas fa-tags\"></i> Categories</a>\n                </li>\n                <li class=\"menu-item active\">\n                    <a href=\"media.php\"><i class=\"fas fa-images\"></i> Media Library</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">Media Library</h5>\n                </div>\n                <div class=\"topbar-right\">\n                    <button class=\"btn btn-primary btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#uploadModal\">\n                        <i class=\"fas fa-upload\"></i> Upload Media\n                    </button>\n                </div>\n            </div>\n\n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <?php if ($error): ?>\n                        <div class=\"alert alert-danger alert-dismissible fade show\">\n                            <i class=\"fas fa-exclamation-triangle\"></i> <?php echo $error; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n\n                    <!-- Media Grid -->\n                    <div class=\"card\">\n                        <div class=\"card-body\">\n                            <?php if (empty($media_files)): ?>\n                                <div class=\"text-center py-5\">\n                                    <i class=\"fas fa-images fa-3x text-muted mb-3\"></i>\n                                    <h5>No media files found</h5>\n                                    <p class=\"text-muted\">Upload your first media file to get started</p>\n                                    <button class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#uploadModal\">\n                                        <i class=\"fas fa-upload\"></i> Upload Media\n                                    </button>\n                                </div>\n                            <?php else: ?>\n                                <div class=\"media-grid\">\n                                    <?php foreach ($media_files as $media): ?>\n                                    <div class=\"media-item\">\n                                        <div class=\"media-preview\">\n                                            <?php if (in_array($media['file_type'], ['jpg', 'jpeg', 'png', 'gif', 'webp'])): ?>\n                                                <img src=\"../<?php echo htmlspecialchars($media['file_path']); ?>\" \n                                                     alt=\"<?php echo htmlspecialchars($media['alt_text']); ?>\">\n                                            <?php else: ?>\n                                                <i class=\"fas fa-file fa-3x text-muted\"></i>\n                                            <?php endif; ?>\n                                        </div>\n                                        <div class=\"media-info\">\n                                            <h6 class=\"mb-1\"><?php echo htmlspecialchars($media['title']); ?></h6>\n                                            <small class=\"text-muted d-block mb-2\">\n                                                <?php echo strtoupper($media['file_type']); ?> â€¢ \n                                                <?php echo formatFileSize($media['file_size']); ?>\n                                            </small>\n                                            <small class=\"text-muted d-block mb-2\">\n                                                By <?php echo htmlspecialchars($media['first_name'] . ' ' . $media['last_name']); ?>\n                                            </small>\n                                            <div class=\"btn-group btn-group-sm w-100\">\n                                                <button type=\"button\" class=\"btn btn-outline-primary\" \n                                                        onclick=\"copyToClipboard('../<?php echo htmlspecialchars($media['file_path']); ?>')\"\n                                                        title=\"Copy URL\">\n                                                    <i class=\"fas fa-copy\"></i>\n                                                </button>\n                                                <button type=\"button\" class=\"btn btn-outline-info\"\n                                                        onclick=\"viewMedia('<?php echo htmlspecialchars($media['file_path']); ?>', '<?php echo htmlspecialchars($media['title']); ?>')\"\n                                                        title=\"View\">\n                                                    <i class=\"fas fa-eye\"></i>\n                                                </button>\n                                                <form method=\"POST\" style=\"display: inline;\" \n                                                      onsubmit=\"return confirm('Are you sure you want to delete this media?')\">\n                                                    <input type=\"hidden\" name=\"media_id\" value=\"<?php echo $media['id']; ?>\">\n                                                    <button type=\"submit\" name=\"delete_media\" class=\"btn btn-outline-danger\" title=\"Delete\">\n                                                        <i class=\"fas fa-trash\"></i>\n                                                    </button>\n                                                </form>\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <?php endforeach; ?>\n                                </div>\n\n                                <!-- Pagination -->\n                                <?php if ($total_pages > 1): ?>\n                                <nav aria-label=\"Media pagination\" class=\"mt-4\">\n                                    <ul class=\"pagination justify-content-center\">\n                                        <?php if ($page > 1): ?>\n                                        <li class=\"page-item\">\n                                            <a class=\"page-link\" href=\"?page=<?php echo ($page - 1); ?>\">Previous</a>\n                                        </li>\n                                        <?php endif; ?>\n\n                                        <?php for ($i = max(1, $page - 2); $i <= min($total_pages, $page + 2); $i++): ?>\n                                        <li class=\"page-item <?php echo $i === $page ? 'active' : ''; ?>\">\n                                            <a class=\"page-link\" href=\"?page=<?php echo $i; ?>\"><?php echo $i; ?></a>\n                                        </li>\n                                        <?php endfor; ?>\n\n                                        <?php if ($page < $total_pages): ?>\n                                        <li class=\"page-item\">\n                                            <a class=\"page-link\" href=\"?page=<?php echo ($page + 1); ?>\">Next</a>\n                                        </li>\n                                        <?php endif; ?>\n                                    </ul>\n                                </nav>\n                                <?php endif; ?>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Upload Modal -->\n    <div class=\"modal fade\" id=\"uploadModal\" tabindex=\"-1\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">Upload Media</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                </div>\n                <form method=\"POST\" enctype=\"multipart/form-data\">\n                    <div class=\"modal-body\">\n                        <div class=\"upload-area\" id=\"uploadArea\">\n                            <i class=\"fas fa-cloud-upload-alt fa-3x text-muted mb-3\"></i>\n                            <h5>Drop files here or click to browse</h5>\n                            <p class=\"text-muted\">Supported: JPG, PNG, GIF, WebP, PDF, DOC, DOCX, ZIP</p>\n                            <input type=\"file\" name=\"media_file\" id=\"fileInput\" style=\"display: none;\" required>\n                        </div>\n                        \n                        <div class=\"mb-3\">\n                            <label for=\"title\" class=\"form-label\">Title</label>\n                            <input type=\"text\" class=\"form-control\" name=\"title\" id=\"title\">\n                        </div>\n                        \n                        <div class=\"mb-3\">\n                            <label for=\"alt_text\" class=\"form-label\">Alt Text (for images)</label>\n                            <input type=\"text\" class=\"form-control\" name=\"alt_text\" id=\"alt_text\">\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"submit\" class=\"btn btn-primary\">\n                            <i class=\"fas fa-upload\"></i> Upload\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script>\n        // Upload area functionality\n        const uploadArea = document.getElementById('uploadArea');\n        const fileInput = document.getElementById('fileInput');\n        \n        uploadArea.addEventListener('click', () => fileInput.click());\n        \n        uploadArea.addEventListener('dragover', (e) => {\n            e.preventDefault();\n            uploadArea.classList.add('dragover');\n        });\n        \n        uploadArea.addEventListener('dragleave', () => {\n            uploadArea.classList.remove('dragover');\n        });\n        \n        uploadArea.addEventListener('drop', (e) => {\n            e.preventDefault();\n            uploadArea.classList.remove('dragover');\n            fileInput.files = e.dataTransfer.files;\n            updateFileDisplay();\n        });\n        \n        fileInput.addEventListener('change', updateFileDisplay);\n        \n        function updateFileDisplay() {\n            if (fileInput.files.length > 0) {\n                const fileName = fileInput.files[0].name;\n                uploadArea.innerHTML = `\n                    <i class=\"fas fa-file fa-2x text-success mb-2\"></i>\n                    <h6>${fileName}</h6>\n                    <p class=\"text-muted\">Ready to upload</p>\n                `;\n                \n                // Auto-fill title if empty\n                if (!document.getElementById('title').value) {\n                    document.getElementById('title').value = fileName.replace(/\\.[^/.]+$/, \"\");\n                }\n            }\n        }\n        \n        function copyToClipboard(text) {\n            navigator.clipboard.writeText(text).then(() => {\n                // Show a toast or alert\n                alert('URL copied to clipboard!');\n            });\n        }\n        \n        function viewMedia(filePath, title) {\n            window.open('../' + filePath, '_blank');\n        }\n    </script>\n</body>\n</html>","size_bytes":17664},"admin/seo-settings.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\n\n$success = '';\n$error = '';\n\n$db = new Database();\n$conn = $db->getConnection();\n\n// Handle form submissions\nif ($_POST && isset($_POST['action'])) {\n    switch ($_POST['action']) {\n        case 'update_seo':\n            $seo_settings = [\n                'site_title' => sanitize($_POST['site_title'] ?? ''),\n                'site_description' => sanitize($_POST['site_description'] ?? ''),\n                'site_keywords' => sanitize($_POST['site_keywords'] ?? ''),\n                'google_analytics_id' => sanitize($_POST['google_analytics_id'] ?? ''),\n                'google_search_console' => sanitize($_POST['google_search_console'] ?? ''),\n                'facebook_app_id' => sanitize($_POST['facebook_app_id'] ?? ''),\n                'twitter_site' => sanitize($_POST['twitter_site'] ?? ''),\n                'enable_sitemap' => isset($_POST['enable_sitemap']) ? '1' : '0',\n                'enable_robots' => isset($_POST['enable_robots']) ? '1' : '0',\n                'default_og_image' => sanitize($_POST['default_og_image'] ?? ''),\n                'canonical_url' => sanitize($_POST['canonical_url'] ?? ''),\n                'enable_schema_markup' => isset($_POST['enable_schema_markup']) ? '1' : '0'\n            ];\n            \n            foreach ($seo_settings as $key => $value) {\n                $stmt = $conn->prepare(\"INSERT INTO settings (setting_key, setting_value) VALUES (?, ?) ON CONFLICT (setting_key) DO UPDATE SET setting_value = ?, updated_at = CURRENT_TIMESTAMP\");\n                $stmt->execute([$key, $value, $value]);\n            }\n            \n            $success = 'SEO settings updated successfully';\n            break;\n            \n        case 'generate_sitemap':\n            // Generate XML sitemap\n            generateSitemap($conn);\n            $success = 'Sitemap generated successfully';\n            break;\n            \n        case 'generate_robots':\n            // Generate robots.txt\n            generateRobotsTxt($conn);\n            $success = 'Robots.txt generated successfully';\n            break;\n    }\n}\n\n// Helper functions\nfunction getSetting($conn, $key, $default = '') {\n    $stmt = $conn->prepare(\"SELECT setting_value FROM settings WHERE setting_key = ?\");\n    $stmt->execute([$key]);\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    return $result ? $result['setting_value'] : $default;\n}\n\nfunction generateSitemap($conn) {\n    $xml = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' . \"\\n\";\n    $xml .= '<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">' . \"\\n\";\n    \n    // Add homepage\n    $xml .= '<url><loc>' . 'http://' . $_SERVER['HTTP_HOST'] . '</loc><changefreq>daily</changefreq><priority>1.0</priority></url>' . \"\\n\";\n    \n    // Add articles\n    $articles_stmt = $conn->query(\"SELECT slug, updated_at FROM articles WHERE status = 'published' ORDER BY updated_at DESC\");\n    $articles = $articles_stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    foreach ($articles as $article) {\n        $xml .= '<url>';\n        $xml .= '<loc>http://' . $_SERVER['HTTP_HOST'] . '/article.php?slug=' . htmlspecialchars($article['slug']) . '</loc>';\n        $xml .= '<lastmod>' . date('c', strtotime($article['updated_at'])) . '</lastmod>';\n        $xml .= '<changefreq>monthly</changefreq>';\n        $xml .= '<priority>0.8</priority>';\n        $xml .= '</url>' . \"\\n\";\n    }\n    \n    // Add categories\n    $categories_stmt = $conn->query(\"SELECT slug FROM categories WHERE status = 'active'\");\n    $categories = $categories_stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    foreach ($categories as $category) {\n        $xml .= '<url>';\n        $xml .= '<loc>http://' . $_SERVER['HTTP_HOST'] . '/category.php?slug=' . htmlspecialchars($category['slug']) . '</loc>';\n        $xml .= '<changefreq>weekly</changefreq>';\n        $xml .= '<priority>0.6</priority>';\n        $xml .= '</url>' . \"\\n\";\n    }\n    \n    $xml .= '</urlset>';\n    \n    file_put_contents('../sitemap.xml', $xml);\n}\n\nfunction generateRobotsTxt($conn) {\n    $robots = \"User-agent: *\\n\";\n    $robots .= \"Allow: /\\n\";\n    $robots .= \"Disallow: /admin/\\n\";\n    $robots .= \"Disallow: /includes/\\n\";\n    $robots .= \"Disallow: /config/\\n\";\n    $robots .= \"\\n\";\n    $robots .= \"Sitemap: http://\" . $_SERVER['HTTP_HOST'] . \"/sitemap.xml\\n\";\n    \n    file_put_contents('../robots.txt', $robots);\n}\n\n// Get current settings\n$current_settings = [\n    'site_title' => getSetting($conn, 'site_title', SITE_NAME),\n    'site_description' => getSetting($conn, 'site_description', ''),\n    'site_keywords' => getSetting($conn, 'site_keywords', ''),\n    'google_analytics_id' => getSetting($conn, 'google_analytics_id', ''),\n    'google_search_console' => getSetting($conn, 'google_search_console', ''),\n    'facebook_app_id' => getSetting($conn, 'facebook_app_id', ''),\n    'twitter_site' => getSetting($conn, 'twitter_site', ''),\n    'enable_sitemap' => getSetting($conn, 'enable_sitemap', '1'),\n    'enable_robots' => getSetting($conn, 'enable_robots', '1'),\n    'default_og_image' => getSetting($conn, 'default_og_image', ''),\n    'canonical_url' => getSetting($conn, 'canonical_url', 'http://' . $_SERVER['HTTP_HOST']),\n    'enable_schema_markup' => getSetting($conn, 'enable_schema_markup', '1')\n];\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>SEO Settings - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n            </div>\n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\"><i class=\"fas fa-tachometer-alt\"></i> Dashboard</a>\n                </li>\n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\"><i class=\"fas fa-file-alt\"></i> Articles</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\"><i class=\"fas fa-tags\"></i> Categories</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"media.php\"><i class=\"fas fa-images\"></i> Media Library</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"ads.php\"><i class=\"fas fa-bullhorn\"></i> Advertisements</a>\n                </li>\n                <li class=\"menu-header\">Site Settings</li>\n                <li class=\"menu-item\">\n                    <a href=\"homepage-layout.php\"><i class=\"fas fa-layout\"></i> Homepage Layout</a>\n                </li>\n                <li class=\"menu-item active\">\n                    <a href=\"seo-settings.php\"><i class=\"fas fa-search\"></i> SEO Settings</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"users.php\"><i class=\"fas fa-users\"></i> Users</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">SEO Settings</h5>\n                </div>\n                <div class=\"topbar-right\">\n                    <div class=\"btn-group\">\n                        <form method=\"POST\" style=\"display: inline;\">\n                            <input type=\"hidden\" name=\"action\" value=\"generate_sitemap\">\n                            <button type=\"submit\" class=\"btn btn-outline-primary btn-sm\">\n                                <i class=\"fas fa-sitemap\"></i> Generate Sitemap\n                            </button>\n                        </form>\n                        <form method=\"POST\" style=\"display: inline;\">\n                            <input type=\"hidden\" name=\"action\" value=\"generate_robots\">\n                            <button type=\"submit\" class=\"btn btn-outline-secondary btn-sm\">\n                                <i class=\"fas fa-robot\"></i> Generate Robots.txt\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n\n                    <form method=\"POST\">\n                        <input type=\"hidden\" name=\"action\" value=\"update_seo\">\n                        \n                        <div class=\"row\">\n                            <div class=\"col-lg-8\">\n                                <!-- Basic SEO Settings -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Basic SEO Settings</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"site_title\" class=\"form-label\">Site Title</label>\n                                            <input type=\"text\" class=\"form-control\" name=\"site_title\" id=\"site_title\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['site_title']); ?>\" required>\n                                            <small class=\"text-muted\">This will appear in browser titles and search results</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"site_description\" class=\"form-label\">Site Description</label>\n                                            <textarea class=\"form-control\" name=\"site_description\" id=\"site_description\" rows=\"3\"><?php echo htmlspecialchars($current_settings['site_description']); ?></textarea>\n                                            <small class=\"text-muted\">Brief description of your news site (150-160 characters recommended)</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"site_keywords\" class=\"form-label\">Site Keywords</label>\n                                            <input type=\"text\" class=\"form-control\" name=\"site_keywords\" id=\"site_keywords\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['site_keywords']); ?>\">\n                                            <small class=\"text-muted\">Comma-separated keywords (e.g., news, politics, sports)</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"canonical_url\" class=\"form-label\">Canonical URL</label>\n                                            <input type=\"url\" class=\"form-control\" name=\"canonical_url\" id=\"canonical_url\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['canonical_url']); ?>\">\n                                            <small class=\"text-muted\">Your site's main URL without trailing slash</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"default_og_image\" class=\"form-label\">Default Open Graph Image</label>\n                                            <input type=\"url\" class=\"form-control\" name=\"default_og_image\" id=\"default_og_image\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['default_og_image']); ?>\">\n                                            <small class=\"text-muted\">Default image for social sharing (1200x630px recommended)</small>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- Analytics & Tracking -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Analytics & Tracking</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"google_analytics_id\" class=\"form-label\">Google Analytics ID</label>\n                                            <input type=\"text\" class=\"form-control\" name=\"google_analytics_id\" id=\"google_analytics_id\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['google_analytics_id']); ?>\"\n                                                   placeholder=\"G-XXXXXXXXXX\">\n                                            <small class=\"text-muted\">Google Analytics 4 Measurement ID</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"google_search_console\" class=\"form-label\">Google Search Console Verification</label>\n                                            <input type=\"text\" class=\"form-control\" name=\"google_search_console\" id=\"google_search_console\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['google_search_console']); ?>\"\n                                                   placeholder=\"google-site-verification content\">\n                                            <small class=\"text-muted\">Meta tag content for Google Search Console verification</small>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- Social Media Settings -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Social Media Integration</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"facebook_app_id\" class=\"form-label\">Facebook App ID</label>\n                                            <input type=\"text\" class=\"form-control\" name=\"facebook_app_id\" id=\"facebook_app_id\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['facebook_app_id']); ?>\">\n                                            <small class=\"text-muted\">For Facebook social plugins and Open Graph</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"twitter_site\" class=\"form-label\">Twitter Site Handle</label>\n                                            <div class=\"input-group\">\n                                                <span class=\"input-group-text\">@</span>\n                                                <input type=\"text\" class=\"form-control\" name=\"twitter_site\" id=\"twitter_site\" \n                                                       value=\"<?php echo htmlspecialchars($current_settings['twitter_site']); ?>\"\n                                                       placeholder=\"yournewssite\">\n                                            </div>\n                                            <small class=\"text-muted\">Your site's Twitter handle for Twitter Cards</small>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"col-lg-4\">\n                                <!-- SEO Features -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">SEO Features</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check form-switch\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"enable_sitemap\" \n                                                       id=\"enable_sitemap\" <?php echo $current_settings['enable_sitemap'] ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"enable_sitemap\">\n                                                    Enable XML Sitemap\n                                                </label>\n                                            </div>\n                                            <small class=\"text-muted\">Generate XML sitemap for search engines</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check form-switch\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"enable_robots\" \n                                                       id=\"enable_robots\" <?php echo $current_settings['enable_robots'] ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"enable_robots\">\n                                                    Enable Robots.txt\n                                                </label>\n                                            </div>\n                                            <small class=\"text-muted\">Control search engine crawling</small>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check form-switch\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"enable_schema_markup\" \n                                                       id=\"enable_schema_markup\" <?php echo $current_settings['enable_schema_markup'] ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"enable_schema_markup\">\n                                                    Enable Schema Markup\n                                                </label>\n                                            </div>\n                                            <small class=\"text-muted\">Rich snippets for articles and organization</small>\n                                        </div>\n                                        \n                                        <div class=\"d-grid\">\n                                            <button type=\"submit\" class=\"btn btn-primary\">\n                                                <i class=\"fas fa-save\"></i> Save SEO Settings\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- SEO Status -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">SEO Status</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"d-flex justify-content-between align-items-center mb-2\">\n                                            <span>Sitemap.xml</span>\n                                            <?php if (file_exists('../sitemap.xml')): ?>\n                                                <span class=\"badge bg-success\">Active</span>\n                                            <?php else: ?>\n                                                <span class=\"badge bg-warning\">Not Found</span>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <div class=\"d-flex justify-content-between align-items-center mb-2\">\n                                            <span>Robots.txt</span>\n                                            <?php if (file_exists('../robots.txt')): ?>\n                                                <span class=\"badge bg-success\">Active</span>\n                                            <?php else: ?>\n                                                <span class=\"badge bg-warning\">Not Found</span>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <div class=\"d-flex justify-content-between align-items-center mb-2\">\n                                            <span>Google Analytics</span>\n                                            <?php if (!empty($current_settings['google_analytics_id'])): ?>\n                                                <span class=\"badge bg-success\">Configured</span>\n                                            <?php else: ?>\n                                                <span class=\"badge bg-secondary\">Not Set</span>\n                                            <?php endif; ?>\n                                        </div>\n                                        \n                                        <div class=\"d-flex justify-content-between align-items-center\">\n                                            <span>Social Integration</span>\n                                            <?php if (!empty($current_settings['facebook_app_id']) || !empty($current_settings['twitter_site'])): ?>\n                                                <span class=\"badge bg-success\">Configured</span>\n                                            <?php else: ?>\n                                                <span class=\"badge bg-secondary\">Not Set</span>\n                                            <?php endif; ?>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- Quick Links -->\n                                <div class=\"card\">\n                                    <div class=\"card-header\">\n                                        <h6 class=\"card-title mb-0\">Quick Links</h6>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"d-grid gap-2\">\n                                            <a href=\"../sitemap.xml\" target=\"_blank\" class=\"btn btn-outline-primary btn-sm\">\n                                                <i class=\"fas fa-external-link-alt\"></i> View Sitemap\n                                            </a>\n                                            <a href=\"../robots.txt\" target=\"_blank\" class=\"btn btn-outline-primary btn-sm\">\n                                                <i class=\"fas fa-external-link-alt\"></i> View Robots.txt\n                                            </a>\n                                            <a href=\"https://search.google.com/search-console\" target=\"_blank\" class=\"btn btn-outline-success btn-sm\">\n                                                <i class=\"fab fa-google\"></i> Google Search Console\n                                            </a>\n                                            <a href=\"https://analytics.google.com\" target=\"_blank\" class=\"btn btn-outline-info btn-sm\">\n                                                <i class=\"fab fa-google\"></i> Google Analytics\n                                            </a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":25671},"admin/settings.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\n\n$success = '';\n$error = '';\n\n$db = new Database();\n$conn = $db->getConnection();\n\n// Handle form submissions\nif ($_POST) {\n    $site_settings = [\n        'site_name' => sanitize($_POST['site_name'] ?? ''),\n        'site_tagline' => sanitize($_POST['site_tagline'] ?? ''),\n        'admin_email' => sanitize($_POST['admin_email'] ?? ''),\n        'timezone' => sanitize($_POST['timezone'] ?? ''),\n        'date_format' => sanitize($_POST['date_format'] ?? ''),\n        'articles_per_page' => intval($_POST['articles_per_page'] ?? 10),\n        'enable_comments' => isset($_POST['enable_comments']) ? '1' : '0',\n        'enable_registration' => isset($_POST['enable_registration']) ? '1' : '0',\n        'maintenance_mode' => isset($_POST['maintenance_mode']) ? '1' : '0',\n        'facebook_url' => sanitize($_POST['facebook_url'] ?? ''),\n        'twitter_url' => sanitize($_POST['twitter_url'] ?? ''),\n        'instagram_url' => sanitize($_POST['instagram_url'] ?? ''),\n        'contact_email' => sanitize($_POST['contact_email'] ?? ''),\n        'contact_phone' => sanitize($_POST['contact_phone'] ?? ''),\n        'contact_address' => sanitize($_POST['contact_address'] ?? '')\n    ];\n    \n    foreach ($site_settings as $key => $value) {\n        $stmt = $conn->prepare(\"INSERT INTO settings (setting_key, setting_value) VALUES (?, ?) ON CONFLICT (setting_key) DO UPDATE SET setting_value = ?, updated_at = CURRENT_TIMESTAMP\");\n        $stmt->execute([$key, $value, $value]);\n    }\n    \n    $success = 'Site settings updated successfully';\n}\n\n// Helper function to get settings\nfunction getSetting($conn, $key, $default = '') {\n    $stmt = $conn->prepare(\"SELECT setting_value FROM settings WHERE setting_key = ?\");\n    $stmt->execute([$key]);\n    $result = $stmt->fetch(PDO::FETCH_ASSOC);\n    return $result ? $result['setting_value'] : $default;\n}\n\n// Get current settings\n$current_settings = [\n    'site_name' => getSetting($conn, 'site_name', SITE_NAME),\n    'site_tagline' => getSetting($conn, 'site_tagline', 'Your trusted news source'),\n    'admin_email' => getSetting($conn, 'admin_email', 'admin@example.com'),\n    'timezone' => getSetting($conn, 'timezone', 'UTC'),\n    'date_format' => getSetting($conn, 'date_format', 'F j, Y'),\n    'articles_per_page' => getSetting($conn, 'articles_per_page', '10'),\n    'enable_comments' => getSetting($conn, 'enable_comments', '1'),\n    'enable_registration' => getSetting($conn, 'enable_registration', '0'),\n    'maintenance_mode' => getSetting($conn, 'maintenance_mode', '0'),\n    'facebook_url' => getSetting($conn, 'facebook_url', ''),\n    'twitter_url' => getSetting($conn, 'twitter_url', ''),\n    'instagram_url' => getSetting($conn, 'instagram_url', ''),\n    'contact_email' => getSetting($conn, 'contact_email', ''),\n    'contact_phone' => getSetting($conn, 'contact_phone', ''),\n    'contact_address' => getSetting($conn, 'contact_address', '')\n];\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Site Settings - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n            </div>\n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\"><i class=\"fas fa-tachometer-alt\"></i> Dashboard</a>\n                </li>\n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\"><i class=\"fas fa-file-alt\"></i> Articles</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\"><i class=\"fas fa-tags\"></i> Categories</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"media.php\"><i class=\"fas fa-images\"></i> Media Library</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"ads.php\"><i class=\"fas fa-bullhorn\"></i> Advertisements</a>\n                </li>\n                <li class=\"menu-header\">Site Settings</li>\n                <li class=\"menu-item\">\n                    <a href=\"homepage-layout.php\"><i class=\"fas fa-layout\"></i> Homepage Layout</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"seo-settings.php\"><i class=\"fas fa-search\"></i> SEO Settings</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"users.php\"><i class=\"fas fa-users\"></i> Users</a>\n                </li>\n                <li class=\"menu-item active\">\n                    <a href=\"settings.php\"><i class=\"fas fa-cogs\"></i> General Settings</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">General Settings</h5>\n                </div>\n            </div>\n\n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n\n                    <form method=\"POST\">\n                        <div class=\"row\">\n                            <div class=\"col-lg-8\">\n                                <!-- Basic Settings -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Basic Settings</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"site_name\" class=\"form-label\">Site Name</label>\n                                            <input type=\"text\" class=\"form-control\" name=\"site_name\" id=\"site_name\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['site_name']); ?>\" required>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"site_tagline\" class=\"form-label\">Site Tagline</label>\n                                            <input type=\"text\" class=\"form-control\" name=\"site_tagline\" id=\"site_tagline\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['site_tagline']); ?>\">\n                                        </div>\n                                        \n                                        <div class=\"row\">\n                                            <div class=\"col-md-6\">\n                                                <div class=\"mb-3\">\n                                                    <label for=\"admin_email\" class=\"form-label\">Admin Email</label>\n                                                    <input type=\"email\" class=\"form-control\" name=\"admin_email\" id=\"admin_email\" \n                                                           value=\"<?php echo htmlspecialchars($current_settings['admin_email']); ?>\">\n                                                </div>\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <div class=\"mb-3\">\n                                                    <label for=\"timezone\" class=\"form-label\">Timezone</label>\n                                                    <select class=\"form-select\" name=\"timezone\" id=\"timezone\">\n                                                        <option value=\"UTC\" <?php echo $current_settings['timezone'] === 'UTC' ? 'selected' : ''; ?>>UTC</option>\n                                                        <option value=\"America/New_York\" <?php echo $current_settings['timezone'] === 'America/New_York' ? 'selected' : ''; ?>>Eastern Time</option>\n                                                        <option value=\"America/Chicago\" <?php echo $current_settings['timezone'] === 'America/Chicago' ? 'selected' : ''; ?>>Central Time</option>\n                                                        <option value=\"America/Denver\" <?php echo $current_settings['timezone'] === 'America/Denver' ? 'selected' : ''; ?>>Mountain Time</option>\n                                                        <option value=\"America/Los_Angeles\" <?php echo $current_settings['timezone'] === 'America/Los_Angeles' ? 'selected' : ''; ?>>Pacific Time</option>\n                                                    </select>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- Display Settings -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Display Settings</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"row\">\n                                            <div class=\"col-md-6\">\n                                                <div class=\"mb-3\">\n                                                    <label for=\"date_format\" class=\"form-label\">Date Format</label>\n                                                    <select class=\"form-select\" name=\"date_format\" id=\"date_format\">\n                                                        <option value=\"F j, Y\" <?php echo $current_settings['date_format'] === 'F j, Y' ? 'selected' : ''; ?>>January 1, 2024</option>\n                                                        <option value=\"Y-m-d\" <?php echo $current_settings['date_format'] === 'Y-m-d' ? 'selected' : ''; ?>>2024-01-01</option>\n                                                        <option value=\"m/d/Y\" <?php echo $current_settings['date_format'] === 'm/d/Y' ? 'selected' : ''; ?>>01/01/2024</option>\n                                                        <option value=\"d/m/Y\" <?php echo $current_settings['date_format'] === 'd/m/Y' ? 'selected' : ''; ?>>01/01/2024</option>\n                                                    </select>\n                                                </div>\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <div class=\"mb-3\">\n                                                    <label for=\"articles_per_page\" class=\"form-label\">Articles per Page</label>\n                                                    <select class=\"form-select\" name=\"articles_per_page\" id=\"articles_per_page\">\n                                                        <option value=\"5\" <?php echo $current_settings['articles_per_page'] === '5' ? 'selected' : ''; ?>>5</option>\n                                                        <option value=\"10\" <?php echo $current_settings['articles_per_page'] === '10' ? 'selected' : ''; ?>>10</option>\n                                                        <option value=\"15\" <?php echo $current_settings['articles_per_page'] === '15' ? 'selected' : ''; ?>>15</option>\n                                                        <option value=\"20\" <?php echo $current_settings['articles_per_page'] === '20' ? 'selected' : ''; ?>>20</option>\n                                                    </select>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- Contact Information -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Contact Information</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"row\">\n                                            <div class=\"col-md-6\">\n                                                <div class=\"mb-3\">\n                                                    <label for=\"contact_email\" class=\"form-label\">Contact Email</label>\n                                                    <input type=\"email\" class=\"form-control\" name=\"contact_email\" id=\"contact_email\" \n                                                           value=\"<?php echo htmlspecialchars($current_settings['contact_email']); ?>\">\n                                                </div>\n                                            </div>\n                                            <div class=\"col-md-6\">\n                                                <div class=\"mb-3\">\n                                                    <label for=\"contact_phone\" class=\"form-label\">Contact Phone</label>\n                                                    <input type=\"text\" class=\"form-control\" name=\"contact_phone\" id=\"contact_phone\" \n                                                           value=\"<?php echo htmlspecialchars($current_settings['contact_phone']); ?>\">\n                                                </div>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"contact_address\" class=\"form-label\">Contact Address</label>\n                                            <textarea class=\"form-control\" name=\"contact_address\" id=\"contact_address\" rows=\"3\"><?php echo htmlspecialchars($current_settings['contact_address']); ?></textarea>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- Social Media -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">Social Media Links</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <label for=\"facebook_url\" class=\"form-label\">Facebook URL</label>\n                                            <input type=\"url\" class=\"form-control\" name=\"facebook_url\" id=\"facebook_url\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['facebook_url']); ?>\">\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"twitter_url\" class=\"form-label\">Twitter URL</label>\n                                            <input type=\"url\" class=\"form-control\" name=\"twitter_url\" id=\"twitter_url\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['twitter_url']); ?>\">\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <label for=\"instagram_url\" class=\"form-label\">Instagram URL</label>\n                                            <input type=\"url\" class=\"form-control\" name=\"instagram_url\" id=\"instagram_url\" \n                                                   value=\"<?php echo htmlspecialchars($current_settings['instagram_url']); ?>\">\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div class=\"col-lg-4\">\n                                <!-- System Settings -->\n                                <div class=\"card mb-4\">\n                                    <div class=\"card-header\">\n                                        <h5 class=\"card-title mb-0\">System Settings</h5>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check form-switch\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"enable_comments\" \n                                                       id=\"enable_comments\" <?php echo $current_settings['enable_comments'] ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"enable_comments\">\n                                                    Enable Comments\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check form-switch\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"enable_registration\" \n                                                       id=\"enable_registration\" <?php echo $current_settings['enable_registration'] ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"enable_registration\">\n                                                    Allow User Registration\n                                                </label>\n                                            </div>\n                                        </div>\n                                        \n                                        <div class=\"mb-3\">\n                                            <div class=\"form-check form-switch\">\n                                                <input class=\"form-check-input\" type=\"checkbox\" name=\"maintenance_mode\" \n                                                       id=\"maintenance_mode\" <?php echo $current_settings['maintenance_mode'] ? 'checked' : ''; ?>>\n                                                <label class=\"form-check-label\" for=\"maintenance_mode\">\n                                                    <span class=\"text-warning\">Maintenance Mode</span>\n                                                </label>\n                                            </div>\n                                            <small class=\"text-muted\">Site will show maintenance message to visitors</small>\n                                        </div>\n                                        \n                                        <div class=\"d-grid\">\n                                            <button type=\"submit\" class=\"btn btn-primary\">\n                                                <i class=\"fas fa-save\"></i> Save Settings\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <!-- System Information -->\n                                <div class=\"card\">\n                                    <div class=\"card-header\">\n                                        <h6 class=\"card-title mb-0\">System Information</h6>\n                                    </div>\n                                    <div class=\"card-body\">\n                                        <small class=\"text-muted\">\n                                            <strong>PHP Version:</strong> <?php echo PHP_VERSION; ?><br>\n                                            <strong>Server:</strong> <?php echo $_SERVER['SERVER_SOFTWARE'] ?? 'Unknown'; ?><br>\n                                            <strong>Current Time:</strong> <?php echo date('Y-m-d H:i:s'); ?><br>\n                                            <strong>Disk Space:</strong> <?php echo formatFileSize(disk_free_space('.')); ?> free\n                                        </small>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n</body>\n</html>","size_bytes":21864},"admin/users.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\n\n$success = '';\n$error = '';\n\n$db = new Database();\n$conn = $db->getConnection();\n\n// Handle form submissions\nif ($_POST && isset($_POST['action'])) {\n    switch ($_POST['action']) {\n        case 'create_user':\n            $username = sanitize($_POST['username'] ?? '');\n            $email = sanitize($_POST['email'] ?? '');\n            $first_name = sanitize($_POST['first_name'] ?? '');\n            $last_name = sanitize($_POST['last_name'] ?? '');\n            $role = sanitize($_POST['role'] ?? 'author');\n            $status = sanitize($_POST['status'] ?? 'active');\n            $password = $_POST['password'] ?? '';\n            \n            if (empty($username) || empty($email) || empty($password)) {\n                $error = 'Username, email, and password are required';\n            } else {\n                // Check if username or email exists\n                $check_stmt = $conn->prepare(\"SELECT id FROM users WHERE username = ? OR email = ?\");\n                $check_stmt->execute([$username, $email]);\n                \n                if ($check_stmt->rowCount() > 0) {\n                    $error = 'Username or email already exists';\n                } else {\n                    $hashed_password = password_hash($password, PASSWORD_DEFAULT);\n                    \n                    $stmt = $conn->prepare(\"INSERT INTO users (username, email, password, first_name, last_name, role, status) VALUES (?, ?, ?, ?, ?, ?, ?)\");\n                    \n                    if ($stmt->execute([$username, $email, $hashed_password, $first_name, $last_name, $role, $status])) {\n                        $success = 'User created successfully';\n                    } else {\n                        $error = 'Failed to create user';\n                    }\n                }\n            }\n            break;\n            \n        case 'update_user_status':\n            $user_id = intval($_POST['user_id'] ?? 0);\n            $status = sanitize($_POST['status'] ?? 'active');\n            \n            if ($user_id > 0 && $user_id != $_SESSION['user_id']) { // Don't allow changing own status\n                $stmt = $conn->prepare(\"UPDATE users SET status = ? WHERE id = ?\");\n                if ($stmt->execute([$status, $user_id])) {\n                    $success = 'User status updated';\n                } else {\n                    $error = 'Failed to update user status';\n                }\n            } else {\n                $error = 'Cannot update your own status';\n            }\n            break;\n            \n        case 'delete_user':\n            $user_id = intval($_POST['user_id'] ?? 0);\n            \n            if ($user_id > 0 && $user_id != $_SESSION['user_id']) { // Don't allow deleting own account\n                // First update articles to remove author reference\n                $update_articles = $conn->prepare(\"UPDATE articles SET author_id = ? WHERE author_id = ?\");\n                $update_articles->execute([1, $user_id]); // Assign to user ID 1 (admin)\n                \n                $stmt = $conn->prepare(\"DELETE FROM users WHERE id = ?\");\n                if ($stmt->execute([$user_id])) {\n                    $success = 'User deleted successfully';\n                } else {\n                    $error = 'Failed to delete user';\n                }\n            } else {\n                $error = 'Cannot delete your own account';\n            }\n            break;\n    }\n}\n\n// Get all users with article counts\n$users_stmt = $conn->query(\"\n    SELECT u.*, \n           COUNT(a.id) as article_count,\n           MAX(a.created_at) as last_article\n    FROM users u \n    LEFT JOIN articles a ON u.id = a.author_id \n    GROUP BY u.id \n    ORDER BY u.created_at DESC\n\");\n$users = $users_stmt->fetchAll(PDO::FETCH_ASSOC);\n?>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>User Management - <?php echo SITE_NAME; ?> Admin</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\" rel=\"stylesheet\">\n    <link href=\"../public/css/admin.css\" rel=\"stylesheet\">\n    <style>\n        .role-badge {\n            font-size: 0.8rem;\n            padding: 0.25rem 0.5rem;\n        }\n        .role-admin { background: #dc3545; }\n        .role-editor { background: #fd7e14; }\n        .role-author { background: #198754; }\n        .role-contributor { background: #0dcaf0; }\n    </style>\n</head>\n<body>\n    <div class=\"admin-wrapper\">\n        <!-- Sidebar -->\n        <nav class=\"sidebar\">\n            <div class=\"sidebar-header\">\n                <h4><i class=\"fas fa-newspaper\"></i> News Admin</h4>\n            </div>\n            <ul class=\"sidebar-menu\">\n                <li class=\"menu-item\">\n                    <a href=\"dashboard.php\"><i class=\"fas fa-tachometer-alt\"></i> Dashboard</a>\n                </li>\n                <li class=\"menu-header\">Content Management</li>\n                <li class=\"menu-item\">\n                    <a href=\"articles.php\"><i class=\"fas fa-file-alt\"></i> Articles</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"categories.php\"><i class=\"fas fa-tags\"></i> Categories</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"media.php\"><i class=\"fas fa-images\"></i> Media Library</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"ads.php\"><i class=\"fas fa-bullhorn\"></i> Advertisements</a>\n                </li>\n                <li class=\"menu-header\">Site Settings</li>\n                <li class=\"menu-item\">\n                    <a href=\"homepage-layout.php\"><i class=\"fas fa-layout\"></i> Homepage Layout</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"seo-settings.php\"><i class=\"fas fa-search\"></i> SEO Settings</a>\n                </li>\n                <li class=\"menu-item active\">\n                    <a href=\"users.php\"><i class=\"fas fa-users\"></i> Users</a>\n                </li>\n                <li class=\"menu-item\">\n                    <a href=\"logout.php\"><i class=\"fas fa-sign-out-alt\"></i> Logout</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Main Content -->\n        <div class=\"main-content\">\n            <div class=\"topbar\">\n                <div class=\"d-flex align-items-center\">\n                    <h5 class=\"mb-0\">User Management</h5>\n                </div>\n                <div class=\"topbar-right\">\n                    <button class=\"btn btn-primary btn-sm\" data-bs-toggle=\"modal\" data-bs-target=\"#createUserModal\">\n                        <i class=\"fas fa-plus\"></i> Add New User\n                    </button>\n                </div>\n            </div>\n\n            <div class=\"content-area\">\n                <div class=\"container-fluid\">\n                    <?php if ($success): ?>\n                        <div class=\"alert alert-success alert-dismissible fade show\">\n                            <i class=\"fas fa-check-circle\"></i> <?php echo $success; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n                    \n                    <?php if ($error): ?>\n                        <div class=\"alert alert-danger alert-dismissible fade show\">\n                            <i class=\"fas fa-exclamation-triangle\"></i> <?php echo $error; ?>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"alert\"></button>\n                        </div>\n                    <?php endif; ?>\n\n                    <!-- Users List -->\n                    <div class=\"card\">\n                        <div class=\"card-body\">\n                            <?php if (empty($users)): ?>\n                                <div class=\"text-center py-5\">\n                                    <i class=\"fas fa-users fa-3x text-muted mb-3\"></i>\n                                    <h5>No users found</h5>\n                                    <p class=\"text-muted\">Add your first user to get started</p>\n                                    <button class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#createUserModal\">\n                                        <i class=\"fas fa-plus\"></i> Add User\n                                    </button>\n                                </div>\n                            <?php else: ?>\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-hover\">\n                                        <thead>\n                                            <tr>\n                                                <th>User</th>\n                                                <th>Role</th>\n                                                <th>Articles</th>\n                                                <th>Status</th>\n                                                <th>Last Activity</th>\n                                                <th>Actions</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <?php foreach ($users as $user): ?>\n                                            <tr>\n                                                <td>\n                                                    <div class=\"d-flex align-items-center\">\n                                                        <div class=\"avatar me-3\">\n                                                            <i class=\"fas fa-user-circle fa-2x text-muted\"></i>\n                                                        </div>\n                                                        <div>\n                                                            <strong><?php echo htmlspecialchars($user['first_name'] . ' ' . $user['last_name']); ?></strong>\n                                                            <br><small class=\"text-muted\">@<?php echo htmlspecialchars($user['username']); ?></small>\n                                                            <br><small class=\"text-muted\"><?php echo htmlspecialchars($user['email']); ?></small>\n                                                        </div>\n                                                    </div>\n                                                </td>\n                                                <td>\n                                                    <span class=\"badge role-<?php echo $user['role']; ?> role-badge\">\n                                                        <?php echo ucfirst($user['role']); ?>\n                                                    </span>\n                                                </td>\n                                                <td>\n                                                    <span class=\"fw-bold\"><?php echo number_format($user['article_count']); ?></span>\n                                                    <?php if ($user['last_article']): ?>\n                                                        <br><small class=\"text-muted\">Last: <?php echo date('M j, Y', strtotime($user['last_article'])); ?></small>\n                                                    <?php endif; ?>\n                                                </td>\n                                                <td>\n                                                    <form method=\"POST\" onchange=\"this.submit()\">\n                                                        <input type=\"hidden\" name=\"action\" value=\"update_user_status\">\n                                                        <input type=\"hidden\" name=\"user_id\" value=\"<?php echo $user['id']; ?>\">\n                                                        <select name=\"status\" class=\"form-select form-select-sm\" \n                                                                <?php echo $user['id'] == $_SESSION['user_id'] ? 'disabled' : ''; ?>>\n                                                            <option value=\"active\" <?php echo $user['status'] === 'active' ? 'selected' : ''; ?>>Active</option>\n                                                            <option value=\"inactive\" <?php echo $user['status'] === 'inactive' ? 'selected' : ''; ?>>Inactive</option>\n                                                            <option value=\"suspended\" <?php echo $user['status'] === 'suspended' ? 'selected' : ''; ?>>Suspended</option>\n                                                        </select>\n                                                    </form>\n                                                </td>\n                                                <td>\n                                                    <small><?php echo date('M j, Y', strtotime($user['last_login'] ?? $user['created_at'])); ?></small>\n                                                </td>\n                                                <td>\n                                                    <?php if ($user['id'] != $_SESSION['user_id']): ?>\n                                                        <div class=\"btn-group btn-group-sm\">\n                                                            <button type=\"button\" class=\"btn btn-outline-primary\" \n                                                                    onclick=\"editUser(<?php echo $user['id']; ?>)\" title=\"Edit\">\n                                                                <i class=\"fas fa-edit\"></i>\n                                                            </button>\n                                                            <form method=\"POST\" style=\"display: inline;\" \n                                                                  onsubmit=\"return confirm('Are you sure you want to delete this user? Their articles will be reassigned to admin.')\">\n                                                                <input type=\"hidden\" name=\"action\" value=\"delete_user\">\n                                                                <input type=\"hidden\" name=\"user_id\" value=\"<?php echo $user['id']; ?>\">\n                                                                <button type=\"submit\" class=\"btn btn-outline-danger\" title=\"Delete\">\n                                                                    <i class=\"fas fa-trash\"></i>\n                                                                </button>\n                                                            </form>\n                                                        </div>\n                                                    <?php else: ?>\n                                                        <span class=\"badge bg-info\">You</span>\n                                                    <?php endif; ?>\n                                                </td>\n                                            </tr>\n                                            <?php endforeach; ?>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            <?php endif; ?>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Create User Modal -->\n    <div class=\"modal fade\" id=\"createUserModal\" tabindex=\"-1\">\n        <div class=\"modal-dialog\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">Add New User</h5>\n                    <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                </div>\n                <form method=\"POST\">\n                    <input type=\"hidden\" name=\"action\" value=\"create_user\">\n                    <div class=\"modal-body\">\n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"first_name\" class=\"form-label\">First Name *</label>\n                                    <input type=\"text\" class=\"form-control\" name=\"first_name\" id=\"first_name\" required>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"last_name\" class=\"form-label\">Last Name *</label>\n                                    <input type=\"text\" class=\"form-control\" name=\"last_name\" id=\"last_name\" required>\n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class=\"mb-3\">\n                            <label for=\"username\" class=\"form-label\">Username *</label>\n                            <input type=\"text\" class=\"form-control\" name=\"username\" id=\"username\" required>\n                        </div>\n                        \n                        <div class=\"mb-3\">\n                            <label for=\"email\" class=\"form-label\">Email *</label>\n                            <input type=\"email\" class=\"form-control\" name=\"email\" id=\"email\" required>\n                        </div>\n                        \n                        <div class=\"mb-3\">\n                            <label for=\"password\" class=\"form-label\">Password *</label>\n                            <input type=\"password\" class=\"form-control\" name=\"password\" id=\"password\" required>\n                            <small class=\"text-muted\">Minimum 8 characters recommended</small>\n                        </div>\n                        \n                        <div class=\"row\">\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"role\" class=\"form-label\">Role</label>\n                                    <select class=\"form-select\" name=\"role\" id=\"role\">\n                                        <option value=\"author\">Author</option>\n                                        <option value=\"editor\">Editor</option>\n                                        <option value=\"admin\">Admin</option>\n                                    </select>\n                                </div>\n                            </div>\n                            <div class=\"col-md-6\">\n                                <div class=\"mb-3\">\n                                    <label for=\"status\" class=\"form-label\">Status</label>\n                                    <select class=\"form-select\" name=\"status\" id=\"status\">\n                                        <option value=\"active\">Active</option>\n                                        <option value=\"inactive\">Inactive</option>\n                                    </select>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"submit\" class=\"btn btn-primary\">\n                            <i class=\"fas fa-plus\"></i> Create User\n                        </button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js\"></script>\n    <script>\n        function editUser(userId) {\n            alert('Edit user functionality will be implemented');\n        }\n    </script>\n</body>\n</html>","size_bytes":19856},"classes/Article.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass Article {\n    private $conn;\n    private $table = 'articles';\n\n    public function __construct() {\n        $database = new Database();\n        $this->conn = $database->getConnection();\n        if (!$this->conn) {\n            throw new Exception(\"Database connection failed\");\n        }\n    }\n\n    public function getPublishedArticles($limit = 10, $offset = 0, $category_id = null) {\n        $where_clause = \"WHERE a.status = 'published' AND (a.published_at IS NULL OR a.published_at <= CURRENT_TIMESTAMP)\";\n        if ($category_id) {\n            $where_clause .= \" AND a.category_id = \" . intval($category_id);\n        }\n\n        $query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                         u.first_name, u.last_name\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  $where_clause\n                  ORDER BY a.is_breaking DESC, a.is_featured DESC, a.published_at DESC\n                  LIMIT ? OFFSET ?\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$limit, $offset]);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    public function getFeaturedArticles($limit = 5) {\n        $query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                         u.first_name, u.last_name\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  WHERE a.status = 'published' AND a.is_featured = true\n                  AND (a.published_at IS NULL OR a.published_at <= CURRENT_TIMESTAMP)\n                  ORDER BY a.published_at DESC\n                  LIMIT ?\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$limit]);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    public function getArticleBySlug($slug) {\n        $query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                         u.first_name, u.last_name\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  WHERE a.slug = ? AND a.status = 'published'\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$slug]);\n        \n        if ($stmt->rowCount() > 0) {\n            $article = $stmt->fetch(PDO::FETCH_ASSOC);\n            \n            // Proper view tracking with session tracking to avoid duplicate views\n            if (!isset($_SESSION['viewed_articles'])) {\n                $_SESSION['viewed_articles'] = [];\n            }\n            \n            if (!in_array($article['id'], $_SESSION['viewed_articles'])) {\n                // Update view count\n                $update_query = \"UPDATE \" . $this->table . \" \n                                SET views = views + 1 \n                                WHERE slug = ?\";\n                $update_stmt = $this->conn->prepare($update_query);\n                $update_stmt->execute([$slug]);\n                \n                // Mark as viewed in session\n                $_SESSION['viewed_articles'][] = $article['id'];\n                \n                // Update the view count in the returned data\n                $article['views'] = $article['views'] + 1;\n            }\n            \n            return $article;\n        }\n        return false;\n    }\n\n    public function getAllArticles($limit = 20, $offset = 0, $search = null, $status = null) {\n        $where_conditions = [];\n        $params = [];\n\n        if ($search) {\n            $where_conditions[] = \"(a.title LIKE ? OR a.content LIKE ?)\";\n            $params[] = \"%$search%\";\n            $params[] = \"%$search%\";\n        }\n\n        if ($status) {\n            $where_conditions[] = \"a.status = ?\";\n            $params[] = $status;\n        }\n\n        $where_clause = !empty($where_conditions) ? 'WHERE ' . implode(' AND ', $where_conditions) : '';\n\n        $query = \"SELECT a.*, c.name as category_name, u.first_name, u.last_name\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  $where_clause\n                  ORDER BY a.created_at DESC\n                  LIMIT ? OFFSET ?\";\n        \n        $params[] = $limit;\n        $params[] = $offset;\n\n        $stmt = $this->conn->prepare($query);\n        $stmt->execute($params);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    public function create($data) {\n        $query = \"INSERT INTO \" . $this->table . \" \n                  (title, slug, excerpt, content, featured_image, featured_image_alt, \n                   author_id, category_id, status, published_at, scheduled_at, \n                   meta_title, meta_description, meta_keywords, is_featured, is_breaking)\n                  VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\";\n        \n        $stmt = $this->conn->prepare($query);\n        return $stmt->execute([\n            $data['title'], $data['slug'], $data['excerpt'], $data['content'],\n            $data['featured_image'], $data['featured_image_alt'], $data['author_id'],\n            $data['category_id'], $data['status'], $data['published_at'],\n            $data['scheduled_at'], $data['meta_title'], $data['meta_description'],\n            $data['meta_keywords'], $data['is_featured'], $data['is_breaking']\n        ]);\n    }\n\n    public function getById($id) {\n        $query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                         u.first_name, u.last_name\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  WHERE a.id = ?\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$id]);\n        \n        return $stmt->fetch(PDO::FETCH_ASSOC);\n    }\n\n    public function update($id, $data) {\n        $query = \"UPDATE \" . $this->table . \" \n                  SET title = ?, slug = ?, excerpt = ?, content = ?, \n                      featured_image = ?, featured_image_alt = ?, category_id = ?, \n                      status = ?, published_at = ?, scheduled_at = ?, \n                      meta_title = ?, meta_description = ?, meta_keywords = ?, \n                      is_featured = ?, is_breaking = ?, updated_at = CURRENT_TIMESTAMP\n                  WHERE id = ?\";\n        \n        $stmt = $this->conn->prepare($query);\n        return $stmt->execute([\n            $data['title'], $data['slug'], $data['excerpt'], $data['content'],\n            $data['featured_image'], $data['featured_image_alt'], $data['category_id'],\n            $data['status'], $data['published_at'], $data['scheduled_at'],\n            $data['meta_title'], $data['meta_description'], $data['meta_keywords'],\n            $data['is_featured'], $data['is_breaking'], $id\n        ]);\n    }\n\n    public function delete($id) {\n        $query = \"DELETE FROM \" . $this->table . \" WHERE id = ?\";\n        $stmt = $this->conn->prepare($query);\n        return $stmt->execute([$id]);\n    }\n\n    public function getTrendingArticles($limit = 10) {\n        // Calculate trending based on views and recency\n        $query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                         u.first_name, u.last_name,\n                         (a.views * 0.7 + (EXTRACT(EPOCH FROM (CURRENT_TIMESTAMP - a.published_at)) / -86400) * 0.3) as trending_score\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  WHERE a.status = 'published' \n                  AND a.published_at >= CURRENT_TIMESTAMP - INTERVAL '7 days'\n                  ORDER BY trending_score DESC\n                  LIMIT ?\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$limit]);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    public function getBreakingNews($limit = 5) {\n        $query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                         u.first_name, u.last_name\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  WHERE a.status = 'published' AND a.is_breaking = true\n                  AND (a.published_at IS NULL OR a.published_at <= CURRENT_TIMESTAMP)\n                  ORDER BY a.published_at DESC\n                  LIMIT ?\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$limit]);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    public function getLatestArticles($limit = 10) {\n        $query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                         u.first_name, u.last_name\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  WHERE a.status = 'published'\n                  AND (a.published_at IS NULL OR a.published_at <= CURRENT_TIMESTAMP)\n                  ORDER BY a.published_at DESC\n                  LIMIT ?\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$limit]);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    public function getPopularArticles($limit = 5) {\n        $query = \"SELECT a.*, c.name as category_name, c.slug as category_slug,\n                         u.first_name, u.last_name\n                  FROM \" . $this->table . \" a\n                  LEFT JOIN categories c ON a.category_id = c.id\n                  LEFT JOIN users u ON a.author_id = u.id\n                  WHERE a.status = 'published'\n                  AND (a.published_at IS NULL OR a.published_at <= CURRENT_TIMESTAMP)\n                  ORDER BY a.views DESC, a.published_at DESC\n                  LIMIT ?\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$limit]);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n}\n?>","size_bytes":10431},"classes/User.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass User {\n    private $conn;\n    private $table = 'users';\n\n    public function __construct() {\n        $database = new Database();\n        $this->conn = $database->getConnection();\n    }\n\n    public function login($username, $password) {\n        $query = \"SELECT id, username, email, password, first_name, last_name, role, status \n                  FROM \" . $this->table . \" \n                  WHERE (username = ? OR email = ?) AND status = 'active'\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$username, $username]);\n        \n        if ($stmt->rowCount() == 1) {\n            $user = $stmt->fetch(PDO::FETCH_ASSOC);\n            if (password_verify($password, $user['password'])) {\n                return $user;\n            }\n        }\n        return false;\n    }\n\n    public function isLoggedIn() {\n        return isset($_SESSION['user_id']) && isset($_SESSION['user_role']);\n    }\n\n    public function isAdmin() {\n        return $this->isLoggedIn() && $_SESSION['user_role'] === 'admin';\n    }\n\n    public function logout() {\n        session_destroy();\n        redirect('../index.php');\n    }\n}\n?>","size_bytes":1195},"config/config.php":{"content":"<?php\n// Start session\nsession_start();\n\n// Site configuration\ndefine('SITE_NAME', 'Professional News Portal');\ndefine('SITE_URL', $_SERVER['HTTP_HOST'] ?? 'localhost:5000');\ndefine('ADMIN_EMAIL', 'admin@news.com');\n\n// Upload configuration\ndefine('UPLOAD_PATH', 'public/uploads/');\ndefine('MAX_FILE_SIZE', 5 * 1024 * 1024); // 5MB\n\n// Pagination\ndefine('ARTICLES_PER_PAGE', 10);\ndefine('ADMIN_ARTICLES_PER_PAGE', 20);\n\n// Cache settings\nheader('Cache-Control: no-cache, no-store, must-revalidate');\nheader('Pragma: no-cache');\nheader('Expires: 0');\n\n// Include database\nrequire_once 'database.php';\n\n// Initialize database with tables and sample data\n$database = new Database();\n$database->initializeDatabase();\n\n// Utility functions\nfunction sanitize($data) {\n    return htmlspecialchars(strip_tags(trim($data)));\n}\n\nfunction redirect($url) {\n    header(\"Location: $url\");\n    exit();\n}\n\nfunction generateSlug($string) {\n    return strtolower(trim(preg_replace('/[^A-Za-z0-9-]+/', '-', $string)));\n}\n?>","size_bytes":1004},"config/database.php":{"content":"<?php\n// Database configuration\nclass Database {\n    private $host;\n    private $db_name;\n    private $username;\n    private $password;\n    private $port;\n    public $conn;\n\n    public function __construct() {\n        // First try to use DATABASE_URL from Replit\n        if (isset($_SERVER['DATABASE_URL'])) {\n            $url = parse_url($_SERVER['DATABASE_URL']);\n            $this->host = $url['host'];\n            $this->db_name = ltrim($url['path'], '/');\n            $this->username = $url['user'];\n            $this->password = $url['pass'];\n            $this->port = isset($url['port']) ? $url['port'] : '5432';\n        } else {\n            // Fallback to individual environment variables with Replit defaults\n            $this->host = $_SERVER['PGHOST'] ?? getenv('PGHOST') ?: 'ep-dawn-pond-af0j98yz.c-2.us-west-2.aws.neon.tech';\n            $this->db_name = $_SERVER['PGDATABASE'] ?? getenv('PGDATABASE') ?: 'neondb';\n            $this->username = $_SERVER['PGUSER'] ?? getenv('PGUSER') ?: 'neondb_owner';\n            $this->password = $_SERVER['PGPASSWORD'] ?? getenv('PGPASSWORD') ?: 'npg_OwYltEd9j3kL';\n            $this->port = $_SERVER['PGPORT'] ?? getenv('PGPORT') ?: '5432';\n        }\n    }\n\n    public function getConnection() {\n        $this->conn = null;\n        try {\n            $dsn = \"pgsql:host=\" . $this->host . \";port=\" . $this->port . \";dbname=\" . $this->db_name . \";sslmode=require\";\n            $this->conn = new PDO($dsn, $this->username, $this->password);\n            $this->conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);\n        } catch(PDOException $exception) {\n            echo \"Connection error: \" . $exception->getMessage();\n        }\n        return $this->conn;\n    }\n\n    public function initializeDatabase() {\n        $conn = $this->getConnection();\n        if (!$conn) {\n            return false;\n        }\n\n        try {\n            // Check if tables exist\n            $stmt = $conn->query(\"SELECT to_regclass('public.users')\");\n            $tableExists = $stmt->fetchColumn();\n            \n            if (!$tableExists) {\n                $this->createTables($conn);\n                $this->insertSampleData($conn);\n            }\n            return true;\n        } catch(PDOException $e) {\n            echo \"Database initialization error: \" . $e->getMessage();\n            return false;\n        }\n    }\n\n    private function createTables($conn) {\n        $sql = \"\n        -- Create users table\n        CREATE TABLE IF NOT EXISTS users (\n            id SERIAL PRIMARY KEY,\n            username VARCHAR(50) UNIQUE NOT NULL,\n            email VARCHAR(100) UNIQUE NOT NULL,\n            password VARCHAR(255) NOT NULL,\n            first_name VARCHAR(50),\n            last_name VARCHAR(50),\n            role VARCHAR(20) DEFAULT 'author' CHECK (role IN ('admin', 'editor', 'author')),\n            status VARCHAR(20) DEFAULT 'active' CHECK (status IN ('active', 'inactive', 'suspended')),\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        );\n\n        -- Create categories table with subcategory support\n        CREATE TABLE IF NOT EXISTS categories (\n            id SERIAL PRIMARY KEY,\n            name VARCHAR(100) NOT NULL,\n            slug VARCHAR(100) UNIQUE NOT NULL,\n            description TEXT,\n            color VARCHAR(7) DEFAULT '#007bff',\n            display_order INTEGER DEFAULT 0,\n            status VARCHAR(20) DEFAULT 'active' CHECK (status IN ('active', 'inactive')),\n            show_in_menu BOOLEAN DEFAULT true,\n            show_on_homepage BOOLEAN DEFAULT false,\n            homepage_priority INTEGER DEFAULT 0,\n            parent_category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL,\n            is_subcategory BOOLEAN DEFAULT false,\n            subcategory_order INTEGER DEFAULT 0,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        );\n\n        -- Create articles table\n        CREATE TABLE IF NOT EXISTS articles (\n            id SERIAL PRIMARY KEY,\n            title VARCHAR(255) NOT NULL,\n            slug VARCHAR(255) UNIQUE NOT NULL,\n            excerpt TEXT,\n            content TEXT NOT NULL,\n            featured_image VARCHAR(255),\n            featured_image_alt VARCHAR(255),\n            category_id INTEGER REFERENCES categories(id) ON DELETE SET NULL,\n            author_id INTEGER REFERENCES users(id) ON DELETE SET NULL,\n            status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'published', 'archived')),\n            is_featured BOOLEAN DEFAULT false,\n            is_breaking BOOLEAN DEFAULT false,\n            views INTEGER DEFAULT 0,\n            published_at TIMESTAMP,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        );\n\n        -- Create comments table\n        CREATE TABLE IF NOT EXISTS comments (\n            id SERIAL PRIMARY KEY,\n            article_id INTEGER REFERENCES articles(id) ON DELETE CASCADE,\n            parent_id INTEGER REFERENCES comments(id) ON DELETE CASCADE,\n            author_name VARCHAR(100) NOT NULL,\n            author_email VARCHAR(100) NOT NULL,\n            content TEXT NOT NULL,\n            status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'approved', 'rejected')),\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        );\n\n        -- Create homepage_sections table\n        CREATE TABLE IF NOT EXISTS homepage_sections (\n            id SERIAL PRIMARY KEY,\n            section_name VARCHAR(50) NOT NULL,\n            section_title VARCHAR(100) NOT NULL,\n            layout_style VARCHAR(20) DEFAULT 'grid' CHECK (layout_style IN ('banner', 'grid', 'list')),\n            article_limit INTEGER DEFAULT 5,\n            is_enabled BOOLEAN DEFAULT true,\n            display_order INTEGER DEFAULT 0,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        );\n\n        -- Create settings table\n        CREATE TABLE IF NOT EXISTS settings (\n            id SERIAL PRIMARY KEY,\n            setting_key VARCHAR(100) UNIQUE NOT NULL,\n            setting_value TEXT,\n            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n        );\n        \";\n\n        $conn->exec($sql);\n    }\n\n    private function insertSampleData($conn) {\n        // Insert sample users\n        $conn->exec(\"\n        INSERT INTO users (username, email, password, first_name, last_name, role, status) VALUES\n        ('admin', 'admin@news.com', '\\$2y\\$10\\$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'Admin', 'User', 'admin', 'active'),\n        ('editor1', 'editor@news.com', '\\$2y\\$10\\$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'John', 'Editor', 'editor', 'active'),\n        ('author1', 'author@news.com', '\\$2y\\$10\\$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi', 'Jane', 'Author', 'author', 'active')\n        ON CONFLICT (username) DO NOTHING;\n        \");\n\n        // Insert main categories\n        $conn->exec(\"\n        INSERT INTO categories (name, slug, description, color, display_order, show_in_menu, show_on_homepage, homepage_priority) VALUES\n        ('Politics', 'politics', 'Political news and analysis', '#dc3545', 1, true, true, 1),\n        ('Technology', 'technology', 'Latest tech trends and innovations', '#007bff', 2, true, true, 2),\n        ('Sports', 'sports', 'Sports news and updates', '#28a745', 3, true, true, 3),\n        ('Business', 'business', 'Business and economic news', '#fd7e14', 4, true, true, 4),\n        ('Entertainment', 'entertainment', 'Entertainment and celebrity news', '#6f42c1', 5, true, false, 5)\n        ON CONFLICT (slug) DO NOTHING;\n        \");\n\n        // Insert subcategories\n        $conn->exec(\"\n        INSERT INTO categories (name, slug, description, color, display_order, parent_category_id, is_subcategory, show_in_menu, show_on_homepage) VALUES\n        ('World Politics', 'world-politics', 'International political news', '#dc3545', 1, 1, true, true, false),\n        ('Local Politics', 'local-politics', 'Local and regional political coverage', '#dc3545', 2, 1, true, true, false),\n        ('Artificial Intelligence', 'artificial-intelligence', 'AI and machine learning news', '#007bff', 1, 2, true, true, true),\n        ('Mobile Technology', 'mobile-technology', 'Smartphones and mobile tech', '#007bff', 2, 2, true, true, false),\n        ('Football', 'football', 'Football news and updates', '#28a745', 1, 3, true, true, true),\n        ('Basketball', 'basketball', 'Basketball coverage', '#28a745', 2, 3, true, true, false)\n        ON CONFLICT (slug) DO NOTHING;\n        \");\n\n        // Insert homepage sections\n        $conn->exec(\"\n        INSERT INTO homepage_sections (section_name, section_title, layout_style, article_limit, is_enabled, display_order) VALUES\n        ('breaking', 'Breaking News', 'banner', 3, true, 1),\n        ('featured', 'Featured Articles', 'grid', 6, true, 2),\n        ('latest', 'Latest News', 'list', 8, true, 3),\n        ('trending', 'Trending Now', 'grid', 4, true, 4)\n        ON CONFLICT DO NOTHING;\n        \");\n\n        // Insert sample articles\n        $this->insertSampleArticles($conn);\n    }\n\n    private function insertSampleArticles($conn) {\n        $sampleArticles = [\n            // Politics articles\n            ['Breaking: Major Political Development Unfolds', 'breaking-major-political-development-unfolds', 'A significant political event has captured national attention today...', 'This is a comprehensive article about the latest political development that has everyone talking. The content would go here with detailed analysis and reporting.', 1, 2, 'published', true, true, 1250],\n            ['Election Campaign Updates', 'election-campaign-updates', 'Latest updates from the campaign trail...', 'Campaign coverage with all the latest developments from candidates across the political spectrum.', 1, 1, 'published', false, false, 890],\n            ['Policy Analysis: New Healthcare Bill', 'policy-analysis-new-healthcare-bill', 'Breaking down the implications of proposed healthcare legislation...', 'In-depth analysis of the new healthcare bill and its potential impact on citizens.', 1, 2, 'published', true, false, 650],\n            \n            // Technology articles  \n            ['Revolutionary AI Technology Announced', 'revolutionary-ai-technology-announced', 'Tech giant reveals groundbreaking AI innovation...', 'The technology industry is buzzing with news of this revolutionary AI advancement.', 2, 3, 'published', true, false, 890],\n            ['Smartphone Innovation Breakthrough', 'smartphone-innovation-breakthrough', 'Latest mobile technology promises enhanced user experience...', 'New smartphone features that are changing how we interact with technology.', 2, 1, 'published', false, false, 520],\n            ['Cybersecurity Alert: New Threats Emerge', 'cybersecurity-alert-new-threats-emerge', 'Security experts warn of emerging digital threats...', 'Critical cybersecurity update covering the latest threats and protection measures.', 2, 2, 'published', true, true, 430],\n            \n            // Sports articles\n            ['Championship Game Results', 'championship-game-results', 'Thrilling match concludes with unexpected victory...', 'Sports fans witnessed an incredible game last night.', 3, 1, 'published', false, false, 650],\n            ['Olympic Preparations Underway', 'olympic-preparations-underway', 'Athletes gear up for upcoming Olympic games...', 'Comprehensive coverage of Olympic preparations and athlete profiles.', 3, 3, 'published', true, false, 380],\n            ['Transfer News: Major Player Moves', 'transfer-news-major-player-moves', 'Significant player transfers shake up the sports world...', 'Latest transfer news and analysis of how it affects team dynamics.', 3, 2, 'published', false, false, 290],\n            \n            // Business articles\n            ['Market Analysis: Economy Shows Strong Growth', 'market-analysis-economy-shows-strong-growth', 'Latest economic indicators point to positive trends...', 'Financial experts are optimistic about recent market developments.', 4, 2, 'published', true, false, 420],\n            ['Startup Funding Reaches New Heights', 'startup-funding-reaches-new-heights', 'Venture capital investment hits record levels...', 'Analysis of the startup ecosystem and record-breaking funding rounds.', 4, 1, 'published', false, false, 340],\n            \n            // More Politics articles (total 10)\n            ['Legislative Update: New Bills Introduced', 'legislative-update-new-bills-introduced', 'Congress introduces several new pieces of legislation this week...', 'Detailed coverage of the new legislative proposals and their potential impact on various sectors.', 1, 1, 'published', false, false, 380],\n            ['International Relations: Trade Agreement Talks', 'international-relations-trade-agreement-talks', 'Diplomatic efforts continue on new international trade agreements...', 'Analysis of ongoing trade negotiations and their implications for the global economy.', 1, 2, 'published', true, false, 510],\n            ['Political Commentary: Weekly Analysis', 'political-commentary-weekly-analysis', 'Expert analysis of this weeks political developments...', 'In-depth political commentary covering the weeks most significant events.', 1, 3, 'published', false, false, 290],\n            ['Government Policy: Education Reform Proposal', 'government-policy-education-reform-proposal', 'New education policy proposals aim to improve student outcomes...', 'Comprehensive look at proposed education reforms and their potential benefits.', 1, 1, 'published', false, false, 420],\n            ['Local Elections: Candidate Profiles', 'local-elections-candidate-profiles', 'Meet the candidates running in upcoming local elections...', 'Detailed profiles of local election candidates and their policy positions.', 1, 2, 'published', false, false, 340],\n            ['Budget Debate: Spending Priorities Discussed', 'budget-debate-spending-priorities-discussed', 'Lawmakers debate government spending priorities for next fiscal year...', 'Analysis of budget proposals and the debate over spending priorities.', 1, 3, 'published', true, false, 490],\n            ['Voting Rights: New Legislation Proposed', 'voting-rights-new-legislation-proposed', 'Proposed legislation aims to expand voting access and security...', 'Examination of new voting rights legislation and its potential impact.', 1, 1, 'published', false, false, 370],\n            \n            // More Technology articles (total 10)\n            ['Cloud Computing: Enterprise Solutions', 'cloud-computing-enterprise-solutions', 'New cloud computing solutions revolutionize enterprise operations...', 'How modern cloud technologies are transforming business operations worldwide.', 2, 2, 'published', false, false, 460],\n            ['Quantum Computing Breakthrough', 'quantum-computing-breakthrough', 'Scientists achieve new milestone in quantum computing research...', 'Latest developments in quantum computing and their potential applications.', 2, 3, 'published', true, false, 590],\n            ['Tech Industry: Startup Acquisitions', 'tech-industry-startup-acquisitions', 'Major tech companies acquire promising startups this quarter...', 'Analysis of recent tech acquisitions and their strategic implications.', 2, 1, 'published', false, false, 320],\n            ['Data Privacy: New Regulations Implemented', 'data-privacy-new-regulations-implemented', 'New data privacy regulations take effect globally...', 'Understanding the impact of new privacy laws on technology companies.', 2, 2, 'published', false, false, 410],\n            ['Electric Vehicles: Technology Advances', 'electric-vehicles-technology-advances', 'Latest advances in electric vehicle technology and infrastructure...', 'Comprehensive coverage of EV technology improvements and market trends.', 2, 3, 'published', true, false, 520],\n            ['Software Development: New Programming Languages', 'software-development-new-programming-languages', 'Emerging programming languages gain popularity among developers...', 'Overview of new programming languages and their growing adoption rates.', 2, 1, 'published', false, false, 380],\n            ['Blockchain Technology: Real-world Applications', 'blockchain-technology-real-world-applications', 'Blockchain finds new applications beyond cryptocurrency...', 'Exploring practical uses of blockchain technology across industries.', 2, 2, 'published', false, false, 450],\n            \n            // More Sports articles (total 10)\n            ['Tennis Tournament: Finals Results', 'tennis-tournament-finals-results', 'Exciting tennis tournament concludes with thrilling final matches...', 'Complete coverage of the tennis tournament finals and player performances.', 3, 3, 'published', false, false, 390],\n            ['Baseball Season: Playoff Predictions', 'baseball-season-playoff-predictions', 'Analysts predict which teams will make it to the playoffs...', 'Expert analysis and predictions for the upcoming baseball playoffs.', 3, 1, 'published', true, false, 480],\n            ['Soccer World Cup: Team Preparations', 'soccer-world-cup-team-preparations', 'National teams prepare for upcoming World Cup competition...', 'Behind-the-scenes look at World Cup preparations and team strategies.', 3, 2, 'published', false, false, 350],\n            ['Winter Olympics: Medal Predictions', 'winter-olympics-medal-predictions', 'Sports analysts predict medal winners for upcoming Winter Olympics...', 'Comprehensive preview of Winter Olympics events and medal contenders.', 3, 3, 'published', false, false, 420],\n            ['Golf Championship: Tournament Highlights', 'golf-championship-tournament-highlights', 'Professional golf championship delivers exciting competition...', 'Highlights and analysis from the recent professional golf championship.', 3, 1, 'published', false, false, 310],\n            ['Basketball Draft: Top Prospects Analyzed', 'basketball-draft-top-prospects-analyzed', 'Basketball scouts analyze top prospects for upcoming draft...', 'Detailed analysis of basketball draft prospects and team needs.', 3, 2, 'published', true, false, 440],\n            ['Swimming Records: New World Records Set', 'swimming-records-new-world-records-set', 'International swimming competition sees multiple world records broken...', 'Coverage of record-breaking performances at international swimming events.', 3, 3, 'published', false, false, 360],\n            \n            // More Business articles (total 10)\n            ['Stock Market: Weekly Performance Review', 'stock-market-weekly-performance-review', 'Financial markets show mixed performance this week...', 'Analysis of weekly stock market performance and economic indicators.', 4, 1, 'published', false, false, 390],\n            ['Corporate Earnings: Quarterly Reports Released', 'corporate-earnings-quarterly-reports-released', 'Major corporations release quarterly earnings reports...', 'Summary and analysis of quarterly earnings from major corporations.', 4, 2, 'published', true, false, 470],\n            ['Real Estate Market: Housing Trends', 'real-estate-market-housing-trends', 'Real estate market shows new trends in housing demand...', 'Analysis of current real estate trends and market predictions.', 4, 3, 'published', false, false, 350],\n            ['Banking Sector: Interest Rate Changes', 'banking-sector-interest-rate-changes', 'Central bank announces changes to interest rates...', 'Impact analysis of interest rate changes on the banking sector.', 4, 1, 'published', false, false, 410],\n            ['Retail Industry: Holiday Sales Projections', 'retail-industry-holiday-sales-projections', 'Retailers prepare for holiday shopping season with optimistic projections...', 'Analysis of holiday sales projections and retail industry trends.', 4, 2, 'published', false, false, 320],\n            ['Energy Sector: Renewable Energy Investments', 'energy-sector-renewable-energy-investments', 'Major investments in renewable energy projects announced...', 'Coverage of new renewable energy investments and their market impact.', 4, 3, 'published', true, false, 490],\n            ['Manufacturing Industry: Supply Chain Updates', 'manufacturing-industry-supply-chain-updates', 'Manufacturing sector adapts to global supply chain challenges...', 'Analysis of supply chain improvements and manufacturing trends.', 4, 1, 'published', false, false, 370],\n            ['Cryptocurrency Market: Digital Asset Trends', 'cryptocurrency-market-digital-asset-trends', 'Cryptocurrency markets show new trends in digital asset adoption...', 'Overview of cryptocurrency market trends and regulatory developments.', 4, 2, 'published', false, false, 430],\n            \n            // More Entertainment articles (total 10)\n            ['Celebrity News Update', 'celebrity-news-update', 'Entertainment industry buzz around latest events...', 'The entertainment world has been active with several noteworthy events.', 5, 3, 'published', false, false, 330],\n            ['Movie Industry Box Office Records', 'movie-industry-box-office-records', 'Latest film releases break box office records...', 'Analysis of recent box office successes and what they mean for the industry.', 5, 1, 'published', true, false, 280],\n            ['Music Industry: Album Release Reviews', 'music-industry-album-release-reviews', 'New album releases receive critical acclaim and commercial success...', 'Reviews and analysis of the latest album releases from popular artists.', 5, 2, 'published', false, false, 390],\n            ['Television Shows: Streaming Platform Updates', 'television-shows-streaming-platform-updates', 'Streaming platforms announce new original series and content...', 'Overview of new content coming to major streaming platforms.', 5, 3, 'published', false, false, 350],\n            ['Award Shows: Red Carpet Fashion Highlights', 'award-shows-red-carpet-fashion-highlights', 'Fashion takes center stage at major entertainment award shows...', 'Coverage of fashion trends and highlights from recent award ceremonies.', 5, 1, 'published', false, false, 310],\n            ['Gaming Industry: New Video Game Releases', 'gaming-industry-new-video-game-releases', 'Highly anticipated video games launch to enthusiastic reception...', 'Reviews and coverage of the latest video game releases and industry trends.', 5, 2, 'published', true, false, 420],\n            ['Theater Productions: Broadway Season Preview', 'theater-productions-broadway-season-preview', 'Broadway prepares for new season with exciting theatrical productions...', 'Preview of upcoming Broadway shows and theatrical productions.', 5, 3, 'published', false, false, 370],\n            ['Book Publishing: Bestseller Lists Update', 'book-publishing-bestseller-lists-update', 'New books climb bestseller lists across multiple genres...', 'Analysis of current bestseller trends and notable new book releases.', 5, 1, 'published', false, false, 290]\n        ];\n\n        $stmt = $conn->prepare(\n            \"INSERT INTO articles (title, slug, excerpt, content, category_id, author_id, status, is_featured, is_breaking, views, featured_image, published_at) \" .\n            \"VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, CURRENT_TIMESTAMP - (? || ' hours')::interval) \" .\n            \"ON CONFLICT (slug) DO NOTHING\"\n        );\n\n        foreach ($sampleArticles as $index => $article) {\n            $hoursAgo = 2 + ($index * 2);\n            $stmt->execute([\n                $article[0], // title\n                $article[1], // slug\n                $article[2], // excerpt\n                $article[3], // content\n                $article[4], // category_id\n                $article[5], // author_id\n                $article[6], // status\n                $article[7] ? 't' : 'f', // is_featured\n                $article[8] ? 't' : 'f', // is_breaking\n                $article[9], // views\n                'https://images.pexels.com/photos/28468503/pexels-photo-28468503.jpeg', // featured_image\n                $hoursAgo // hours ago\n            ]);\n        }\n    }\n}\n?>","size_bytes":24349},"includes/auth_check.php":{"content":"<?php\n// Authentication check for admin pages\nrequire_once '../config/config.php';\nrequire_once '../classes/User.php';\n\n$user = new User();\n\n// Check if user is logged in and is admin\nif (!$user->isLoggedIn() || !$user->isAdmin()) {\n    redirect('login.php');\n}\n?>","size_bytes":264},"public/css/admin.css":{"content":"/* Admin Dashboard Styles */\n:root {\n    --primary-color: #667eea;\n    --secondary-color: #764ba2;\n    --sidebar-width: 280px;\n    --topbar-height: 70px;\n    --border-color: #e8ecef;\n    --text-dark: #2d3748;\n    --text-muted: #718096;\n    --bg-light: #f8fafc;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n    background-color: var(--bg-light);\n    color: var(--text-dark);\n    line-height: 1.6;\n}\n\n.admin-wrapper {\n    display: flex;\n    min-height: 100vh;\n}\n\n/* Sidebar Styles */\n.sidebar {\n    width: var(--sidebar-width);\n    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);\n    color: white;\n    position: fixed;\n    height: 100vh;\n    overflow-y: auto;\n    z-index: 1000;\n    transition: transform 0.3s ease;\n}\n\n.sidebar-header {\n    padding: 1.5rem;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n    text-align: center;\n}\n\n.sidebar-header h4 {\n    font-weight: 700;\n    margin-bottom: 0.25rem;\n}\n\n.sidebar-header p {\n    font-size: 0.8rem;\n    opacity: 0.7;\n}\n\n.sidebar-menu {\n    list-style: none;\n    padding: 1rem 0;\n}\n\n.menu-header {\n    font-size: 0.75rem;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n    padding: 1rem 1.5rem 0.5rem;\n    opacity: 0.7;\n    margin-top: 1rem;\n}\n\n.menu-item a {\n    display: flex;\n    align-items: center;\n    padding: 0.75rem 1.5rem;\n    color: rgba(255, 255, 255, 0.9);\n    text-decoration: none;\n    transition: all 0.3s ease;\n    border-left: 3px solid transparent;\n}\n\n.menu-item a:hover {\n    background-color: rgba(255, 255, 255, 0.1);\n    border-left-color: rgba(255, 255, 255, 0.5);\n    color: white;\n}\n\n.menu-item.active a {\n    background-color: rgba(255, 255, 255, 0.15);\n    border-left-color: white;\n    color: white;\n}\n\n.menu-item a i {\n    width: 20px;\n    margin-right: 0.75rem;\n    text-align: center;\n}\n\n.menu-item .badge {\n    margin-left: auto;\n    background-color: rgba(255, 255, 255, 0.2);\n    font-size: 0.7rem;\n}\n\n/* Main Content Styles */\n.main-content {\n    flex: 1;\n    margin-left: var(--sidebar-width);\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n}\n\n.topbar {\n    height: var(--topbar-height);\n    background: white;\n    border-bottom: 1px solid var(--border-color);\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 0 2rem;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n}\n\n.topbar h5 {\n    margin: 0;\n    color: var(--text-dark);\n    font-weight: 600;\n}\n\n.topbar-right {\n    display: flex;\n    align-items: center;\n}\n\n.topbar-right .dropdown-toggle {\n    border: none;\n    background: none;\n    color: var(--text-dark);\n    font-weight: 500;\n    text-decoration: none;\n}\n\n.topbar-right .dropdown-toggle:hover {\n    color: var(--primary-color);\n}\n\n.content-area {\n    flex: 1;\n    padding: 2rem;\n}\n\n/* Statistics Cards */\n.stat-card {\n    background: white;\n    border-radius: 12px;\n    padding: 1.5rem;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n    border: 1px solid var(--border-color);\n    display: flex;\n    align-items: center;\n    transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n.stat-card:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n\n.stat-icon {\n    width: 60px;\n    height: 60px;\n    border-radius: 12px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-right: 1rem;\n    font-size: 1.5rem;\n    color: white;\n}\n\n.stat-icon.bg-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }\n.stat-icon.bg-success { background: linear-gradient(135deg, #56ca00 0%, #2d9918 100%); }\n.stat-icon.bg-warning { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }\n.stat-icon.bg-info { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }\n\n.stat-info h3 {\n    font-size: 2rem;\n    font-weight: 700;\n    margin-bottom: 0.25rem;\n    color: var(--text-dark);\n}\n\n.stat-info p {\n    color: var(--text-muted);\n    font-size: 0.9rem;\n    margin: 0;\n}\n\n/* Quick Actions */\n.quick-action {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-decoration: none;\n    color: var(--text-dark);\n    padding: 1rem;\n    border-radius: 12px;\n    transition: all 0.3s ease;\n    background: white;\n    border: 2px solid var(--border-color);\n}\n\n.quick-action:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n    color: var(--primary-color);\n    border-color: var(--primary-color);\n    text-decoration: none;\n}\n\n.quick-action i {\n    font-size: 2rem;\n    margin-bottom: 0.5rem;\n}\n\n.quick-action span {\n    font-size: 0.85rem;\n    font-weight: 500;\n    text-align: center;\n}\n\n/* Card Styles */\n.card {\n    background: white;\n    border: 1px solid var(--border-color);\n    border-radius: 12px;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n}\n\n.card-header {\n    background: white;\n    border-bottom: 1px solid var(--border-color);\n    padding: 1.25rem 1.5rem;\n    border-radius: 12px 12px 0 0;\n}\n\n.card-title {\n    font-weight: 600;\n    color: var(--text-dark);\n}\n\n.card-body {\n    padding: 1.5rem;\n}\n\n/* Table Styles */\n.table {\n    margin-bottom: 0;\n}\n\n.table th {\n    border-top: none;\n    font-weight: 600;\n    color: var(--text-dark);\n    background-color: var(--bg-light);\n    font-size: 0.85rem;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.table td {\n    vertical-align: middle;\n    border-color: var(--border-color);\n}\n\n.table-hover tbody tr:hover {\n    background-color: rgba(102, 126, 234, 0.05);\n}\n\n/* Button Styles */\n.btn {\n    border-radius: 8px;\n    font-weight: 500;\n    padding: 0.5rem 1rem;\n    transition: all 0.3s ease;\n}\n\n.btn-primary {\n    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);\n    border: none;\n}\n\n.btn-primary:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);\n}\n\n.btn-outline-primary {\n    border-color: var(--primary-color);\n    color: var(--primary-color);\n}\n\n.btn-outline-primary:hover {\n    background: var(--primary-color);\n    border-color: var(--primary-color);\n}\n\n.btn-group-sm .btn {\n    padding: 0.25rem 0.5rem;\n    font-size: 0.8rem;\n}\n\n/* Badge Styles */\n.badge {\n    font-size: 0.75rem;\n    font-weight: 500;\n    border-radius: 6px;\n    padding: 0.35rem 0.65rem;\n}\n\n/* Responsive Design */\n@media (max-width: 991.98px) {\n    .sidebar {\n        transform: translateX(-100%);\n    }\n    \n    .sidebar.active {\n        transform: translateX(0);\n    }\n    \n    .main-content {\n        margin-left: 0;\n    }\n    \n    .sidebar-toggle {\n        display: block !important;\n    }\n    \n    .content-area {\n        padding: 1rem;\n    }\n    \n    .stat-card {\n        margin-bottom: 1rem;\n    }\n}\n\n/* Form Styles */\n.form-control, .form-select {\n    border: 2px solid var(--border-color);\n    border-radius: 8px;\n    padding: 0.75rem 1rem;\n    font-size: 0.95rem;\n    transition: all 0.3s ease;\n}\n\n.form-control:focus, .form-select:focus {\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);\n}\n\n/* Custom Editor Styles */\n.editor-container {\n    border: 2px solid var(--border-color);\n    border-radius: 8px;\n    overflow: hidden;\n}\n\n.editor-toolbar {\n    background-color: var(--bg-light);\n    border-bottom: 1px solid var(--border-color);\n    padding: 0.5rem;\n}\n\n.editor-content {\n    min-height: 300px;\n    padding: 1rem;\n}\n\n/* Media Styles */\n.media-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n    gap: 1rem;\n}\n\n.media-item {\n    border: 2px solid var(--border-color);\n    border-radius: 8px;\n    overflow: hidden;\n    transition: all 0.3s ease;\n    cursor: pointer;\n}\n\n.media-item:hover {\n    border-color: var(--primary-color);\n    transform: translateY(-2px);\n}\n\n.media-item img {\n    width: 100%;\n    height: 150px;\n    object-fit: cover;\n}\n\n.media-info {\n    padding: 0.75rem;\n    background: white;\n}\n\n.media-info h6 {\n    font-size: 0.85rem;\n    margin-bottom: 0.25rem;\n    font-weight: 600;\n}\n\n.media-info small {\n    color: var(--text-muted);\n}\n\n/* Loading Styles */\n.loading {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 2rem;\n}\n\n.spinner-border {\n    width: 3rem;\n    height: 3rem;\n}\n\n/* Alert Styles */\n.alert {\n    border: none;\n    border-radius: 8px;\n    font-size: 0.9rem;\n}\n\n.alert-success {\n    background-color: #d1e7dd;\n    color: #0a3622;\n}\n\n.alert-danger {\n    background-color: #f8d7da;\n    color: #58151c;\n}\n\n.alert-warning {\n    background-color: #fff3cd;\n    color: #664d03;\n}\n\n.alert-info {\n    background-color: #cff4fc;\n    color: #055160;\n}","size_bytes":8755},"public/css/editor.css":{"content":"/* Content Blocks Editor Styles */\n.content-blocks-toolbar {\n    background: #f8f9fa;\n    border: 1px solid #dee2e6;\n    border-radius: 6px 6px 0 0;\n    padding: 1rem;\n    margin-bottom: 0;\n}\n\n.toolbar-buttons {\n    display: flex;\n    gap: 0.5rem;\n    flex-wrap: wrap;\n}\n\n.content-blocks-container {\n    border: 1px solid #dee2e6;\n    border-top: none;\n    border-radius: 0 0 6px 6px;\n    background: white;\n}\n\n.content-block {\n    border-bottom: 2px solid #f8f9fa;\n    position: relative;\n}\n\n.content-block:last-child {\n    border-bottom: none;\n}\n\n.block-header {\n    background: #f8f9fa;\n    padding: 0.75rem 1rem;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid #dee2e6;\n}\n\n.block-type {\n    font-weight: 600;\n    color: #495057;\n    font-size: 0.9rem;\n}\n\n.block-controls {\n    display: flex;\n    gap: 0.25rem;\n}\n\n.block-content {\n    padding: 1rem;\n}\n\n/* Image Upload Styles */\n.image-upload-area {\n    border: 2px dashed #dee2e6;\n    border-radius: 6px;\n    padding: 2rem;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    background: #fafafa;\n}\n\n.image-upload-area:hover {\n    border-color: #007bff;\n    background: #f0f8ff;\n}\n\n.image-upload-area.drag-over {\n    border-color: #007bff;\n    background: #e3f2fd;\n}\n\n.image-upload-area.has-image {\n    padding: 0;\n    border: 1px solid #dee2e6;\n    background: white;\n}\n\n.image-upload-area img {\n    max-width: 100%;\n    height: auto;\n    display: block;\n    border-radius: 4px;\n}\n\n.upload-placeholder i {\n    font-size: 2rem;\n    color: #6c757d;\n    margin-bottom: 1rem;\n}\n\n.upload-progress,\n.upload-error {\n    padding: 2rem;\n    text-align: center;\n}\n\n.upload-error {\n    color: #dc3545;\n}\n\n.upload-error i {\n    font-size: 1.5rem;\n    margin-bottom: 0.5rem;\n}\n\n/* Video Preview Styles */\n.video-preview {\n    background: #f8f9fa;\n    border: 1px solid #dee2e6;\n    border-radius: 4px;\n    padding: 1rem;\n    min-height: 200px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.video-preview iframe,\n.video-preview video {\n    max-width: 100%;\n    border-radius: 4px;\n}\n\n/* Quote Block Styles */\n.quote-block .block-content {\n    background: #f8f9fa;\n}\n\n.quote-block textarea {\n    font-style: italic;\n    font-size: 1.1rem;\n    border: none;\n    background: transparent;\n    resize: vertical;\n}\n\n.quote-block textarea:focus {\n    box-shadow: none;\n    outline: none;\n}\n\n/* Image Input Options */\n.image-input-options .btn-group {\n    width: 100%;\n}\n\n.image-input-options .btn {\n    flex: 1;\n}\n\n.url-option {\n    background: #f8f9fa;\n    border: 1px solid #dee2e6;\n    border-radius: 6px;\n    padding: 1rem;\n}\n\n.url-preview {\n    min-height: 150px;\n    background: white;\n    border: 1px solid #dee2e6;\n    border-radius: 4px;\n    padding: 1rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n}\n\n.url-preview img {\n    max-width: 100%;\n    height: auto;\n}\n\n/* Featured Image Upload */\n.featured-image-upload .upload-area {\n    border: 2px dashed #dee2e6;\n    border-radius: 6px;\n    padding: 2rem;\n    text-align: center;\n    cursor: pointer;\n    transition: all 0.2s ease;\n    background: #fafafa;\n}\n\n.featured-image-upload .upload-area:hover {\n    border-color: #007bff;\n    background: #f0f8ff;\n}\n\n.featured-image-upload .upload-placeholder i {\n    font-size: 2rem;\n    color: #6c757d;\n    margin-bottom: 1rem;\n}\n\n.featured-image-upload .upload-progress,\n.featured-image-upload .upload-error {\n    padding: 2rem;\n    text-align: center;\n}\n\n.featured-image-upload .upload-error {\n    color: #dc3545;\n}\n\n.featured-image-upload .upload-error i {\n    font-size: 1.5rem;\n    margin-bottom: 0.5rem;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .toolbar-buttons {\n        flex-direction: column;\n    }\n    \n    .block-header {\n        flex-direction: column;\n        gap: 0.5rem;\n        align-items: flex-start;\n    }\n    \n    .block-controls {\n        align-self: flex-end;\n    }\n}\n\n/* Custom Text Editor Styles (Legacy) */\n.editor-container {\n    max-width: 100%;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    overflow: hidden;\n    background: white;\n}\n\n.editor-toolbar {\n    background: #f8f9fa;\n    border-bottom: 1px solid #ddd;\n    padding: 10px;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 5px;\n    align-items: center;\n}\n\n.editor-btn {\n    border: none;\n    background: transparent;\n    padding: 8px 10px;\n    border-radius: 4px;\n    cursor: pointer;\n    color: #333;\n    font-size: 14px;\n    transition: all 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-width: 32px;\n    height: 32px;\n}\n\n.editor-btn:hover {\n    background: #e9ecef;\n}\n\n.editor-btn.active {\n    background: #007bff;\n    color: white;\n}\n\n.editor-separator {\n    width: 1px;\n    height: 20px;\n    background: #ddd;\n    margin: 0 5px;\n}\n\n.editor-select {\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    padding: 5px 8px;\n    background: white;\n    font-size: 14px;\n}\n\n.editor-content {\n    min-height: 400px;\n    padding: 15px;\n    outline: none;\n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n    font-size: 16px;\n    line-height: 1.6;\n    color: #333;\n}\n\n.editor-content:empty::before {\n    content: \"Start writing your article...\";\n    color: #999;\n}\n\n.editor-content h1,\n.editor-content h2,\n.editor-content h3,\n.editor-content h4,\n.editor-content h5,\n.editor-content h6 {\n    margin: 1.5em 0 0.5em 0;\n    font-weight: 600;\n}\n\n.editor-content p {\n    margin: 1em 0;\n}\n\n.editor-content ul,\n.editor-content ol {\n    padding-left: 30px;\n    margin: 1em 0;\n}\n\n.editor-content blockquote {\n    border-left: 4px solid #007bff;\n    margin: 1em 0;\n    padding-left: 20px;\n    color: #666;\n    font-style: italic;\n}\n\n.editor-content img {\n    max-width: 100%;\n    height: auto;\n    border-radius: 4px;\n    margin: 1em 0;\n}\n\n.editor-content pre {\n    background: #f8f9fa;\n    padding: 15px;\n    border-radius: 4px;\n    overflow-x: auto;\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-size: 14px;\n}\n\n.editor-content code {\n    background: #f8f9fa;\n    padding: 2px 4px;\n    border-radius: 3px;\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    font-size: 14px;\n}\n\n.editor-content table {\n    width: 100%;\n    border-collapse: collapse;\n    margin: 1em 0;\n}\n\n.editor-content table th,\n.editor-content table td {\n    border: 1px solid #ddd;\n    padding: 8px 12px;\n    text-align: left;\n}\n\n.editor-content table th {\n    background: #f8f9fa;\n    font-weight: 600;\n}\n\n/* Media Upload Area */\n.media-upload-area {\n    border: 2px dashed #ddd;\n    border-radius: 8px;\n    padding: 40px 20px;\n    text-align: center;\n    margin: 20px 0;\n    cursor: pointer;\n    transition: all 0.3s;\n}\n\n.media-upload-area:hover {\n    border-color: #007bff;\n    background: #f8f9fa;\n}\n\n.media-upload-area.dragover {\n    border-color: #007bff;\n    background: #e3f2fd;\n}\n\n.upload-icon {\n    font-size: 48px;\n    color: #ccc;\n    margin-bottom: 15px;\n}\n\n.upload-text {\n    color: #666;\n    font-size: 16px;\n}\n\n.upload-hint {\n    color: #999;\n    font-size: 14px;\n    margin-top: 10px;\n}\n\n/* Modal Styles */\n.editor-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5);\n    z-index: 1000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.editor-modal-content {\n    background: white;\n    border-radius: 8px;\n    padding: 20px;\n    max-width: 500px;\n    width: 90%;\n    max-height: 80vh;\n    overflow-y: auto;\n}\n\n.editor-modal-header {\n    display: flex;\n    justify-content: between;\n    align-items: center;\n    margin-bottom: 20px;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #eee;\n}\n\n.editor-modal-title {\n    font-size: 18px;\n    font-weight: 600;\n    margin: 0;\n}\n\n.editor-modal-close {\n    border: none;\n    background: none;\n    font-size: 24px;\n    cursor: pointer;\n    color: #999;\n    padding: 0;\n    width: 30px;\n    height: 30px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.editor-modal-close:hover {\n    color: #333;\n}","size_bytes":8176},"public/css/style.css":{"content":"/* Modern Professional Newspaper CSS */\n\n/* CSS Variables */\n:root {\n    --primary-red: #c41e3a;\n    --primary-blue: #1e40af;\n    --primary-black: #000000;\n    --secondary-black: #1a1a1a;\n    --text-dark: #2c2c2c;\n    --text-light: #666666;\n    --gray-100: #f8f9fa;\n    --gray-200: #e9ecef;\n    --gray-300: #dee2e6;\n    --border-color: #ddd;\n    --white: #ffffff;\n    --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    --shadow-hover: 0 5px 25px rgba(0, 0, 0, 0.15);\n    --transition: all 0.3s ease;\n\n    /* Typography */\n    --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;\n    --font-mono: 'Monaco', 'Menlo', monospace;\n}\n\n/* Reset & Base Styles */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: var(--font-primary);\n    line-height: 1.6;\n    color: var(--text-dark);\n    background: var(--white);\n    font-size: 16px;\n    overflow-x: hidden;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n    font-family: var(--font-primary);\n    font-weight: 700;\n    line-height: 1.2;\n    margin-bottom: 1rem;\n    color: var(--primary-black) !important;\n}\n\n/* Homepage Headlines - Force Black Color */\n.hero-title a,\n.featured-title a,\n.news-title a,\n.category-title a,\n.trending-title a,\n.popular-title a {\n    color: var(--primary-black) !important;\n    text-decoration: none;\n}\n\n.hero-title a:hover,\n.featured-title a:hover,\n.news-title a:hover,\n.category-title a:hover,\n.trending-title a:hover,\n.popular-title a:hover {\n    color: var(--primary-red) !important;\n    text-decoration: none;\n}\n\n/* Category Badge Styling */\n.category-badge {\n    font-size: 0.9rem !important;\n    padding: 0.4rem 0.8rem !important;\n}\n\n/* Category Header Styling */\n.category-header {\n    background: var(--gray-100);\n    color: var(--primary-black) !important;\n    padding: 1rem 1.5rem;\n    margin-bottom: 1.5rem;\n}\n\nh1 {\n    font-size: 2.5rem;\n}\n\nh2 {\n    font-size: 2rem;\n}\n\nh3 {\n    font-size: 1.5rem;\n}\n\nh4 {\n    font-size: 1.25rem;\n}\n\np {\n    margin-bottom: 1rem;\n    line-height: 1.7;\n}\n\na {\n    color: var(--primary-red);\n    text-decoration: none;\n    transition: var(--transition);\n}\n\na:hover {\n    color: var(--secondary-black);\n    text-decoration: underline;\n}\n\nimg {\n    max-width: 100%;\n    height: auto;\n    display: block;\n}\n\n/* Header Styles */\n.newspaper-header {\n    background: var(--white);\n    box-shadow: var(--shadow);\n    position: sticky;\n    top: 0;\n    z-index: 1000;\n}\n\n.header-top {\n    background: var(--primary-black);\n    color: var(--white);\n    padding: 0.5rem 0;\n}\n\n.logo-section {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 1.5rem 0;\n    border-bottom: 3px solid var(--primary-red);\n}\n\n.newspaper-logo {\n    height: 60px;\n    width: auto;\n}\n\n.current-date {\n    font-family: var(--font-primary);\n    font-size: 1.1rem;\n    font-weight: 500;\n    color: var(--white);\n}\n\n.header-search .input-group {\n    max-width: 300px;\n}\n\n.header-search .form-control {\n    border: 2px solid var(--border-color);\n    border-radius: 0;\n    padding: 0.75rem 1rem;\n}\n\n.header-search .btn {\n    background: var(--primary-red);\n    border: 2px solid var(--primary-red);\n    color: var(--white);\n    border-radius: 0;\n    padding: 0.75rem 1.5rem;\n    font-weight: 600;\n    transition: var(--transition);\n}\n\n.header-search .btn:hover {\n    background: var(--secondary-black);\n    border-color: var(--secondary-black);\n}\n\n/* Navigation */\n.categories-nav {\n    background: var(--gray-100);\n    border-bottom: 1px solid var(--border-color);\n}\n\n.categories-list {\n    display: flex;\n    gap: 0;\n    overflow-x: auto;\n    padding: 0;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n}\n\n.categories-list::-webkit-scrollbar {\n    display: none;\n}\n\n.category-link {\n    display: block;\n    padding: 1rem 1.5rem;\n    color: var(--text-dark);\n    font-weight: 600;\n    font-size: 0.95rem;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    white-space: nowrap;\n    border-bottom: 3px solid transparent;\n    transition: var(--transition);\n}\n\n.category-link:hover,\n.category-link.active {\n    color: var(--primary-red);\n    border-bottom-color: var(--primary-red);\n    background: var(--white);\n    text-decoration: none;\n}\n\n/* Main Content Layout */\n.main-content {\n    padding: 2rem 0;\n    min-height: 70vh;\n}\n\n/* Laptop Screen Optimizations */\n@media (min-width: 1025px) and (max-width: 1600px) {\n    .container-fluid {\n        max-width: 1400px;\n        margin: 0 auto;\n        padding: 0 2rem;\n    }\n    \n    .main-content {\n        padding: 1.5rem 0;\n    }\n    \n    /* Better sidebar proportions */\n    .col-lg-9 {\n        flex: 0 0 70%;\n        max-width: 70%;\n    }\n    \n    .col-lg-3 {\n        flex: 0 0 28%;\n        max-width: 28%;\n        margin-left: 2%;\n    }\n}\n\n/* Article Cards */\n.newspaper-article {\n    background: var(--white);\n    border: 1px solid var(--border-color);\n    border-radius: 8px;\n    overflow: hidden;\n    transition: var(--transition);\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n.newspaper-article:hover {\n    box-shadow: var(--shadow-hover);\n    transform: translateY(-2px);\n}\n\n.article-image {\n    position: relative;\n    overflow: hidden;\n    background: var(--gray-200);\n}\n\n.article-image img {\n    width: 100%;\n    height: 200px;\n    object-fit: cover;\n    transition: var(--transition);\n}\n\n.newspaper-article:hover .article-image img {\n    transform: scale(1.05);\n}\n\n.breaking-badge {\n    position: absolute;\n    top: 1rem;\n    left: 1rem;\n    background: var(--primary-red);\n    color: var(--white);\n    padding: 0.5rem 1rem;\n    font-size: 0.8rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    border-radius: 4px;\n    z-index: 50;\n}\n\n.article-content {\n    padding: 1.5rem;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.article-meta {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    margin-bottom: 1rem;\n    font-size: 0.85rem;\n    color: var(--text-light);\n}\n\n.article-meta .category,\n.category-badge,\n.category-tag,\n.category {\n    background: var(--primary-red) !important;\n    color: var(--white) !important;\n    padding: 0.25rem 0.75rem;\n    border-radius: 12px;\n    font-weight: 600;\n    font-size: 0.75rem;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.article-title {\n    font-family: var(--font-primary);\n    font-size: 1.25rem;\n    font-weight: 700;\n    line-height: 1.3;\n    margin-bottom: 0.75rem;\n    flex: 1;\n}\n\n.article-title a {\n    color: var(--primary-black);\n    text-decoration: none;\n}\n\n.article-title a:hover {\n    color: var(--primary-red);\n}\n\n.article-excerpt {\n    color: var(--text-light);\n    line-height: 1.6;\n    margin-bottom: 1rem;\n    font-size: 0.95rem;\n}\n\n.read-more {\n    color: var(--primary-red);\n    font-weight: 600;\n    font-size: 0.9rem;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n    margin-top: auto;\n}\n\n/* Hero Section */\n.hero-section {\n    margin-bottom: 3rem;\n}\n\n.hero-article {\n    position: relative;\n    border-radius: 12px;\n    overflow: hidden;\n    background: var(--primary-black);\n    color: var(--white) !important;\n    aspect-ratio: 3/2 !important;\n    width: 100% !important;\n    height: auto !important;\n    min-height: unset !important;\n    max-height: unset !important;\n}\n\n/* Laptop Hero Optimizations */\n@media (min-width: 1025px) and (max-width: 1600px) {\n    .hero-article {\n        aspect-ratio: 2.5/1 !important;\n    }\n    \n    .hero-title {\n        font-size: 2.2rem;\n        line-height: 1.2;\n        margin-bottom: 0.8rem;\n    }\n    \n    .hero-excerpt {\n        font-size: 1.1rem;\n        line-height: 1.5;\n        margin-bottom: 1rem;\n    }\n    \n    .hero-content {\n        padding: 1.5rem;\n    }\n    \n    /* Secondary featured articles optimization */\n    .secondary-featured .featured-item {\n        margin-bottom: 1rem;\n    }\n    \n    .secondary-featured .featured-title {\n        font-size: 1rem;\n        line-height: 1.3;\n        margin-bottom: 0.3rem;\n    }\n    \n    .secondary-featured .featured-excerpt {\n        font-size: 0.85rem;\n        line-height: 1.4;\n    }\n}\n\n.hero-image {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 1;\n    overflow: hidden;\n}\n\n.hero-image::after {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(135deg, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.2) 60%, rgba(0, 0, 0, 0.8) 100%);\n    z-index: 2;\n}\n\n.hero-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.hero-content {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    padding: 2rem;\n    z-index: 3;\n    background: linear-gradient(transparent 0%, rgba(0, 0, 0, 0.8) 100%);\n}\n\n.hero-title {\n    font-size: 3rem;\n    font-weight: 800;\n    line-height: 1.1;\n    margin-bottom: 1rem;\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n    color: var(--white) !important;\n}\n\n.hero-title a {\n    color: var(--white) !important;\n    text-decoration: none;\n}\n\n.hero-title a:hover {\n    color: var(--white) !important;\n    opacity: 0.9;\n}\n\n.hero-excerpt {\n    font-size: 1.2rem;\n    line-height: 1.6;\n    margin-bottom: 1.5rem;\n    opacity: 0.95;\n    color: var(--white) !important;\n}\n\n.hero-meta {\n    display: flex;\n    align-items: center;\n    gap: 2rem;\n    font-size: 0.95rem;\n    opacity: 0.9;\n    color: var(--white) !important;\n}\n\n/* Section Titles */\n.section-title {\n    font-family: var(--font-primary);\n    font-size: 2rem;\n    font-weight: 800;\n    color: var(--primary-black);\n    text-transform: uppercase;\n    letter-spacing: 1px;\n    padding: 1rem 0;\n    border-bottom: 4px solid var(--primary-red);\n    margin-bottom: 2rem;\n    position: relative;\n}\n\n.section-title::after {\n    content: '';\n    position: absolute;\n    bottom: -4px;\n    left: 0;\n    width: 60px;\n    height: 4px;\n    background: var(--secondary-black);\n}\n\n/* Grid Layouts */\n.news-grid {\n    display: block;\n    margin-bottom: 3rem;\n}\n\n.featured-large {\n    background: var(--gray-100);\n}\n\n/* Better spacing for news cards */\n.news-card {\n    width: 100%;\n    display: block;\n}\n\n@media (max-width: 768px) {\n    .container {\n        padding: 0 1rem;\n    }\n\n    .featured-large {\n        grid-column: span 1;\n    }\n\n    .hero-article h1 {\n        font-size: 1.75rem !important;\n        line-height: 1.3;\n    }\n\n    .category-articles .row {\n        flex-direction: column;\n    }\n\n    .category-item {\n        margin-bottom: 1.5rem;\n    }\n\n    .news-grid {\n        grid-template-columns: 1fr;\n        gap: 1rem;\n    }\n\n    .section-title {\n        font-size: 1.5rem !important;\n        margin-bottom: 1rem;\n    }\n\n    .main-sidebar {\n        margin-top: 2rem;\n    }\n\n    .nav-menu {\n        flex-direction: column;\n        gap: 1rem;\n        text-align: center;\n    }\n\n    .trending-item {\n        padding: 1rem;\n        flex-direction: column;\n        text-align: center;\n    }\n}\n\n/* Navigation scrollbar fix */\n.categories-nav {\n    overflow: hidden;\n}\n\n.categories-scroll-container {\n    overflow-x: auto;\n    overflow-y: hidden;\n    scrollbar-width: none;\n    /* Firefox */\n    -ms-overflow-style: none;\n    /* Internet Explorer 10+ */\n}\n\n.categories-scroll-container::-webkit-scrollbar {\n    display: none;\n    /* WebKit */\n}\n\n/* Section spacing improvements */\n.category-section {\n    margin-bottom: 3rem;\n    padding: 2rem 0;\n    border-bottom: 1px solid var(--gray-200);\n}\n\n.latest-news-section {\n    margin-bottom: 3rem;\n    padding: 2rem 0;\n}\n\n.hero-section {\n    padding: 2rem 0;\n    margin-bottom: 3rem;\n}\n\n/* Laptop Section Optimizations */\n@media (min-width: 1025px) and (max-width: 1600px) {\n    .category-section {\n        margin-bottom: 2rem;\n        padding: 1.5rem 0;\n    }\n    \n    .latest-news-section {\n        margin-bottom: 2rem;\n        padding: 1.5rem 0;\n    }\n    \n    .hero-section {\n        padding: 1.5rem 0;\n        margin-bottom: 2rem;\n    }\n    \n    .section-header {\n        margin-bottom: 1.2rem;\n    }\n    \n    .section-title {\n        font-size: 1.8rem;\n        margin-bottom: 1rem;\n    }\n    \n    .view-all-link {\n        font-size: 0.9rem;\n    }\n}\n\n/* Article spacing */\n.news-card,\n.category-item,\n.featured-item,\n.popular-item {\n    margin-bottom: 1.5rem !important;\n    padding-bottom: 1rem;\n    border-bottom: 1px solid var(--gray-300);\n    background: transparent;\n}\n\n/* Laptop optimized article sizes */\n@media (min-width: 1025px) and (max-width: 1600px) {\n    .news-card,\n    .category-item,\n    .featured-item {\n        margin-bottom: 1.2rem !important;\n        padding-bottom: 0.8rem;\n    }\n    \n    .news-card .news-content,\n    .category-item .category-content,\n    .featured-item .featured-content {\n        padding: 0.5rem 0;\n    }\n    \n    .news-title,\n    .category-title,\n    .featured-title {\n        font-size: 1.1rem;\n        line-height: 1.3;\n        margin-bottom: 0.5rem;\n    }\n    \n    .news-excerpt,\n    .category-excerpt,\n    .featured-excerpt {\n        font-size: 0.9rem;\n        line-height: 1.5;\n        margin-bottom: 0.5rem;\n    }\n    \n    .news-meta,\n    .article-meta {\n        font-size: 0.8rem;\n        margin-bottom: 0.5rem;\n    }\n    \n    .news-footer {\n        margin-top: 0.5rem;\n        font-size: 0.8rem;\n    }\n}\n\n.news-card:hover,\n.category-item:hover,\n.featured-item:hover,\n.popular-item:hover {\n    border-bottom-color: var(--primary-red);\n    transition: all 0.3s ease;\n}\n\n/* Tablet responsive design */\n@media (min-width: 769px) and (max-width: 1024px) {\n    .container {\n        max-width: 95%;\n    }\n\n    .featured-grid {\n        grid-template-columns: repeat(2, 1fr);\n        gap: 1.5rem;\n    }\n\n    .news-grid {\n        grid-template-columns: repeat(1, 1fr);\n        gap: 1.5rem;\n    }\n\n    .hero-article h1 {\n        font-size: 2rem !important;\n    }\n\n    .category-articles .col-md-4 {\n        flex: 0 0 100%;\n        max-width: 100%;\n    }\n\n    .category-articles .col-md-8 {\n        flex: 0 0 100%;\n        max-width: 100%;\n    }\n}\n\n.news-card {\n    height: 100%;\n}\n\n/* Breaking News Ticker */\n.breaking-news-banner {\n    background: var(--primary-red);\n    color: var(--white);\n    padding: 1rem 0;\n    margin-bottom: 2rem;\n    overflow: hidden;\n    position: relative;\n}\n\n.breaking-ticker {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    width: 100%;\n}\n\n.breaking-label {\n    background: var(--primary-black);\n    color: var(--white);\n    padding: 0.5rem 1rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n    border-radius: 4px;\n    flex-shrink: 0;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    z-index: 500;\n}\n\n.breaking-content {\n    display: flex;\n    gap: 3rem;\n    animation: scroll 30s linear infinite;\n    align-items: center;\n    flex: 1;\n}\n\n.breaking-item {\n    color: var(--white) !important;\n    text-decoration: none;\n    font-weight: 600;\n    white-space: nowrap;\n    z-index: 10 !important;\n}\n\n.breaking-item:hover {\n    color: #f0f0f0 !important;\n    text-decoration: underline;\n}\n\n@keyframes scroll {\n    0% {\n        transform: translateX(100%);\n    }\n\n    100% {\n        transform: translateX(-100%);\n    }\n}\n\n/* Footer */\n.footer {\n    background: var(--primary-black);\n    color: var(--white);\n    padding: 3rem 0 1rem;\n    margin-top: 4rem;\n}\n\n.footer h5 {\n    color: var(--white);\n    margin-bottom: 1rem;\n    font-family: var(--font-primary);\n}\n\n.footer a {\n    color: var(--gray-300);\n    text-decoration: none;\n    transition: var(--transition);\n}\n\n.footer a:hover {\n    color: var(--white);\n}\n\n.footer-bottom {\n    border-top: 1px solid var(--text-light);\n    padding-top: 1rem;\n    margin-top: 2rem;\n    text-align: center;\n    color: var(--gray-300);\n}\n\n/* Sidebar Widgets */\n.sidebar-widget {\n    background: var(--white);\n    border: 1px solid var(--border-color);\n    border-radius: 8px;\n    padding: 1.5rem;\n    margin-bottom: 2rem;\n    box-shadow: var(--shadow);\n}\n\n/* Laptop Sidebar Optimizations */\n@media (min-width: 1025px) and (max-width: 1600px) {\n    .sidebar-widget {\n        padding: 1.2rem;\n        margin-bottom: 1.5rem;\n    }\n    \n    .widget-title {\n        font-size: 1.1rem;\n        margin-bottom: 1rem;\n    }\n    \n    .trending-item {\n        padding: 0.8rem 0;\n    }\n    \n    .trending-title {\n        font-size: 0.9rem;\n        line-height: 1.3;\n        margin-bottom: 0.3rem;\n    }\n    \n    .popular-item {\n        padding: 0.8rem 0;\n    }\n    \n    .popular-title {\n        font-size: 0.9rem;\n        line-height: 1.3;\n        margin-bottom: 0.3rem;\n    }\n    \n    .newsletter-widget p {\n        font-size: 0.9rem;\n        margin-bottom: 1rem;\n    }\n}\n\n.widget-title {\n    font-family: var(--font-primary);\n    font-size: 1.25rem;\n    font-weight: 700;\n    color: var(--primary-black);\n    border-bottom: 2px solid var(--primary-red);\n    padding-bottom: 0.5rem;\n    margin-bottom: 1.5rem;\n}\n\n/* Trending Items Styling */\n.trending-item {\n    display: flex;\n    gap: 1rem;\n    align-items: flex-start;\n    padding: 1rem 0;\n    border-bottom: 1px solid var(--gray-200);\n}\n\n.trending-item:last-child {\n    border-bottom: none;\n}\n\n.trending-number {\n    background: var(--primary-red);\n    color: var(--white);\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.85rem;\n    font-weight: 700;\n    flex-shrink: 0;\n}\n\n.trending-content {\n    flex: 1;\n}\n\n.trending-title {\n    font-size: 0.95rem;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-bottom: 0.5rem;\n}\n\n.trending-meta {\n    display: flex;\n    gap: 1rem;\n    font-size: 0.8rem;\n    color: var(--text-light);\n}\n\n/* Popular Items Styling */\n.popular-item {\n    padding: 1rem 0;\n    border-bottom: 1px solid var(--gray-200);\n}\n\n.popular-item:last-child {\n    border-bottom: none;\n}\n\n.popular-title {\n    font-size: 0.95rem;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-bottom: 0.5rem;\n}\n\n.popular-meta {\n    display: flex;\n    gap: 1rem;\n    font-size: 0.8rem;\n    color: var(--text-light);\n}\n\n.popular-article {\n    display: flex;\n    gap: 1rem;\n    padding: 1rem 0;\n    border-bottom: 1px solid var(--gray-200);\n}\n\n.popular-article:last-child {\n    border-bottom: none;\n}\n\n.popular-image {\n    width: 80px;\n    height: 60px;\n    border-radius: 4px;\n    overflow: hidden;\n    flex-shrink: 0;\n}\n\n.popular-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.popular-content {\n    flex: 1;\n}\n\n.popular-title {\n    font-size: 0.9rem;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-bottom: 0.25rem;\n}\n\n.popular-title a {\n    color: var(--text-dark);\n}\n\n.popular-title a:hover {\n    color: var(--primary-red);\n}\n\n.popular-meta {\n    font-size: 0.8rem;\n    color: var(--text-light);\n}\n\n/* Article Page Specific */\n.article-header {\n    background: var(--gray-100);\n    padding: 3rem 0;\n    margin-bottom: 2rem;\n}\n\n.article-header h1 {\n    font-size: 3rem;\n    line-height: 1.2;\n    margin-bottom: 1rem;\n}\n\n.article-header .lead {\n    font-size: 1.25rem;\n    color: var(--text-light);\n    margin-bottom: 2rem;\n}\n\n.article-body {\n    background: var(--white);\n    padding: 3rem 0;\n}\n\n.article-content-body {\n    font-size: 1.1rem;\n    line-height: 1.8;\n    color: var(--text-dark);\n}\n\n.article-content-body p {\n    margin-bottom: 1.5rem;\n}\n\n.article-content-body h2,\n.article-content-body h3 {\n    margin-top: 2rem;\n    margin-bottom: 1rem;\n}\n\n/* Comments Section */\n.comments-section {\n    background: var(--gray-100);\n    padding: 3rem 0;\n    margin-top: 3rem;\n}\n\n.comments-container {\n    background: var(--white);\n    border-radius: 12px;\n    padding: 2rem;\n    box-shadow: var(--shadow);\n}\n\n.comments-title {\n    font-family: var(--font-primary);\n    color: var(--primary-black);\n    border-bottom: 3px solid var(--primary-red);\n    padding-bottom: 1rem;\n    margin-bottom: 2rem;\n}\n\n.comment-form-section {\n    background: var(--gray-100);\n    padding: 1.5rem;\n    border-radius: 8px;\n    margin-bottom: 2rem;\n}\n\n.comment-item {\n    border: 1px solid var(--border-color);\n    border-radius: 8px;\n    padding: 1.5rem;\n    margin-bottom: 1rem;\n    background: var(--white);\n    transition: var(--transition);\n}\n\n.comment-item:hover {\n    box-shadow: var(--shadow);\n}\n\n/* Category Controls */\n.category-controls {\n    background: var(--gray-100);\n    padding: 1.5rem;\n    border-radius: 8px;\n    border: 1px solid var(--border-color);\n    margin-bottom: 2rem;\n}\n\n/* Responsive Design */\n@media (max-width: 1400px) {\n    .hero-article {\n        aspect-ratio: 3/2 !important;\n        width: 100% !important;\n        height: auto !important;\n        min-height: unset !important;\n        max-height: unset !important;\n    }\n}\n\n/* Fix for 1300-990px range where layout stacks */\n@media (max-width: 1300px) and (min-width: 991px) {\n    .col-lg-6 {\n        flex: 0 0 100% !important;\n        max-width: 100% !important;\n    }\n    \n    .col-lg-9 {\n        flex: 0 0 100% !important;\n        max-width: 100% !important;\n    }\n    \n    .col-lg-3 {\n        flex: 0 0 100% !important;\n        max-width: 100% !important;\n        margin-top: 2rem;\n    }\n}\n\n@media (max-width: 1200px) {\n    .news-grid {\n        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n        gap: 1.5rem;\n    }\n\n    .hero-article {\n        aspect-ratio: 3/2 !important;\n        width: 100% !important;\n        height: auto !important;\n        min-height: unset !important;\n        max-height: unset !important;\n    }\n}\n\n@media (max-width: 768px) {\n    .header-top {\n        padding: 0.25rem 0;\n    }\n    \n    .logo-section {\n        flex-direction: column;\n        text-align: center;\n        gap: 0.5rem;\n        padding: 0.75rem 0;\n    }\n    \n    .newspaper-logo {\n        height: 35px;\n    }\n\n    .current-date {\n        order: -1;\n        font-size: 0.8rem;\n        margin-bottom: 0.25rem;\n    }\n\n    .header-search {\n        width: 100%;\n        max-width: none;\n    }\n    \n    .header-search .input-group {\n        max-width: none;\n    }\n    \n    .header-search .form-control {\n        padding: 0.5rem 0.75rem;\n        font-size: 0.9rem;\n    }\n    \n    .header-search .btn {\n        padding: 0.5rem 1rem;\n    }\n    \n    .categories-nav {\n        padding: 0.5rem 0;\n    }\n\n    .hero-article {\n        aspect-ratio: 3/2 !important;\n        width: 100% !important;\n        height: auto !important;\n        min-height: unset !important;\n        max-height: unset !important;\n    }\n\n    .hero-title {\n        font-size: 1.5rem;\n    }\n\n    .hero-content {\n        padding: 1.5rem;\n    }\n    \n    .breaking-news-banner {\n        padding: 0.5rem 0;\n    }\n    \n    .breaking-label {\n        padding: 0.25rem 0.5rem;\n        font-size: 0.75rem;\n    }\n\n    .section-title {\n        font-size: 1.5rem;\n    }\n\n    .news-grid {\n        grid-template-columns: 1fr;\n        gap: 1rem;\n    }\n\n    .categories-list {\n        gap: 0;\n    }\n\n    .category-link {\n        padding: 0.75rem 1rem;\n        font-size: 0.85rem;\n    }\n\n    .article-header h1 {\n        font-size: 2rem;\n    }\n\n    .article-header .lead {\n        font-size: 1.1rem;\n    }\n}\n\n@media (max-width: 480px) {\n    .main-content {\n        padding: 1rem 0;\n    }\n\n    .hero-title {\n        font-size: 1.75rem;\n    }\n\n    .hero-excerpt {\n        font-size: 1rem;\n    }\n\n    .article-content {\n        padding: 1rem;\n    }\n\n    .sidebar-widget {\n        padding: 1rem;\n    }\n\n    .comments-container {\n        padding: 1rem;\n    }\n}\n\n/* Utility Classes */\n.text-center {\n    text-align: center;\n}\n\n.text-left {\n    text-align: left;\n}\n\n.text-right {\n    text-align: right;\n}\n\n.mb-0 {\n    margin-bottom: 0;\n}\n\n.mb-1 {\n    margin-bottom: 0.5rem;\n}\n\n.mb-2 {\n    margin-bottom: 1rem;\n}\n\n.mb-3 {\n    margin-bottom: 1.5rem;\n}\n\n.mb-4 {\n    margin-bottom: 2rem;\n}\n\n.mt-0 {\n    margin-top: 0;\n}\n\n.mt-1 {\n    margin-top: 0.5rem;\n}\n\n.mt-2 {\n    margin-top: 1rem;\n}\n\n.mt-3 {\n    margin-top: 1.5rem;\n}\n\n.mt-4 {\n    margin-top: 2rem;\n}\n\n.d-none {\n    display: none;\n}\n\n.d-block {\n    display: block;\n}\n\n.d-flex {\n    display: flex;\n}\n\n.justify-content-center {\n    justify-content: center;\n}\n\n.align-items-center {\n    align-items: center;\n}\n\n.gap-1 {\n    gap: 0.5rem;\n}\n\n.gap-2 {\n    gap: 1rem;\n}\n\n.gap-3 {\n    gap: 1.5rem;\n}\n\n/* Cache busting comment - Mon Sep  8 06:07:22 AM UTC 2025 */","size_bytes":24268},"public/js/admin.js":{"content":"// Admin Dashboard JavaScript\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Sidebar Toggle\n    const sidebarToggle = document.querySelector('.sidebar-toggle');\n    const sidebar = document.querySelector('.sidebar');\n    \n    if (sidebarToggle && sidebar) {\n        sidebarToggle.addEventListener('click', function() {\n            sidebar.classList.toggle('active');\n        });\n    }\n    \n    // Auto-hide alerts after 5 seconds\n    const alerts = document.querySelectorAll('.alert');\n    alerts.forEach(function(alert) {\n        setTimeout(function() {\n            if (alert.classList.contains('alert-dismissible')) {\n                alert.style.opacity = '0';\n                setTimeout(function() {\n                    alert.remove();\n                }, 300);\n            }\n        }, 5000);\n    });\n    \n    // Confirm delete actions\n    const deleteButtons = document.querySelectorAll('[data-confirm]');\n    deleteButtons.forEach(function(button) {\n        button.addEventListener('click', function(e) {\n            const message = this.getAttribute('data-confirm') || 'Are you sure?';\n            if (!confirm(message)) {\n                e.preventDefault();\n            }\n        });\n    });\n    \n    // Dynamic slug generation\n    const titleField = document.querySelector('#title');\n    const slugField = document.querySelector('#slug');\n    \n    if (titleField && slugField) {\n        titleField.addEventListener('input', function() {\n            const title = this.value;\n            const slug = title.toLowerCase()\n                .replace(/[^a-z0-9\\s-]/g, '')\n                .replace(/\\s+/g, '-')\n                .replace(/-+/g, '-')\n                .trim('-');\n            slugField.value = slug;\n        });\n    }\n    \n    // Character counter for meta description\n    const metaDescription = document.querySelector('#meta_description');\n    if (metaDescription) {\n        const counter = document.createElement('small');\n        counter.className = 'text-muted';\n        metaDescription.parentNode.appendChild(counter);\n        \n        function updateCounter() {\n            const length = metaDescription.value.length;\n            const recommended = 160;\n            counter.textContent = `${length}/${recommended} characters`;\n            \n            if (length > recommended) {\n                counter.className = 'text-warning';\n            } else if (length > recommended - 20) {\n                counter.className = 'text-info';\n            } else {\n                counter.className = 'text-muted';\n            }\n        }\n        \n        metaDescription.addEventListener('input', updateCounter);\n        updateCounter();\n    }\n    \n    // Preview functionality\n    const previewButtons = document.querySelectorAll('.preview-btn');\n    previewButtons.forEach(function(button) {\n        button.addEventListener('click', function(e) {\n            e.preventDefault();\n            const url = this.getAttribute('href');\n            window.open(url, 'preview', 'width=1200,height=800,scrollbars=yes');\n        });\n    });\n    \n    // Auto-save functionality for forms\n    const autoSaveForms = document.querySelectorAll('[data-autosave]');\n    autoSaveForms.forEach(function(form) {\n        let autoSaveTimer;\n        const inputs = form.querySelectorAll('input, textarea, select');\n        \n        inputs.forEach(function(input) {\n            input.addEventListener('input', function() {\n                clearTimeout(autoSaveTimer);\n                autoSaveTimer = setTimeout(function() {\n                    // Auto-save logic here\n                    console.log('Auto-saving...');\n                }, 3000);\n            });\n        });\n    });\n    \n    // Image upload preview\n    const imageInputs = document.querySelectorAll('input[type=\"file\"][accept*=\"image\"]');\n    imageInputs.forEach(function(input) {\n        input.addEventListener('change', function() {\n            const file = this.files[0];\n            if (file) {\n                const reader = new FileReader();\n                reader.onload = function(e) {\n                    let preview = input.parentNode.querySelector('.image-preview');\n                    if (!preview) {\n                        preview = document.createElement('div');\n                        preview.className = 'image-preview mt-2';\n                        input.parentNode.appendChild(preview);\n                    }\n                    preview.innerHTML = `<img src=\"${e.target.result}\" style=\"max-width: 200px; max-height: 200px; border-radius: 8px;\">`;\n                };\n                reader.readAsDataURL(file);\n            }\n        });\n    });\n    \n    // Sortable functionality for layout management\n    if (typeof Sortable !== 'undefined') {\n        const sortableElements = document.querySelectorAll('.sortable');\n        sortableElements.forEach(function(element) {\n            new Sortable(element, {\n                handle: '.drag-handle',\n                animation: 150,\n                onEnd: function() {\n                    // Update order logic here\n                    console.log('Order updated');\n                }\n            });\n        });\n    }\n    \n    // Rich text editor integration\n    const editorElements = document.querySelectorAll('.rich-editor');\n    editorElements.forEach(function(element) {\n        // Initialize rich text editor here\n        // This will be replaced with the CodePen editor\n    });\n    \n    // Toast notifications\n    function showToast(message, type = 'info') {\n        const toast = document.createElement('div');\n        toast.className = `alert alert-${type} toast-notification`;\n        toast.style.cssText = `\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            z-index: 9999;\n            min-width: 300px;\n            animation: slideIn 0.3s ease;\n        `;\n        toast.textContent = message;\n        \n        document.body.appendChild(toast);\n        \n        setTimeout(function() {\n            toast.style.animation = 'slideOut 0.3s ease';\n            setTimeout(function() {\n                toast.remove();\n            }, 300);\n        }, 3000);\n    }\n    \n    // Add CSS animations for toast\n    const style = document.createElement('style');\n    style.textContent = `\n        @keyframes slideIn {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        \n        @keyframes slideOut {\n            from { transform: translateX(0); opacity: 1; }\n            to { transform: translateX(100%); opacity: 0; }\n        }\n    `;\n    document.head.appendChild(style);\n    \n    // Expose toast function globally\n    window.showToast = showToast;\n    \n    // Form validation\n    const forms = document.querySelectorAll('form[data-validate]');\n    forms.forEach(function(form) {\n        form.addEventListener('submit', function(e) {\n            const requiredFields = form.querySelectorAll('[required]');\n            let isValid = true;\n            \n            requiredFields.forEach(function(field) {\n                if (!field.value.trim()) {\n                    field.classList.add('is-invalid');\n                    isValid = false;\n                } else {\n                    field.classList.remove('is-invalid');\n                }\n            });\n            \n            if (!isValid) {\n                e.preventDefault();\n                showToast('Please fill in all required fields', 'error');\n            }\n        });\n    });\n    \n    // Search functionality\n    const searchInputs = document.querySelectorAll('.search-input');\n    searchInputs.forEach(function(input) {\n        let searchTimer;\n        input.addEventListener('input', function() {\n            clearTimeout(searchTimer);\n            const query = this.value;\n            const target = this.getAttribute('data-target');\n            \n            searchTimer = setTimeout(function() {\n                if (target) {\n                    // Perform search\n                    console.log(`Searching for: ${query} in ${target}`);\n                }\n            }, 500);\n        });\n    });\n});","size_bytes":8132},"public/js/editor.js":{"content":"/**\n * Professional Rich Text Editor\n * Custom implementation inspired by modern news platforms\n */\nclass ProfessionalEditor {\n    constructor(containerId, options = {}) {\n        this.container = document.getElementById(containerId);\n        this.options = {\n            height: '400px',\n            placeholder: 'Start writing your article...',\n            ...options\n        };\n        \n        this.init();\n        this.bindEvents();\n    }\n\n    init() {\n        // Create editor structure\n        this.container.innerHTML = `\n            <div class=\"editor-container\">\n                <div class=\"editor-toolbar\">\n                    <select class=\"editor-select\" data-command=\"formatBlock\">\n                        <option value=\"p\">Paragraph</option>\n                        <option value=\"h1\">Heading 1</option>\n                        <option value=\"h2\">Heading 2</option>\n                        <option value=\"h3\">Heading 3</option>\n                        <option value=\"h4\">Heading 4</option>\n                        <option value=\"h5\">Heading 5</option>\n                        <option value=\"h6\">Heading 6</option>\n                    </select>\n                    \n                    <div class=\"editor-separator\"></div>\n                    \n                    <button type=\"button\" class=\"editor-btn\" data-command=\"bold\" title=\"Bold\">\n                        <i class=\"fas fa-bold\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"italic\" title=\"Italic\">\n                        <i class=\"fas fa-italic\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"underline\" title=\"Underline\">\n                        <i class=\"fas fa-underline\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"strikeThrough\" title=\"Strikethrough\">\n                        <i class=\"fas fa-strikethrough\"></i>\n                    </button>\n                    \n                    <div class=\"editor-separator\"></div>\n                    \n                    <button type=\"button\" class=\"editor-btn\" data-command=\"justifyLeft\" title=\"Align Left\">\n                        <i class=\"fas fa-align-left\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"justifyCenter\" title=\"Align Center\">\n                        <i class=\"fas fa-align-center\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"justifyRight\" title=\"Align Right\">\n                        <i class=\"fas fa-align-right\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"justifyFull\" title=\"Justify\">\n                        <i class=\"fas fa-align-justify\"></i>\n                    </button>\n                    \n                    <div class=\"editor-separator\"></div>\n                    \n                    <button type=\"button\" class=\"editor-btn\" data-command=\"insertUnorderedList\" title=\"Bullet List\">\n                        <i class=\"fas fa-list-ul\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"insertOrderedList\" title=\"Numbered List\">\n                        <i class=\"fas fa-list-ol\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"outdent\" title=\"Decrease Indent\">\n                        <i class=\"fas fa-outdent\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"indent\" title=\"Increase Indent\">\n                        <i class=\"fas fa-indent\"></i>\n                    </button>\n                    \n                    <div class=\"editor-separator\"></div>\n                    \n                    <button type=\"button\" class=\"editor-btn\" data-command=\"createLink\" title=\"Insert Link\">\n                        <i class=\"fas fa-link\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"unlink\" title=\"Remove Link\">\n                        <i class=\"fas fa-unlink\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"insertImage\" title=\"Insert Image\">\n                        <i class=\"fas fa-image\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"insertTable\" title=\"Insert Table\">\n                        <i class=\"fas fa-table\"></i>\n                    </button>\n                    \n                    <div class=\"editor-separator\"></div>\n                    \n                    <button type=\"button\" class=\"editor-btn\" data-command=\"formatBlock\" data-value=\"blockquote\" title=\"Quote\">\n                        <i class=\"fas fa-quote-left\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"insertHorizontalRule\" title=\"Insert Horizontal Line\">\n                        <i class=\"fas fa-minus\"></i>\n                    </button>\n                    \n                    <div class=\"editor-separator\"></div>\n                    \n                    <button type=\"button\" class=\"editor-btn\" data-command=\"undo\" title=\"Undo\">\n                        <i class=\"fas fa-undo\"></i>\n                    </button>\n                    <button type=\"button\" class=\"editor-btn\" data-command=\"redo\" title=\"Redo\">\n                        <i class=\"fas fa-redo\"></i>\n                    </button>\n                    \n                    <button type=\"button\" class=\"editor-btn\" data-command=\"removeFormat\" title=\"Clear Formatting\">\n                        <i class=\"fas fa-eraser\"></i>\n                    </button>\n                    \n                    <div class=\"editor-separator\"></div>\n                    \n                    <button type=\"button\" class=\"editor-btn\" data-command=\"viewSource\" title=\"View Source\">\n                        <i class=\"fas fa-code\"></i>\n                    </button>\n                </div>\n                \n                <div class=\"editor-content\" contenteditable=\"true\" style=\"min-height: ${this.options.height}\"></div>\n            </div>\n        `;\n\n        this.toolbar = this.container.querySelector('.editor-toolbar');\n        this.content = this.container.querySelector('.editor-content');\n        this.sourceMode = false;\n    }\n\n    bindEvents() {\n        // Toolbar button events\n        this.toolbar.addEventListener('click', (e) => {\n            if (e.target.classList.contains('editor-btn') || e.target.closest('.editor-btn')) {\n                e.preventDefault();\n                const btn = e.target.classList.contains('editor-btn') ? e.target : e.target.closest('.editor-btn');\n                const command = btn.getAttribute('data-command');\n                const value = btn.getAttribute('data-value');\n                \n                this.executeCommand(command, value);\n            }\n        });\n\n        // Format block select\n        this.toolbar.addEventListener('change', (e) => {\n            if (e.target.classList.contains('editor-select')) {\n                const command = e.target.getAttribute('data-command');\n                const value = e.target.value;\n                this.executeCommand(command, value);\n            }\n        });\n\n        // Update toolbar state on selection change\n        this.content.addEventListener('keyup', () => this.updateToolbarState());\n        this.content.addEventListener('mouseup', () => this.updateToolbarState());\n\n        // Handle paste events\n        this.content.addEventListener('paste', (e) => {\n            e.preventDefault();\n            const text = (e.clipboardData || window.clipboardData).getData('text/plain');\n            document.execCommand('insertText', false, text);\n        });\n\n        // Auto-save functionality\n        this.content.addEventListener('input', () => {\n            if (this.options.autoSave) {\n                clearTimeout(this.autoSaveTimer);\n                this.autoSaveTimer = setTimeout(() => {\n                    this.save();\n                }, 2000);\n            }\n        });\n    }\n\n    executeCommand(command, value = null) {\n        this.content.focus();\n\n        switch (command) {\n            case 'createLink':\n                this.insertLink();\n                break;\n            case 'insertImage':\n                this.insertImage();\n                break;\n            case 'insertTable':\n                this.insertTable();\n                break;\n            case 'viewSource':\n                this.toggleSourceMode();\n                break;\n            default:\n                document.execCommand(command, false, value);\n                break;\n        }\n\n        this.updateToolbarState();\n    }\n\n    insertLink() {\n        const selection = window.getSelection();\n        const selectedText = selection.toString();\n        const url = prompt('Enter the URL:', 'https://');\n        \n        if (url) {\n            if (selectedText) {\n                document.execCommand('createLink', false, url);\n            } else {\n                const linkText = prompt('Enter link text:', 'Link');\n                if (linkText) {\n                    const link = `<a href=\"${url}\" target=\"_blank\">${linkText}</a>`;\n                    document.execCommand('insertHTML', false, link);\n                }\n            }\n        }\n    }\n\n    insertImage() {\n        const url = prompt('Enter image URL:', 'https://');\n        if (url) {\n            const alt = prompt('Enter alt text (optional):', '');\n            const img = `<img src=\"${url}\" alt=\"${alt}\" style=\"max-width: 100%; height: auto;\">`;\n            document.execCommand('insertHTML', false, img);\n        }\n    }\n\n    insertTable() {\n        const rows = prompt('Number of rows:', '3');\n        const cols = prompt('Number of columns:', '3');\n        \n        if (rows && cols) {\n            let tableHTML = '<table class=\"table table-bordered\"><tbody>';\n            \n            for (let i = 0; i < parseInt(rows); i++) {\n                tableHTML += '<tr>';\n                for (let j = 0; j < parseInt(cols); j++) {\n                    tableHTML += i === 0 ? '<th>Header</th>' : '<td>Cell</td>';\n                }\n                tableHTML += '</tr>';\n            }\n            \n            tableHTML += '</tbody></table>';\n            document.execCommand('insertHTML', false, tableHTML);\n        }\n    }\n\n    toggleSourceMode() {\n        if (this.sourceMode) {\n            // Switch back to visual mode\n            const sourceText = this.content.textContent;\n            this.content.innerHTML = sourceText;\n            this.content.contentEditable = true;\n            this.sourceMode = false;\n        } else {\n            // Switch to source mode\n            const htmlContent = this.content.innerHTML;\n            this.content.textContent = htmlContent;\n            this.content.contentEditable = true;\n            this.sourceMode = true;\n        }\n    }\n\n    updateToolbarState() {\n        // Update button active states\n        const buttons = this.toolbar.querySelectorAll('.editor-btn[data-command]');\n        buttons.forEach(btn => {\n            const command = btn.getAttribute('data-command');\n            if (['bold', 'italic', 'underline', 'strikeThrough'].includes(command)) {\n                btn.classList.toggle('active', document.queryCommandState(command));\n            }\n        });\n\n        // Update format select\n        const formatSelect = this.toolbar.querySelector('select[data-command=\"formatBlock\"]');\n        if (formatSelect) {\n            const format = document.queryCommandValue('formatBlock').toLowerCase();\n            formatSelect.value = format || 'p';\n        }\n    }\n\n    getContent() {\n        return this.content.innerHTML;\n    }\n\n    setContent(html) {\n        this.content.innerHTML = html;\n    }\n\n    save() {\n        // Override this method to implement auto-save functionality\n        if (this.options.onSave) {\n            this.options.onSave(this.getContent());\n        }\n    }\n}\n\n// Media Upload Handler\nclass MediaUploader {\n    constructor(options = {}) {\n        this.options = {\n            maxSize: 5 * 1024 * 1024, // 5MB\n            allowedTypes: ['image/jpeg', 'image/png', 'image/gif', 'image/webp'],\n            ...options\n        };\n    }\n\n    createUploadArea(container) {\n        const uploadArea = document.createElement('div');\n        uploadArea.className = 'media-upload-area';\n        uploadArea.innerHTML = `\n            <div class=\"upload-icon\">\n                <i class=\"fas fa-cloud-upload-alt\"></i>\n            </div>\n            <div class=\"upload-text\">Click or drag files to upload</div>\n            <div class=\"upload-hint\">Maximum file size: ${this.options.maxSize / (1024 * 1024)}MB</div>\n            <input type=\"file\" style=\"display: none;\" accept=\"${this.options.allowedTypes.join(',')}\" multiple>\n        `;\n\n        const fileInput = uploadArea.querySelector('input[type=\"file\"]');\n        \n        uploadArea.addEventListener('click', () => fileInput.click());\n        uploadArea.addEventListener('dragover', (e) => {\n            e.preventDefault();\n            uploadArea.classList.add('dragover');\n        });\n        uploadArea.addEventListener('dragleave', () => {\n            uploadArea.classList.remove('dragover');\n        });\n        uploadArea.addEventListener('drop', (e) => {\n            e.preventDefault();\n            uploadArea.classList.remove('dragover');\n            this.handleFiles(e.dataTransfer.files);\n        });\n        \n        fileInput.addEventListener('change', (e) => {\n            this.handleFiles(e.target.files);\n        });\n\n        container.appendChild(uploadArea);\n        return uploadArea;\n    }\n\n    handleFiles(files) {\n        Array.from(files).forEach(file => {\n            if (this.validateFile(file)) {\n                this.uploadFile(file);\n            }\n        });\n    }\n\n    validateFile(file) {\n        if (!this.options.allowedTypes.includes(file.type)) {\n            alert(`File type ${file.type} is not allowed`);\n            return false;\n        }\n\n        if (file.size > this.options.maxSize) {\n            alert(`File size exceeds ${this.options.maxSize / (1024 * 1024)}MB limit`);\n            return false;\n        }\n\n        return true;\n    }\n\n    uploadFile(file) {\n        // Create a simple base64 preview for now\n        // In production, you'd upload to your server\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            const img = `<img src=\"${e.target.result}\" alt=\"${file.name}\" style=\"max-width: 100%; height: auto; border-radius: 4px; margin: 10px 0;\">`;\n            \n            // Insert into editor if one is focused\n            const activeEditor = document.querySelector('.editor-content:focus');\n            if (activeEditor) {\n                document.execCommand('insertHTML', false, img);\n            }\n        };\n        reader.readAsDataURL(file);\n    }\n}\n\n// Initialize when DOM is loaded\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Auto-initialize editors\n    const editorContainers = document.querySelectorAll('[data-editor]');\n    editorContainers.forEach(container => {\n        new ProfessionalEditor(container.id, {\n            height: container.dataset.height || '400px',\n            autoSave: container.dataset.autosave === 'true'\n        });\n    });\n\n    // Initialize media uploader\n    window.mediaUploader = new MediaUploader();\n});","size_bytes":15622},"public/js/main.js":{"content":"// Main Frontend JavaScript\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Smooth scrolling for anchor links\n    const anchorLinks = document.querySelectorAll('a[href^=\"#\"]');\n    anchorLinks.forEach(link => {\n        link.addEventListener('click', function(e) {\n            e.preventDefault();\n            const target = document.querySelector(this.getAttribute('href'));\n            if (target) {\n                target.scrollIntoView({\n                    behavior: 'smooth'\n                });\n            }\n        });\n    });\n    \n    // Lazy loading for images\n    const images = document.querySelectorAll('img[data-src]');\n    const imageObserver = new IntersectionObserver((entries, observer) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                const img = entry.target;\n                img.src = img.dataset.src;\n                img.removeAttribute('data-src');\n                observer.unobserve(img);\n            }\n        });\n    });\n    \n    images.forEach(img => imageObserver.observe(img));\n    \n    // Search functionality\n    const searchForm = document.querySelector('form[action=\"search.php\"]');\n    const searchInput = searchForm?.querySelector('input[name=\"q\"]');\n    \n    if (searchInput) {\n        searchInput.addEventListener('input', debounce(function() {\n            const query = this.value.trim();\n            if (query.length > 2) {\n                // Show search suggestions\n                showSearchSuggestions(query);\n            } else {\n                hideSearchSuggestions();\n            }\n        }, 300));\n    }\n    \n    // Debounce function\n    function debounce(func, wait) {\n        let timeout;\n        return function executedFunction(...args) {\n            const later = () => {\n                clearTimeout(timeout);\n                func(...args);\n            };\n            clearTimeout(timeout);\n            timeout = setTimeout(later, wait);\n        };\n    }\n    \n    // Search suggestions\n    function showSearchSuggestions(query) {\n        // This would typically make an AJAX request to get suggestions\n        console.log('Getting suggestions for:', query);\n    }\n    \n    function hideSearchSuggestions() {\n        const suggestions = document.querySelector('.search-suggestions');\n        if (suggestions) {\n            suggestions.remove();\n        }\n    }\n    \n    // Social sharing\n    const shareButtons = document.querySelectorAll('.share-btn');\n    shareButtons.forEach(button => {\n        button.addEventListener('click', function(e) {\n            e.preventDefault();\n            const url = this.dataset.url || window.location.href;\n            const title = this.dataset.title || document.title;\n            const platform = this.dataset.platform;\n            \n            shareArticle(platform, url, title);\n        });\n    });\n    \n    function shareArticle(platform, url, title) {\n        const shareUrls = {\n            facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`,\n            twitter: `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`,\n            linkedin: `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`,\n            whatsapp: `https://api.whatsapp.com/send?text=${encodeURIComponent(title + ' ' + url)}`\n        };\n        \n        if (shareUrls[platform]) {\n            window.open(shareUrls[platform], 'share', 'width=600,height=400');\n        }\n    }\n    \n    // Reading progress indicator\n    const progressBar = document.querySelector('.reading-progress');\n    if (progressBar) {\n        window.addEventListener('scroll', function() {\n            const winHeight = window.innerHeight;\n            const docHeight = document.documentElement.scrollHeight;\n            const scrollTop = window.pageYOffset;\n            const progress = (scrollTop / (docHeight - winHeight)) * 100;\n            \n            progressBar.style.width = Math.min(progress, 100) + '%';\n        });\n    }\n    \n    // Back to top button\n    const backToTopBtn = document.createElement('button');\n    backToTopBtn.innerHTML = '<i class=\"fas fa-chevron-up\"></i>';\n    backToTopBtn.className = 'back-to-top';\n    backToTopBtn.style.cssText = `\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        width: 50px;\n        height: 50px;\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n        color: white;\n        border: none;\n        border-radius: 50%;\n        cursor: pointer;\n        opacity: 0;\n        transition: all 0.3s ease;\n        z-index: 1000;\n        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);\n    `;\n    document.body.appendChild(backToTopBtn);\n    \n    window.addEventListener('scroll', function() {\n        if (window.pageYOffset > 300) {\n            backToTopBtn.style.opacity = '1';\n            backToTopBtn.style.transform = 'scale(1)';\n        } else {\n            backToTopBtn.style.opacity = '0';\n            backToTopBtn.style.transform = 'scale(0.8)';\n        }\n    });\n    \n    backToTopBtn.addEventListener('click', function() {\n        window.scrollTo({\n            top: 0,\n            behavior: 'smooth'\n        });\n    });\n    \n    // Dark mode toggle (if implemented)\n    const darkModeToggle = document.querySelector('.dark-mode-toggle');\n    if (darkModeToggle) {\n        darkModeToggle.addEventListener('click', function() {\n            document.body.classList.toggle('dark-mode');\n            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));\n        });\n        \n        // Check for saved dark mode preference\n        if (localStorage.getItem('darkMode') === 'true') {\n            document.body.classList.add('dark-mode');\n        }\n    }\n    \n    // Newsletter subscription\n    const newsletterForm = document.querySelector('.newsletter-form');\n    if (newsletterForm) {\n        newsletterForm.addEventListener('submit', function(e) {\n            e.preventDefault();\n            const email = this.querySelector('input[type=\"email\"]').value;\n            \n            // Basic email validation\n            if (!isValidEmail(email)) {\n                showNotification('Please enter a valid email address', 'error');\n                return;\n            }\n            \n            // Submit newsletter subscription\n            subscribeToNewsletter(email);\n        });\n    }\n    \n    function isValidEmail(email) {\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n        return emailRegex.test(email);\n    }\n    \n    function subscribeToNewsletter(email) {\n        // This would typically make an AJAX request\n        console.log('Subscribing email:', email);\n        showNotification('Thank you for subscribing!', 'success');\n    }\n    \n    // Notification system\n    function showNotification(message, type = 'info') {\n        const notification = document.createElement('div');\n        notification.className = `notification notification-${type}`;\n        notification.style.cssText = `\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 1rem 1.5rem;\n            background: white;\n            border-radius: 8px;\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n            z-index: 9999;\n            max-width: 400px;\n            animation: slideIn 0.3s ease;\n        `;\n        \n        const colors = {\n            success: '#28a745',\n            error: '#dc3545',\n            warning: '#ffc107',\n            info: '#17a2b8'\n        };\n        \n        notification.style.borderLeft = `4px solid ${colors[type]}`;\n        notification.textContent = message;\n        \n        document.body.appendChild(notification);\n        \n        setTimeout(() => {\n            notification.style.animation = 'slideOut 0.3s ease';\n            setTimeout(() => notification.remove(), 300);\n        }, 3000);\n    }\n    \n    // Add CSS animations for notifications\n    const style = document.createElement('style');\n    style.textContent = `\n        @keyframes slideIn {\n            from { transform: translateX(100%); opacity: 0; }\n            to { transform: translateX(0); opacity: 1; }\n        }\n        \n        @keyframes slideOut {\n            from { transform: translateX(0); opacity: 1; }\n            to { transform: translateX(100%); opacity: 0; }\n        }\n        \n        .back-to-top:hover {\n            transform: translateY(-2px) scale(1.05) !important;\n        }\n    `;\n    document.head.appendChild(style);\n    \n    // Performance monitoring\n    if ('performance' in window) {\n        window.addEventListener('load', function() {\n            const perfData = performance.timing;\n            const loadTime = perfData.loadEventEnd - perfData.navigationStart;\n            console.log('Page load time:', loadTime + 'ms');\n        });\n    }\n    \n    // Console welcome message\n    console.log('%cðŸ—žï¸ Professional News Portal', 'font-size: 20px; font-weight: bold; color: #667eea;');\n    console.log('%cWelcome to the admin panel at /admin/login.php', 'color: #764ba2;');\n});","size_bytes":9093},"admin/upload-image.php":{"content":"<?php\nrequire_once '../includes/auth_check.php';\n\nheader('Content-Type: application/json');\n\nif ($_FILES && isset($_FILES['image'])) {\n    $upload_dir = '../public/images/articles/';\n    \n    // Create directory if it doesn't exist\n    if (!file_exists($upload_dir)) {\n        mkdir($upload_dir, 0755, true);\n    }\n    \n    $file = $_FILES['image'];\n    $file_extension = strtolower(pathinfo($file['name'], PATHINFO_EXTENSION));\n    $allowed_extensions = ['jpg', 'jpeg', 'png', 'gif', 'webp'];\n    \n    // Validate file type\n    if (!in_array($file_extension, $allowed_extensions)) {\n        echo json_encode(['success' => false, 'message' => 'Invalid file type. Only JPG, PNG, GIF, and WebP allowed.']);\n        exit;\n    }\n    \n    // Validate file size (5MB max)\n    if ($file['size'] > 5 * 1024 * 1024) {\n        echo json_encode(['success' => false, 'message' => 'File too large. Maximum size is 5MB.']);\n        exit;\n    }\n    \n    // Generate unique filename\n    $filename = uniqid() . '.' . $file_extension;\n    $file_path = $upload_dir . $filename;\n    \n    if (move_uploaded_file($file['tmp_name'], $file_path)) {\n        $public_url = '/public/images/articles/' . $filename;\n        echo json_encode([\n            'success' => true, \n            'url' => $public_url,\n            'filename' => $filename\n        ]);\n    } else {\n        echo json_encode(['success' => false, 'message' => 'Upload failed.']);\n    }\n} else {\n    echo json_encode(['success' => false, 'message' => 'No file uploaded.']);\n}\n?>","size_bytes":1517},"classes/Comment.php":{"content":"<?php\nrequire_once __DIR__ . '/../config/config.php';\n\nclass Comment {\n    private $conn;\n    private $table = 'comments';\n\n    public function __construct() {\n        $database = new Database();\n        $this->conn = $database->getConnection();\n        if (!$this->conn) {\n            throw new Exception(\"Database connection failed\");\n        }\n    }\n\n    public function getCommentsByArticle($article_id, $status = 'approved') {\n        $query = \"SELECT * FROM \" . $this->table . \" \n                  WHERE article_id = ? AND status = ? AND parent_id IS NULL\n                  ORDER BY created_at DESC\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$article_id, $status]);\n        $comments = $stmt->fetchAll(PDO::FETCH_ASSOC);\n        \n        // Get replies for each comment\n        foreach ($comments as &$comment) {\n            $comment['replies'] = $this->getReplies($comment['id'], $status);\n        }\n        \n        return $comments;\n    }\n\n    public function getReplies($parent_id, $status = 'approved') {\n        $query = \"SELECT * FROM \" . $this->table . \" \n                  WHERE parent_id = ? AND status = ?\n                  ORDER BY created_at ASC\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$parent_id, $status]);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    public function create($data) {\n        $query = \"INSERT INTO \" . $this->table . \" \n                  (article_id, author_name, author_email, content, parent_id, status)\n                  VALUES (?, ?, ?, ?, ?, ?)\";\n        \n        $stmt = $this->conn->prepare($query);\n        return $stmt->execute([\n            $data['article_id'],\n            $data['author_name'],\n            $data['author_email'],\n            $data['content'],\n            $data['parent_id'] ?? null,\n            $data['status'] ?? 'pending'\n        ]);\n    }\n\n    public function getCommentCount($article_id) {\n        $query = \"SELECT COUNT(*) FROM \" . $this->table . \" \n                  WHERE article_id = ? AND status = 'approved'\";\n        \n        $stmt = $this->conn->prepare($query);\n        $stmt->execute([$article_id]);\n        return $stmt->fetchColumn();\n    }\n\n    public function getAllComments($limit = 50, $offset = 0, $status = null) {\n        $where_clause = $status ? \"WHERE status = ?\" : \"\";\n        $query = \"SELECT c.*, a.title as article_title, a.slug as article_slug\n                  FROM \" . $this->table . \" c\n                  LEFT JOIN articles a ON c.article_id = a.id\n                  $where_clause\n                  ORDER BY c.created_at DESC\n                  LIMIT ? OFFSET ?\";\n        \n        $params = $status ? [$status, $limit, $offset] : [$limit, $offset];\n        $stmt = $this->conn->prepare($query);\n        $stmt->execute($params);\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n\n    public function updateStatus($id, $status) {\n        $query = \"UPDATE \" . $this->table . \" SET status = ? WHERE id = ?\";\n        $stmt = $this->conn->prepare($query);\n        return $stmt->execute([$status, $id]);\n    }\n\n    public function delete($id) {\n        $query = \"DELETE FROM \" . $this->table . \" WHERE id = ?\";\n        $stmt = $this->conn->prepare($query);\n        return $stmt->execute([$id]);\n    }\n}\n?>","size_bytes":3297},"public/js/content-blocks.js":{"content":"// Content Blocks Editor System\nclass ContentBlocksEditor {\n    constructor(container) {\n        this.container = container;\n        this.blocks = [];\n        this.blockCounter = 0;\n        this.init();\n    }\n    \n    init() {\n        this.container.innerHTML = '';\n        this.createToolbar();\n        this.createBlocksContainer();\n        this.addTextBlock(); // Start with one text block\n    }\n    \n    createToolbar() {\n        const toolbar = document.createElement('div');\n        toolbar.className = 'content-blocks-toolbar';\n        toolbar.innerHTML = `\n            <div class=\"toolbar-buttons\">\n                <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" onclick=\"contentEditor.addTextBlock()\">\n                    <i class=\"fas fa-paragraph\"></i> Add Text\n                </button>\n                <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" onclick=\"contentEditor.addImageBlock()\">\n                    <i class=\"fas fa-image\"></i> Add Image\n                </button>\n                <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" onclick=\"contentEditor.addVideoBlock()\">\n                    <i class=\"fas fa-video\"></i> Add Video\n                </button>\n                <button type=\"button\" class=\"btn btn-sm btn-outline-primary\" onclick=\"contentEditor.addQuoteBlock()\">\n                    <i class=\"fas fa-quote-left\"></i> Add Quote\n                </button>\n            </div>\n        `;\n        this.container.appendChild(toolbar);\n    }\n    \n    createBlocksContainer() {\n        this.blocksContainer = document.createElement('div');\n        this.blocksContainer.className = 'content-blocks-container';\n        this.container.appendChild(this.blocksContainer);\n    }\n    \n    addTextBlock(content = '') {\n        const blockId = 'block_' + (++this.blockCounter);\n        const block = document.createElement('div');\n        block.className = 'content-block text-block';\n        block.dataset.blockId = blockId;\n        block.dataset.blockType = 'text';\n        \n        block.innerHTML = `\n            <div class=\"block-header\">\n                <span class=\"block-type\">Text Block</span>\n                <div class=\"block-controls\">\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"contentEditor.moveBlockUp('${blockId}')\">\n                        <i class=\"fas fa-arrow-up\"></i>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"contentEditor.moveBlockDown('${blockId}')\">\n                        <i class=\"fas fa-arrow-down\"></i>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" onclick=\"contentEditor.removeBlock('${blockId}')\">\n                        <i class=\"fas fa-trash\"></i>\n                    </button>\n                </div>\n            </div>\n            <div class=\"block-content\">\n                <textarea class=\"form-control\" rows=\"8\" placeholder=\"Enter your content here...\" \n                          name=\"blocks[${blockId}][content]\">${content}</textarea>\n                <input type=\"hidden\" name=\"blocks[${blockId}][type]\" value=\"text\">\n            </div>\n        `;\n        \n        this.blocksContainer.appendChild(block);\n        this.blocks.push(blockId);\n        return blockId;\n    }\n    \n    addImageBlock(imageUrl = '', caption = '') {\n        const blockId = 'block_' + (++this.blockCounter);\n        const block = document.createElement('div');\n        block.className = 'content-block image-block';\n        block.dataset.blockId = blockId;\n        block.dataset.blockType = 'image';\n        \n        block.innerHTML = `\n            <div class=\"block-header\">\n                <span class=\"block-type\">Image Block</span>\n                <div class=\"block-controls\">\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"contentEditor.moveBlockUp('${blockId}')\">\n                        <i class=\"fas fa-arrow-up\"></i>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"contentEditor.moveBlockDown('${blockId}')\">\n                        <i class=\"fas fa-arrow-down\"></i>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" onclick=\"contentEditor.removeBlock('${blockId}')\">\n                        <i class=\"fas fa-trash\"></i>\n                    </button>\n                </div>\n            </div>\n            <div class=\"block-content\">\n                <!-- Image Input Options -->\n                <div class=\"image-input-options mb-3\">\n                    <div class=\"btn-group\" role=\"group\">\n                        <input type=\"radio\" class=\"btn-check\" name=\"imageSource_${blockId}\" id=\"upload_${blockId}_radio\" value=\"upload\" checked>\n                        <label class=\"btn btn-outline-primary\" for=\"upload_${blockId}_radio\">\n                            <i class=\"fas fa-upload\"></i> Upload Image\n                        </label>\n                        \n                        <input type=\"radio\" class=\"btn-check\" name=\"imageSource_${blockId}\" id=\"url_${blockId}_radio\" value=\"url\">\n                        <label class=\"btn btn-outline-primary\" for=\"url_${blockId}_radio\">\n                            <i class=\"fas fa-link\"></i> Image URL\n                        </label>\n                    </div>\n                </div>\n                \n                <!-- Upload Option -->\n                <div class=\"upload-option\" id=\"uploadOption_${blockId}\">\n                    <div class=\"image-upload-area ${imageUrl ? 'has-image' : ''}\" id=\"upload_${blockId}\">\n                        ${imageUrl ? `<img src=\"${imageUrl}\" alt=\"Uploaded image\">` : ''}\n                        <div class=\"upload-placeholder\">\n                            <i class=\"fas fa-cloud-upload-alt\"></i>\n                            <p>Click to upload image or drag and drop</p>\n                            <p class=\"text-muted\">Max size: 5MB (JPG, PNG, GIF, WebP)</p>\n                        </div>\n                    </div>\n                    <input type=\"file\" id=\"file_${blockId}\" accept=\"image/*\" style=\"display: none;\" \n                           onchange=\"contentEditor.handleImageUpload('${blockId}', this)\">\n                </div>\n                \n                <!-- URL Option -->\n                <div class=\"url-option\" id=\"urlOption_${blockId}\" style=\"display: none;\">\n                    <div class=\"input-group mb-2\">\n                        <input type=\"text\" class=\"form-control\" id=\"imageUrl_${blockId}\" \n                               placeholder=\"Enter image URL (e.g., https://example.com/image.jpg)\" \n                               value=\"${imageUrl}\">\n                        <button type=\"button\" class=\"btn btn-outline-secondary\" \n                                onclick=\"contentEditor.loadImageFromUrl('${blockId}')\">\n                            <i class=\"fas fa-eye\"></i> Preview\n                        </button>\n                    </div>\n                    <div class=\"url-preview\" id=\"urlPreview_${blockId}\">\n                        ${imageUrl ? `<img src=\"${imageUrl}\" alt=\"URL image preview\" style=\"max-width: 100%; height: auto;\">` : '<p class=\"text-muted\">Enter URL and click Preview to see image</p>'}\n                    </div>\n                </div>\n                \n                <input type=\"hidden\" name=\"blocks[${blockId}][type]\" value=\"image\">\n                <input type=\"hidden\" name=\"blocks[${blockId}][url]\" value=\"${imageUrl}\" id=\"url_${blockId}\">\n                <div class=\"mt-2\">\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Image caption (optional)\" \n                           name=\"blocks[${blockId}][caption]\" value=\"${caption}\">\n                </div>\n            </div>\n        `;\n        \n        this.blocksContainer.appendChild(block);\n        this.blocks.push(blockId);\n        \n        // Set up image source toggle\n        const uploadRadio = block.querySelector(`#upload_${blockId}_radio`);\n        const urlRadio = block.querySelector(`#url_${blockId}_radio`);\n        const uploadOption = block.querySelector(`#uploadOption_${blockId}`);\n        const urlOption = block.querySelector(`#urlOption_${blockId}`);\n        \n        uploadRadio.onchange = () => {\n            if (uploadRadio.checked) {\n                uploadOption.style.display = 'block';\n                urlOption.style.display = 'none';\n            }\n        };\n        \n        urlRadio.onchange = () => {\n            if (urlRadio.checked) {\n                uploadOption.style.display = 'none';\n                urlOption.style.display = 'block';\n            }\n        };\n        \n        // Set up click handler for upload area\n        const uploadArea = block.querySelector('.image-upload-area');\n        const fileInput = block.querySelector(`#file_${blockId}`);\n        \n        uploadArea.onclick = () => fileInput.click();\n        \n        // Set up drag and drop\n        uploadArea.ondragover = (e) => {\n            e.preventDefault();\n            uploadArea.classList.add('drag-over');\n        };\n        \n        uploadArea.ondragleave = () => {\n            uploadArea.classList.remove('drag-over');\n        };\n        \n        uploadArea.ondrop = (e) => {\n            e.preventDefault();\n            uploadArea.classList.remove('drag-over');\n            const files = e.dataTransfer.files;\n            if (files.length > 0) {\n                fileInput.files = files;\n                this.handleImageUpload(blockId, fileInput);\n            }\n        };\n        \n        return blockId;\n    }\n    \n    addVideoBlock(videoUrl = '', caption = '') {\n        const blockId = 'block_' + (++this.blockCounter);\n        const block = document.createElement('div');\n        block.className = 'content-block video-block';\n        block.dataset.blockId = blockId;\n        block.dataset.blockType = 'video';\n        \n        block.innerHTML = `\n            <div class=\"block-header\">\n                <span class=\"block-type\">Video Block</span>\n                <div class=\"block-controls\">\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"contentEditor.moveBlockUp('${blockId}')\">\n                        <i class=\"fas fa-arrow-up\"></i>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"contentEditor.moveBlockDown('${blockId}')\">\n                        <i class=\"fas fa-arrow-down\"></i>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" onclick=\"contentEditor.removeBlock('${blockId}')\">\n                        <i class=\"fas fa-trash\"></i>\n                    </button>\n                </div>\n            </div>\n            <div class=\"block-content\">\n                <div class=\"mb-2\">\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Video URL (YouTube, Vimeo, etc.)\" \n                           name=\"blocks[${blockId}][url]\" value=\"${videoUrl}\" \n                           onchange=\"contentEditor.updateVideoPreview('${blockId}', this.value)\">\n                </div>\n                <div class=\"video-preview\" id=\"preview_${blockId}\">\n                    ${videoUrl ? this.generateVideoEmbed(videoUrl) : '<p class=\"text-muted\">Enter video URL to see preview</p>'}\n                </div>\n                <input type=\"hidden\" name=\"blocks[${blockId}][type]\" value=\"video\">\n                <div class=\"mt-2\">\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Video caption (optional)\" \n                           name=\"blocks[${blockId}][caption]\" value=\"${caption}\">\n                </div>\n            </div>\n        `;\n        \n        this.blocksContainer.appendChild(block);\n        this.blocks.push(blockId);\n        return blockId;\n    }\n    \n    addQuoteBlock(quote = '', author = '') {\n        const blockId = 'block_' + (++this.blockCounter);\n        const block = document.createElement('div');\n        block.className = 'content-block quote-block';\n        block.dataset.blockId = blockId;\n        block.dataset.blockType = 'quote';\n        \n        block.innerHTML = `\n            <div class=\"block-header\">\n                <span class=\"block-type\">Quote Block</span>\n                <div class=\"block-controls\">\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"contentEditor.moveBlockUp('${blockId}')\">\n                        <i class=\"fas fa-arrow-up\"></i>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-secondary\" onclick=\"contentEditor.moveBlockDown('${blockId}')\">\n                        <i class=\"fas fa-arrow-down\"></i>\n                    </button>\n                    <button type=\"button\" class=\"btn btn-sm btn-outline-danger\" onclick=\"contentEditor.removeBlock('${blockId}')\">\n                        <i class=\"fas fa-trash\"></i>\n                    </button>\n                </div>\n            </div>\n            <div class=\"block-content\">\n                <textarea class=\"form-control mb-2\" rows=\"4\" placeholder=\"Enter quote text...\" \n                          name=\"blocks[${blockId}][content]\">${quote}</textarea>\n                <input type=\"text\" class=\"form-control\" placeholder=\"Quote author (optional)\" \n                       name=\"blocks[${blockId}][author]\" value=\"${author}\">\n                <input type=\"hidden\" name=\"blocks[${blockId}][type]\" value=\"quote\">\n            </div>\n        `;\n        \n        this.blocksContainer.appendChild(block);\n        this.blocks.push(blockId);\n        return blockId;\n    }\n    \n    async handleImageUpload(blockId, fileInput) {\n        const file = fileInput.files[0];\n        if (!file) return;\n        \n        const uploadArea = document.getElementById(`upload_${blockId}`);\n        const urlInput = document.getElementById(`url_${blockId}`);\n        \n        uploadArea.innerHTML = '<div class=\"upload-progress\"><i class=\"fas fa-spinner fa-spin\"></i> Uploading...</div>';\n        \n        const formData = new FormData();\n        formData.append('image', file);\n        \n        try {\n            const response = await fetch('upload-image.php', {\n                method: 'POST',\n                body: formData\n            });\n            \n            const result = await response.json();\n            \n            if (result.success) {\n                uploadArea.innerHTML = `<img src=\"${result.url}\" alt=\"Uploaded image\">`;\n                uploadArea.classList.add('has-image');\n                urlInput.value = result.url;\n            } else {\n                uploadArea.innerHTML = `\n                    <div class=\"upload-error\">\n                        <i class=\"fas fa-exclamation-triangle\"></i>\n                        <p>Upload failed: ${result.message}</p>\n                    </div>\n                `;\n                setTimeout(() => {\n                    uploadArea.innerHTML = `\n                        <div class=\"upload-placeholder\">\n                            <i class=\"fas fa-cloud-upload-alt\"></i>\n                            <p>Click to upload image or drag and drop</p>\n                            <p class=\"text-muted\">Max size: 5MB (JPG, PNG, GIF, WebP)</p>\n                        </div>\n                    `;\n                    uploadArea.classList.remove('has-image');\n                }, 3000);\n            }\n        } catch (error) {\n            uploadArea.innerHTML = `\n                <div class=\"upload-error\">\n                    <i class=\"fas fa-exclamation-triangle\"></i>\n                    <p>Upload failed: Network error</p>\n                </div>\n            `;\n        }\n    }\n    \n    loadImageFromUrl(blockId) {\n        const imageUrlInput = document.getElementById(`imageUrl_${blockId}`);\n        const urlPreview = document.getElementById(`urlPreview_${blockId}`);\n        const hiddenUrlInput = document.getElementById(`url_${blockId}`);\n        \n        const imageUrl = imageUrlInput.value.trim();\n        \n        if (!imageUrl) {\n            urlPreview.innerHTML = '<p class=\"text-muted\">Please enter an image URL</p>';\n            return;\n        }\n        \n        // Basic URL validation\n        try {\n            new URL(imageUrl);\n        } catch {\n            urlPreview.innerHTML = '<p class=\"text-danger\">Please enter a valid URL</p>';\n            return;\n        }\n        \n        // Check if it's likely an image URL\n        const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.webp', '.svg', '.bmp'];\n        const hasImageExtension = imageExtensions.some(ext => \n            imageUrl.toLowerCase().includes(ext)\n        );\n        \n        if (!hasImageExtension && !imageUrl.includes('unsplash.com') && !imageUrl.includes('imgur.com') && !imageUrl.includes('pixabay.com')) {\n            const proceed = confirm('This URL might not be an image. Do you want to try loading it anyway?');\n            if (!proceed) return;\n        }\n        \n        urlPreview.innerHTML = '<div class=\"text-center\"><i class=\"fas fa-spinner fa-spin\"></i> Loading image...</div>';\n        \n        // Create image element to test if URL works\n        const img = new Image();\n        \n        img.onload = function() {\n            urlPreview.innerHTML = `<img src=\"${imageUrl}\" alt=\"URL image preview\" style=\"max-width: 100%; height: auto; border: 1px solid #dee2e6; border-radius: 4px;\">`;\n            hiddenUrlInput.value = imageUrl;\n        };\n        \n        img.onerror = function() {\n            urlPreview.innerHTML = `\n                <div class=\"text-danger\">\n                    <i class=\"fas fa-exclamation-triangle\"></i>\n                    <p>Failed to load image from this URL</p>\n                    <p class=\"small\">Please check the URL or try a different image</p>\n                </div>\n            `;\n        };\n        \n        img.src = imageUrl;\n    }\n    \n    updateVideoPreview(blockId, url) {\n        const preview = document.getElementById(`preview_${blockId}`);\n        if (url) {\n            preview.innerHTML = this.generateVideoEmbed(url);\n        } else {\n            preview.innerHTML = '<p class=\"text-muted\">Enter video URL to see preview</p>';\n        }\n    }\n    \n    generateVideoEmbed(url) {\n        // Handle YouTube URLs\n        const youtubeMatch = url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([a-zA-Z0-9_-]+)/);\n        if (youtubeMatch) {\n            return `<iframe width=\"100%\" height=\"315\" src=\"https://www.youtube.com/embed/${youtubeMatch[1]}\" \n                    frameborder=\"0\" allowfullscreen></iframe>`;\n        }\n        \n        // Handle Vimeo URLs\n        const vimeoMatch = url.match(/vimeo\\.com\\/(\\d+)/);\n        if (vimeoMatch) {\n            return `<iframe width=\"100%\" height=\"315\" src=\"https://player.vimeo.com/video/${vimeoMatch[1]}\" \n                    frameborder=\"0\" allowfullscreen></iframe>`;\n        }\n        \n        // Fallback for other video URLs\n        return `<video width=\"100%\" controls>\n                    <source src=\"${url}\" type=\"video/mp4\">\n                    Your browser does not support the video tag.\n                </video>`;\n    }\n    \n    moveBlockUp(blockId) {\n        const block = document.querySelector(`[data-block-id=\"${blockId}\"]`);\n        const prevBlock = block.previousElementSibling;\n        if (prevBlock) {\n            block.parentNode.insertBefore(block, prevBlock);\n        }\n    }\n    \n    moveBlockDown(blockId) {\n        const block = document.querySelector(`[data-block-id=\"${blockId}\"]`);\n        const nextBlock = block.nextElementSibling;\n        if (nextBlock) {\n            block.parentNode.insertBefore(nextBlock, block);\n        }\n    }\n    \n    removeBlock(blockId) {\n        if (this.blocks.length <= 1) {\n            alert('You must have at least one content block.');\n            return;\n        }\n        \n        if (confirm('Are you sure you want to remove this block?')) {\n            const block = document.querySelector(`[data-block-id=\"${blockId}\"]`);\n            block.remove();\n            this.blocks = this.blocks.filter(id => id !== blockId);\n        }\n    }\n    \n    getContent() {\n        const blocks = [];\n        const blockElements = this.blocksContainer.querySelectorAll('.content-block');\n        \n        blockElements.forEach(block => {\n            const blockId = block.dataset.blockId;\n            const blockType = block.dataset.blockType;\n            const blockData = { type: blockType, id: blockId };\n            \n            switch (blockType) {\n                case 'text':\n                    blockData.content = block.querySelector('textarea').value;\n                    break;\n                case 'image':\n                    blockData.url = block.querySelector('input[name*=\"[url]\"]').value;\n                    blockData.caption = block.querySelector('input[name*=\"[caption]\"]').value;\n                    break;\n                case 'video':\n                    blockData.url = block.querySelector('input[name*=\"[url]\"]').value;\n                    blockData.caption = block.querySelector('input[name*=\"[caption]\"]').value;\n                    break;\n                case 'quote':\n                    blockData.content = block.querySelector('textarea').value;\n                    blockData.author = block.querySelector('input[name*=\"[author]\"]').value;\n                    break;\n            }\n            \n            blocks.push(blockData);\n        });\n        \n        return blocks;\n    }\n}\n\n// Initialize when DOM is ready\nlet contentEditor;\ndocument.addEventListener('DOMContentLoaded', function() {\n    const editorContainer = document.getElementById('content-blocks-editor');\n    if (editorContainer) {\n        contentEditor = new ContentBlocksEditor(editorContainer);\n    }\n});","size_bytes":21897},"submit-comment.php":{"content":"<?php\nrequire_once 'config/config.php';\nrequire_once 'classes/Comment.php';\n\nheader('Content-Type: application/json');\n\nif ($_POST) {\n    $article_id = intval($_POST['article_id'] ?? 0);\n    $author_name = sanitize($_POST['author_name'] ?? '');\n    $author_email = sanitize($_POST['author_email'] ?? '');\n    $content = sanitize($_POST['content'] ?? '');\n    $parent_id = intval($_POST['parent_id'] ?? 0) ?: null;\n\n    // Basic validation\n    if (empty($author_name) || empty($author_email) || empty($content) || $article_id <= 0) {\n        echo json_encode(['success' => false, 'message' => 'All fields are required']);\n        exit;\n    }\n\n    // Validate email\n    if (!filter_var($author_email, FILTER_VALIDATE_EMAIL)) {\n        echo json_encode(['success' => false, 'message' => 'Please enter a valid email address']);\n        exit;\n    }\n\n    // Check if article exists\n    $db = new Database();\n    $conn = $db->getConnection();\n    $article_check = $conn->prepare(\"SELECT id FROM articles WHERE id = ? AND status = 'published'\");\n    $article_check->execute([$article_id]);\n    \n    if ($article_check->rowCount() === 0) {\n        echo json_encode(['success' => false, 'message' => 'Article not found']);\n        exit;\n    }\n\n    // Create comment\n    $comment_data = [\n        'article_id' => $article_id,\n        'author_name' => $author_name,\n        'author_email' => $author_email,\n        'content' => $content,\n        'parent_id' => $parent_id,\n        'status' => 'pending' // Comments require moderation\n    ];\n\n    $comment = new Comment();\n    if ($comment->create($comment_data)) {\n        echo json_encode(['success' => true, 'message' => 'Comment submitted successfully']);\n    } else {\n        echo json_encode(['success' => false, 'message' => 'Failed to submit comment']);\n    }\n} else {\n    echo json_encode(['success' => false, 'message' => 'Invalid request method']);\n}\n?>","size_bytes":1901},"public/css/style-old.css":{"content":"/* Professional Newspaper Website Styles */\n:root {\n    --newspaper-red: #d32f2f;\n    --newspaper-blue: #1976d2;\n    --newspaper-black: #000000;\n    --newspaper-dark-gray: #333333;\n    --newspaper-gray: #666666;\n    --newspaper-light-gray: #f5f5f5;\n    --newspaper-white: #ffffff;\n    --newspaper-border: #dddddd;\n    --newspaper-text: #222222;\n    --newspaper-muted: #777777;\n    --font-family: 'Georgia', 'Times New Roman', serif;\n    --font-family-sans: 'Inter', Arial, sans-serif;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    font-family: var(--font-family);\n    line-height: 1.4;\n    color: var(--newspaper-text);\n    background-color: var(--newspaper-white);\n}\n\n/* Newspaper Header Styles */\n.newspaper-header {\n    background: var(--newspaper-white);\n    border-bottom: 3px solid var(--newspaper-black);\n    position: sticky;\n    top: 0;\n    z-index: 1000;\n}\n\n.header-top {\n    background: var(--newspaper-white);\n    padding: 1rem 0;\n    border-bottom: 1px solid var(--newspaper-border);\n}\n\n.logo-section {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.newspaper-logo {\n    height: 60px;\n    width: auto;\n}\n\n.current-date {\n    font-family: var(--font-family-sans);\n    font-size: 0.9rem;\n    color: var(--newspaper-gray);\n    font-weight: 500;\n}\n\n.header-search {\n    max-width: 300px;\n}\n\n.header-search .form-control {\n    border: 1px solid var(--newspaper-border);\n    border-radius: 0;\n    font-size: 0.9rem;\n}\n\n.header-search .btn {\n    background: var(--newspaper-black);\n    color: var(--newspaper-white);\n    border: 1px solid var(--newspaper-black);\n    border-radius: 0;\n    font-size: 0.9rem;\n}\n\n.header-search .btn:hover {\n    background: var(--newspaper-dark-gray);\n    border-color: var(--newspaper-dark-gray);\n}\n\n/* Categories Navigation */\n.categories-nav {\n    background: var(--newspaper-light-gray);\n    border-bottom: 1px solid var(--newspaper-border);\n    padding: 0.5rem 0;\n}\n\n.categories-scroll-container {\n    overflow-x: auto;\n    overflow-y: hidden;\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n}\n\n.categories-scroll-container::-webkit-scrollbar {\n    display: none;\n}\n\n.categories-list {\n    display: flex;\n    gap: 0;\n    white-space: nowrap;\n    min-width: max-content;\n}\n\n.category-link {\n    padding: 0.7rem 1.2rem;\n    text-decoration: none;\n    color: var(--newspaper-dark-gray);\n    font-family: var(--font-family-sans);\n    font-size: 0.9rem;\n    font-weight: 500;\n    border-right: 1px solid var(--newspaper-border);\n    transition: all 0.2s ease;\n    background: var(--newspaper-white);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.category-link:first-child {\n    border-left: 1px solid var(--newspaper-border);\n}\n\n.category-link:hover,\n.category-link.active {\n    background: var(--newspaper-black);\n    color: var(--newspaper-white);\n}\n\n.logo-link {\n    text-decoration: none;\n}\n\n.logo-link:hover {\n    opacity: 0.8;\n}\n\n/* Breaking News Banner */\n.breaking-banner {\n    background: var(--newspaper-red);\n    color: var(--newspaper-white);\n    padding: 0.8rem;\n    margin-bottom: 1.5rem;\n    border: 3px solid var(--newspaper-black);\n}\n\n.breaking-item {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    padding: 0.4rem 0;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n.breaking-item:last-child {\n    border-bottom: none;\n}\n\n.breaking-label {\n    background: var(--newspaper-white);\n    color: var(--newspaper-red);\n    padding: 0.2rem 0.6rem;\n    font-weight: bold;\n    font-size: 0.75rem;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n}\n\n.breaking-title {\n    flex-grow: 1;\n    color: var(--newspaper-white);\n    text-decoration: none;\n    font-weight: bold;\n    font-size: 0.95rem;\n}\n\n.breaking-title:hover {\n    text-decoration: underline;\n    color: var(--newspaper-white);\n}\n\n.breaking-time {\n    font-size: 0.8rem;\n    opacity: 0.9;\n    font-family: var(--font-family-sans);\n}\n\n/* Remove old navbar styles as we're using new newspaper header */\n\n/* Main Content */\n.main-content {\n    padding: 1.5rem 0;\n    min-height: calc(100vh - 200px);\n    background: var(--newspaper-white);\n}\n\n.main-content .container-fluid {\n    padding-left: 1rem;\n    padding-right: 1rem;\n    max-width: 1400px;\n    margin: 0 auto;\n}\n\n.main-content .row {\n    margin-left: -0.5rem;\n    margin-right: -0.5rem;\n    gap: 0;\n}\n\n.main-content .row > * {\n    padding-left: 0.5rem;\n    padding-right: 0.5rem;\n}\n\n/* Better column spacing */\n.col-lg-8 {\n    padding-right: 1.5rem;\n}\n\n.col-lg-4 {\n    padding-left: 1rem;\n}\n\n/* Newspaper Section Styles */\n.newspaper-section {\n    margin-bottom: 2rem;\n    padding-bottom: 1.5rem;\n    border-bottom: 2px solid var(--newspaper-border);\n}\n\n.newspaper-section:last-child {\n    border-bottom: none;\n}\n\n.section-title {\n    font-family: var(--font-family);\n    font-weight: 900;\n    font-size: 1.5rem;\n    margin-bottom: 1rem;\n    background: var(--newspaper-black);\n    color: var(--newspaper-white);\n    padding: 0.6rem 1rem;\n    text-transform: uppercase;\n    letter-spacing: 2px;\n    text-align: center;\n    width: 100%;\n    display: block;\n}\n\n.breaking-section .section-title {\n    background: var(--newspaper-red);\n    color: var(--newspaper-white);\n}\n\n/* Newspaper Articles */\n.newspaper-article {\n    background: var(--newspaper-white);\n    border: 2px solid var(--newspaper-black);\n    margin-bottom: 1rem;\n    overflow: hidden;\n}\n\n.newspaper-article .article-image {\n    position: relative;\n    overflow: hidden;\n    width: 100%;\n    background: #f8f9fa;\n    border-radius: 6px;\n}\n\n/* Responsive image sizing for different layouts */\n.newspaper-article .article-image img {\n    width: 100%;\n    height: 200px;\n    object-fit: cover;\n    display: block;\n    transition: transform 0.3s ease;\n}\n\n/* Category page list layout improvements */\n.list-item .article-image {\n    border-radius: 6px;\n    overflow: hidden;\n    background: #f8f9fa;\n}\n\n.list-item .article-image img {\n    width: 100%;\n    height: 120px;\n    object-fit: cover;\n    transition: transform 0.3s ease;\n}\n\n.list-item:hover .article-image img {\n    transform: scale(1.05);\n}\n\n/* Grid layout images */\n.newspaper-section.featured-section .newspaper-article .article-image img,\n.newspaper-section.trending-section .newspaper-article .article-image img {\n    height: 180px;\n}\n\n/* List layout images - consistent sizing */\n.list-layout .article-image img {\n    height: 120px;\n    width: 100%;\n    object-fit: cover;\n}\n\n/* Small featured images */\n.featured-small .article-image img {\n    height: 80px;\n    max-height: 80px;\n}\n\n/* Category section images */\n.category-item .article-image img {\n    height: 120px;\n    max-height: 120px;\n}\n\n.main-article .article-image {\n    height: 400px;\n}\n\n.main-article .article-image img {\n    height: 100%;\n    object-fit: cover;\n}\n\n.breaking-badge {\n    position: absolute;\n    top: 0.5rem;\n    left: 0.5rem;\n    background: var(--newspaper-red);\n    color: var(--newspaper-white);\n    padding: 0.3rem 0.8rem;\n    font-size: 0.75rem;\n    font-weight: bold;\n    text-transform: uppercase;\n    letter-spacing: 1px;\n    border: 2px solid var(--newspaper-white);\n}\n\n.article-content {\n    padding: 1rem;\n}\n\n.article-meta {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    margin-bottom: 0.5rem;\n    font-size: 0.8rem;\n    font-family: var(--font-family-sans);\n}\n\n.article-meta .category {\n    font-weight: 700;\n    text-transform: uppercase;\n    font-size: 0.7rem;\n    letter-spacing: 1px;\n    padding: 0.2rem 0.5rem;\n    background: var(--newspaper-light-gray);\n    border: 1px solid var(--newspaper-border);\n    color: var(--newspaper-black);\n}\n\n.article-meta .date {\n    color: var(--newspaper-muted);\n}\n\n.article-content h2,\n.article-content h3,\n.article-content h4,\n.article-content h5,\n.article-content h6 {\n    font-family: var(--font-family);\n    font-weight: bold;\n    line-height: 1.2;\n    margin-bottom: 0.5rem;\n    color: var(--newspaper-black);\n}\n\n.article-content h2 {\n    font-size: 1.4rem;\n}\n\n.article-content h3 {\n    font-size: 1.2rem;\n}\n\n.article-content h4 {\n    font-size: 1.1rem;\n}\n\n.article-content h5 {\n    font-size: 1rem;\n    font-weight: 700;\n    line-height: 1.3;\n    margin-bottom: 0.6rem;\n}\n\n.article-content h5 a {\n    color: var(--newspaper-black);\n    text-decoration: none;\n}\n\n.article-content h5 a:hover {\n    text-decoration: underline;\n}\n\n.article-content p {\n    color: var(--newspaper-gray);\n    line-height: 1.5;\n    margin-bottom: 0.8rem;\n    font-size: 0.9rem;\n    font-family: var(--font-family-sans);\n}\n\n.article-stats {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 0.75rem;\n    color: var(--newspaper-muted);\n    padding-top: 0.6rem;\n    border-top: 1px solid var(--newspaper-border);\n    font-family: var(--font-family-sans);\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.article-content h6 {\n    font-size: 0.9rem;\n}\n\n.article-content a {\n    color: var(--newspaper-black);\n    text-decoration: none;\n}\n\n.article-content a:hover {\n    text-decoration: underline;\n}\n\n/* Remove duplicate styles - already defined above */\n\n/* Newspaper Small Articles */\n.featured-small,\n.newspaper-small {\n    background: var(--newspaper-white);\n    border: 1px solid var(--newspaper-border);\n    margin-bottom: 1rem;\n    overflow: hidden;\n}\n\n/* Remove hover effects for newspaper style */\n\n.featured-small .article-image {\n    height: 120px;\n    overflow: hidden;\n}\n\n.featured-small .article-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.featured-small .article-content {\n    padding: 1rem;\n}\n\n.featured-small .article-content h6 {\n    margin-bottom: 0.5rem;\n    font-weight: 600;\n    line-height: 1.3;\n}\n\n.featured-small .article-content h6 a {\n    color: var(--text-dark);\n    text-decoration: none;\n}\n\n.featured-small .article-content h6 a:hover {\n    color: var(--primary-color);\n}\n\n/* News Items */\n.news-item {\n    background: var(--white);\n    border-radius: 10px;\n    overflow: hidden;\n    box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);\n    transition: all 0.3s ease;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n}\n\n.news-item:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.12);\n}\n\n.news-item .article-image {\n    height: 200px;\n    overflow: hidden;\n    position: relative;\n}\n\n.news-item .article-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.3s ease;\n}\n\n.news-item:hover .article-image img {\n    transform: scale(1.03);\n}\n\n.news-item .article-content {\n    padding: 1.25rem;\n    flex-grow: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.news-item .article-content h5 {\n    margin-bottom: 0.75rem;\n    font-weight: 600;\n    line-height: 1.4;\n    flex-grow: 1;\n}\n\n.news-item .article-content h5 a {\n    color: var(--text-dark);\n    text-decoration: none;\n}\n\n.news-item .article-content h5 a:hover {\n    color: var(--primary-color);\n}\n\n/* Newspaper Sidebar */\n.sidebar {\n    padding-left: 1.5rem;\n}\n\n.widget {\n    background: var(--newspaper-white);\n    border: 1px solid var(--newspaper-border);\n    padding: 1rem;\n    margin-bottom: 1.5rem;\n}\n\n.widget-title {\n    font-weight: 700;\n    margin-bottom: 1.25rem;\n    color: var(--text-dark);\n    position: relative;\n    padding-bottom: 0.5rem;\n}\n\n.widget-title::after {\n    content: '';\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 40px;\n    height: 2px;\n    background: var(--primary-color);\n    border-radius: 1px;\n}\n\n.category-list {\n    display: flex;\n    flex-direction: column;\n    gap: 0.5rem;\n}\n\n.category-item {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0.75rem;\n    background: var(--light-color);\n    border-radius: 6px;\n    text-decoration: none;\n    color: var(--text-dark);\n    transition: all 0.3s ease;\n}\n\n.category-item:hover {\n    background: var(--primary-color);\n    color: var(--white);\n    transform: translateX(5px);\n}\n\n.category-name {\n    font-weight: 500;\n}\n\n.category-count {\n    background: var(--white);\n    color: var(--text-muted);\n    padding: 0.2rem 0.5rem;\n    border-radius: 12px;\n    font-size: 0.8rem;\n    font-weight: 600;\n    min-width: 25px;\n    text-align: center;\n}\n\n.category-item:hover .category-count {\n    background: rgba(255, 255, 255, 0.2);\n    color: var(--white);\n}\n\n.ad-placeholder {\n    text-align: center;\n    padding: 2rem 1rem;\n    background: var(--newspaper-light-gray);\n    border: 2px dashed var(--newspaper-border);\n    border-radius: 8px;\n    color: var(--newspaper-muted);\n}\n\n/* Footer */\n.main-footer {\n    background: var(--newspaper-dark-gray);\n    color: var(--newspaper-white);\n    padding: 2rem 0;\n    margin-top: 3rem;\n    border-top: 3px solid var(--newspaper-black);\n}\n\n.main-footer a {\n    color: rgba(255, 255, 255, 0.8);\n    text-decoration: none;\n    transition: color 0.3s ease;\n}\n\n.main-footer a:hover {\n    color: var(--newspaper-white);\n}\n\n/* List Layout Styles */\n.list-layout {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.list-item {\n    background: var(--newspaper-white);\n    border: 1px solid var(--newspaper-border);\n    padding: 1rem;\n    transition: all 0.2s ease;\n}\n\n.list-item:hover {\n    border-color: var(--newspaper-black);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.list-item .article-image {\n    border-radius: 4px;\n    overflow: hidden;\n}\n\n.list-item .article-content h5 {\n    font-size: 1.1rem;\n    margin-bottom: 0.5rem;\n    line-height: 1.3;\n}\n\n.list-item .article-content p {\n    font-size: 0.9rem;\n    color: var(--newspaper-gray);\n    margin-bottom: 0.5rem;\n}\n\n/* Category Section Improvements */\n.category-section {\n    margin-bottom: 2.5rem;\n}\n\n.category-section .section-title {\n    background: transparent;\n    color: var(--newspaper-black);\n    text-align: left;\n    padding: 0.5rem 0;\n    border-bottom: 3px solid var(--newspaper-black);\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 1.3rem;\n}\n\n.category-section .view-all {\n    font-size: 0.8rem;\n    color: var(--newspaper-blue);\n    text-decoration: none;\n    font-weight: normal;\n    text-transform: none;\n    letter-spacing: 0;\n}\n\n.category-section .view-all:hover {\n    text-decoration: underline;\n}\n\n/* Responsive Design */\n@media (max-width: 991.98px) {\n    .col-lg-8 {\n        padding-right: 0.5rem;\n    }\n    \n    .col-lg-4 {\n        padding-left: 0.5rem;\n    }\n    \n    .main-content {\n        padding: 1rem 0;\n    }\n    \n    .sidebar {\n        padding-left: 0;\n        margin-top: 2rem;\n    }\n    \n    .newspaper-article .article-image img {\n        height: 150px;\n    }\n    \n    .list-item .article-image img {\n        height: 80px;\n    }\n}\n\n@media (max-width: 767.98px) {\n    .topbar {\n        text-align: center;\n    }\n    \n    .social-links {\n        justify-content: center;\n        margin-top: 0.5rem;\n    }\n    \n    .main-content {\n        padding: 1rem 0;\n    }\n    \n    .featured-article .article-image {\n        height: 200px;\n    }\n    \n    .news-item .article-image {\n        height: 160px;\n    }\n    \n    .article-content {\n        padding: 1rem;\n    }\n    \n    .widget {\n        padding: 1rem;\n    }\n}\n\n/* Loading States */\n.loading {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 200px;\n}\n\n.spinner {\n    width: 40px;\n    height: 40px;\n    border: 4px solid var(--border-color);\n    border-top: 4px solid var(--primary-color);\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n/* Animations */\n@keyframes fadeInUp {\n    from {\n        opacity: 0;\n        transform: translateY(30px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.fade-in-up {\n    animation: fadeInUp 0.6s ease-out;\n}\n\n/* Print Styles */\n@media print {\n    .main-header,\n    .sidebar,\n    .main-footer {\n        display: none;\n    }\n    \n    .main-content {\n        margin: 0;\n        padding: 0;\n    }\n    \n    .featured-article,\n    .news-item {\n        box-shadow: none;\n        border: 1px solid var(--border-color);\n    }\n}\n\n/* ===== MODERN HOMEPAGE LAYOUT STYLES ===== */\n\n/* Breaking News Banner */\n.breaking-news-banner {\n    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n    color: white;\n    padding: 0.75rem 0;\n    margin-bottom: 1.5rem;\n    box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n}\n\n.breaking-ticker {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    overflow: hidden;\n}\n\n.breaking-label {\n    background: rgba(255,255,255,0.2);\n    padding: 0.5rem 1rem;\n    border-radius: 4px;\n    font-weight: 700;\n    font-size: 0.9rem;\n    white-space: nowrap;\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n}\n\n.breaking-content {\n    display: flex;\n    gap: 2rem;\n    animation: scroll-left 30s linear infinite;\n}\n\n.breaking-item {\n    color: white;\n    text-decoration: none;\n    font-weight: 500;\n    white-space: nowrap;\n    transition: opacity 0.3s ease;\n}\n\n.breaking-item:hover {\n    color: white;\n    opacity: 0.8;\n}\n\n@keyframes scroll-left {\n    0% { transform: translateX(100%); }\n    100% { transform: translateX(-100%); }\n}\n\n/* Hero Section */\n.hero-section {\n    margin-bottom: 3rem;\n}\n\n.hero-article {\n    position: relative;\n    height: 500px;\n    border-radius: 12px;\n    overflow: hidden;\n    box-shadow: 0 10px 25px rgba(0,0,0,0.15);\n}\n\n.hero-image {\n    position: relative;\n    height: 100%;\n    overflow: hidden;\n}\n\n.hero-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    transition: transform 0.5s ease;\n}\n\n.hero-article:hover .hero-image img {\n    transform: scale(1.05);\n}\n\n.hero-overlay {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: linear-gradient(transparent, rgba(0,0,0,0.8));\n    color: white;\n    padding: 2.5rem;\n}\n\n.hero-meta {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n    margin-bottom: 1rem;\n}\n\n.hero-title {\n    font-size: 2.25rem;\n    font-weight: 700;\n    line-height: 1.2;\n    margin-bottom: 0.75rem;\n}\n\n.hero-title a {\n    color: white;\n    text-decoration: none;\n}\n\n.hero-excerpt {\n    font-size: 1.1rem;\n    line-height: 1.6;\n    margin-bottom: 1rem;\n    opacity: 0.9;\n}\n\n.hero-author {\n    font-size: 0.9rem;\n    opacity: 0.8;\n}\n\n/* Secondary Featured Articles */\n.secondary-featured {\n    display: flex;\n    flex-direction: column;\n    gap: 1.5rem;\n    height: 500px;\n    overflow-y: auto;\n}\n\n.featured-item {\n    background: white;\n    border-radius: 8px;\n    overflow: hidden;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.featured-item:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n}\n\n/* Content Grid */\n.content-grid {\n    margin-top: 2rem;\n}\n\n/* Latest News Section */\n.latest-news-section {\n    margin-bottom: 3rem;\n}\n\n.section-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1.5rem;\n    padding-bottom: 0.75rem;\n    border-bottom: 3px solid var(--newspaper-red);\n}\n\n.view-all-link {\n    color: var(--newspaper-red);\n    font-weight: 500;\n    text-decoration: none;\n    font-size: 0.9rem;\n    margin-left: auto;\n}\n\n.view-all-link:hover {\n    color: var(--newspaper-dark-gray);\n}\n\n/* News Grid */\n.news-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    gap: 1.5rem;\n}\n\n.news-card {\n    background: white;\n    border-radius: 8px;\n    overflow: hidden;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\n}\n\n.news-card:hover {\n    transform: translateY(-3px);\n    box-shadow: 0 8px 25px rgba(0,0,0,0.15);\n}\n\n.news-card.featured-large {\n    grid-column: span 2;\n}\n\n.news-title a:hover {\n    color: var(--newspaper-red);\n}\n\n/* Sidebar Widgets */\n.main-sidebar {\n    padding-left: 1.5rem;\n}\n\n.sidebar-widget {\n    background: white;\n    border-radius: 8px;\n    padding: 1.5rem;\n    margin-bottom: 2rem;\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n\n.widget-title {\n    font-size: 1.2rem;\n    font-weight: 700;\n    margin-bottom: 1rem;\n    color: var(--newspaper-text);\n    border-bottom: 2px solid var(--newspaper-red);\n    padding-bottom: 0.5rem;\n}\n\n/* Trending Widget */\n.trending-list {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.trending-item {\n    display: flex;\n    gap: 1rem;\n    align-items: flex-start;\n    padding-bottom: 1rem;\n    border-bottom: 1px solid var(--newspaper-border);\n}\n\n.trending-item:last-child {\n    border-bottom: none;\n    padding-bottom: 0;\n}\n\n.trending-number {\n    background: var(--newspaper-red);\n    color: white;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.8rem;\n    font-weight: 700;\n    flex-shrink: 0;\n}\n\n.trending-content {\n    flex: 1;\n}\n\n.trending-title {\n    font-size: 0.9rem;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-bottom: 0.3rem;\n}\n\n.trending-title a {\n    color: var(--newspaper-text);\n    text-decoration: none;\n}\n\n.trending-title a:hover {\n    color: var(--newspaper-red);\n}\n\n.trending-meta {\n    display: flex;\n    justify-content: space-between;\n    font-size: 0.75rem;\n    color: var(--newspaper-gray);\n}\n\n/* Newsletter Widget */\n.newsletter-widget {\n    background: linear-gradient(135deg, var(--newspaper-red), #dc2626);\n    color: white;\n}\n\n.newsletter-widget .widget-title {\n    color: white;\n    border-bottom-color: rgba(255,255,255,0.3);\n}\n\n/* Popular Widget */\n.popular-list {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n}\n\n.popular-item {\n    display: flex;\n    gap: 0.75rem;\n    padding-bottom: 1rem;\n    border-bottom: 1px solid var(--newspaper-border);\n}\n\n.popular-item:last-child {\n    border-bottom: none;\n    padding-bottom: 0;\n}\n\n.popular-image {\n    width: 60px;\n    height: 60px;\n    border-radius: 4px;\n    overflow: hidden;\n    flex-shrink: 0;\n}\n\n.popular-image img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n\n.popular-content {\n    flex: 1;\n}\n\n.popular-title {\n    font-size: 0.85rem;\n    font-weight: 600;\n    line-height: 1.4;\n    margin-bottom: 0.3rem;\n}\n\n.popular-title a {\n    color: var(--newspaper-text);\n    text-decoration: none;\n}\n\n.popular-title a:hover {\n    color: var(--newspaper-red);\n}\n\n.popular-meta {\n    display: flex;\n    justify-content: space-between;\n    font-size: 0.7rem;\n    color: var(--newspaper-gray);\n}\n\n/* Ad Widget */\n.ad-widget {\n    background: var(--newspaper-light-gray);\n    text-align: center;\n    min-height: 200px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n}\n\n/* Responsive Design */\n@media (max-width: 1200px) {\n    .news-card.featured-large {\n        grid-column: span 1;\n    }\n}\n\n@media (max-width: 768px) {\n    .hero-section .row {\n        flex-direction: column;\n    }\n    \n    .secondary-featured {\n        height: auto;\n        margin-top: 1rem;\n    }\n    \n    .hero-title {\n        font-size: 1.75rem;\n    }\n    \n    .main-sidebar {\n        padding-left: 0;\n        margin-top: 2rem;\n    }\n    \n    .news-grid {\n        grid-template-columns: 1fr;\n    }\n    \n    .breaking-ticker {\n        flex-direction: column;\n        gap: 0.5rem;\n    }\n    \n    .breaking-content {\n        animation: none;\n    }\n}\n\n/* Comments Section Styling */\n.comments-section {\n    background: #f8f9fa;\n    padding: 3rem 0;\n    margin-top: 2rem;\n}\n\n.comments-container {\n    background: white;\n    border-radius: 12px;\n    padding: 2rem;\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n}\n\n.comments-title {\n    font-family: var(--font-family-serif);\n    color: var(--newspaper-black);\n    border-bottom: 3px solid var(--newspaper-red);\n    padding-bottom: 1rem;\n    margin-bottom: 2rem;\n}\n\n.comments-count {\n    color: #6c757d;\n    font-size: 0.9em;\n}\n\n.comment-form-section {\n    background: #f8f9fa;\n    padding: 1.5rem;\n    border-radius: 8px;\n    margin-bottom: 2rem;\n}\n\n.comment-form-section h5 {\n    color: var(--newspaper-black);\n    margin-bottom: 1rem;\n}\n\n.comment-item {\n    border: 1px solid #e9ecef;\n    border-radius: 8px;\n    padding: 1.5rem;\n    margin-bottom: 1rem;\n    background: white;\n    transition: box-shadow 0.3s ease;\n}\n\n.comment-item:hover {\n    box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n}\n\n.comment-item.reply {\n    margin-left: 2rem;\n    margin-top: 1rem;\n    background: #f8f9fa;\n    border-left: 4px solid var(--newspaper-red);\n}\n\n.comment-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 1rem;\n    padding-bottom: 0.5rem;\n    border-bottom: 1px solid #e9ecef;\n}\n\n.comment-author {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    color: var(--newspaper-black);\n    font-weight: 600;\n}\n\n.comment-author i {\n    color: var(--newspaper-red);\n    font-size: 1.2em;\n}\n\n.comment-date {\n    font-size: 0.85rem;\n    color: #6c757d;\n}\n\n.comment-content {\n    line-height: 1.6;\n    color: #333;\n    margin-bottom: 1rem;\n}\n\n.comment-actions .btn-link {\n    color: var(--newspaper-red);\n    text-decoration: none;\n    font-size: 0.9rem;\n    padding: 0.25rem 0.5rem;\n}\n\n.comment-actions .btn-link:hover {\n    color: #c41e3a;\n    text-decoration: underline;\n}\n\n.reply-form {\n    margin-top: 1rem;\n    padding: 1rem;\n    background: #f8f9fa;\n    border-radius: 6px;\n    border-left: 4px solid var(--newspaper-red);\n}\n\n.reply-actions {\n    display: flex;\n    gap: 0.5rem;\n}\n\n.comment-replies {\n    margin-top: 1rem;\n}\n\n/* Category Controls Styling */\n.category-controls {\n    background: #f8f9fa;\n    padding: 1.5rem;\n    border-radius: 8px;\n    border: 1px solid #e9ecef;\n    margin-bottom: 2rem;\n}\n\n.category-controls .form-control,\n.category-controls .form-select {\n    border: 1px solid #ddd;\n    border-radius: 6px;\n}\n\n.category-controls .btn {\n    border-radius: 6px;\n}\n\n@media (max-width: 768px) {\n    .comment-item.reply {\n        margin-left: 1rem;\n    }\n    \n    .comment-header {\n        flex-direction: column;\n        align-items: flex-start;\n        gap: 0.5rem;\n    }\n    \n    .comments-container {\n        padding: 1rem;\n    }\n}\n","size_bytes":26321},"admin/quick-article-helper.php":{"content":"<?php\n// Quick Article Creation Helper\n// This file provides utility functions to make article creation with images easier\n\nrequire_once '../config/config.php';\n\nclass QuickArticleHelper {\n    private $db;\n    private $conn;\n    \n    public function __construct() {\n        $this->db = new Database();\n        $this->conn = $this->db->getConnection();\n    }\n    \n    /**\n     * Get random image URL from preset for a category\n     */\n    public function getRandomImageForCategory($categoryId) {\n        $stmt = $this->conn->prepare(\"SELECT image_urls FROM image_presets WHERE category_id = ? AND is_active = true\");\n        $stmt->execute([$categoryId]);\n        $result = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        if ($result && !empty($result['image_urls'])) {\n            // Parse PostgreSQL array\n            $imageUrls = explode(',', trim($result['image_urls'], '{}'));\n            $randomImage = $imageUrls[array_rand($imageUrls)];\n            return 'https://images.pexels.com/photos/' . trim($randomImage, '\"');\n        }\n        \n        // Fallback to default image\n        return 'https://images.pexels.com/photos/28468503/pexels-photo-28468503.jpeg';\n    }\n    \n    /**\n     * Create article using template\n     */\n    public function createArticleFromTemplate($templateId, $customData = []) {\n        // Get template\n        $stmt = $this->conn->prepare(\"SELECT * FROM article_templates WHERE id = ? AND is_active = true\");\n        $stmt->execute([$templateId]);\n        $template = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        if (!$template) {\n            return false;\n        }\n        \n        // Generate content from template\n        $title = $customData['title'] ?? 'New Article from ' . $template['template_name'];\n        $slug = generateSlug($title);\n        $categoryId = $customData['category_id'] ?? $template['default_category_id'];\n        $excerpt = $customData['excerpt'] ?? $template['excerpt_template'];\n        $content = $customData['content'] ?? $template['content_structure'];\n        $featuredImage = $customData['featured_image'] ?? $this->getRandomImageForCategory($categoryId);\n        \n        // Insert article\n        $stmt = $this->conn->prepare(\"\n            INSERT INTO articles (title, slug, excerpt, content, category_id, author_id, status, featured_image, published_at) \n            VALUES (?, ?, ?, ?, ?, ?, 'published', ?, NOW()) \n            RETURNING id\n        \");\n        \n        $stmt->execute([\n            $title, $slug, $excerpt, $content, $categoryId, \n            $customData['author_id'] ?? 1, $featuredImage\n        ]);\n        \n        return $stmt->fetch(PDO::FETCH_ASSOC)['id'];\n    }\n    \n    /**\n     * Quick article creation with automatic image assignment\n     */\n    public function quickCreateArticle($title, $excerpt, $content, $categoryId, $authorId = 1, $isBreaking = false, $isFeatured = false) {\n        $slug = generateSlug($title);\n        $featuredImage = $this->getRandomImageForCategory($categoryId);\n        \n        $stmt = $this->conn->prepare(\"\n            INSERT INTO articles (title, slug, excerpt, content, category_id, author_id, status, featured_image, is_breaking, is_featured, published_at) \n            VALUES (?, ?, ?, ?, ?, ?, 'published', ?, ?, ?, NOW()) \n            RETURNING id\n        \");\n        \n        $stmt->execute([\n            $title, $slug, $excerpt, $content, $categoryId, $authorId, \n            $featuredImage, $isBreaking ? 't' : 'f', $isFeatured ? 't' : 'f'\n        ]);\n        \n        return $stmt->fetch(PDO::FETCH_ASSOC)['id'];\n    }\n    \n    /**\n     * Get all available templates\n     */\n    public function getTemplates() {\n        $stmt = $this->conn->query(\"SELECT * FROM article_templates WHERE is_active = true ORDER BY template_name\");\n        return $stmt->fetchAll(PDO::FETCH_ASSOC);\n    }\n    \n    /**\n     * Get available images for a category\n     */\n    public function getImagesForCategory($categoryId) {\n        $stmt = $this->conn->prepare(\"SELECT image_urls FROM image_presets WHERE category_id = ? AND is_active = true\");\n        $stmt->execute([$categoryId]);\n        $result = $stmt->fetch(PDO::FETCH_ASSOC);\n        \n        if ($result && !empty($result['image_urls'])) {\n            $imageUrls = explode(',', trim($result['image_urls'], '{}'));\n            return array_map(function($url) {\n                return 'https://images.pexels.com/photos/' . trim($url, '\"');\n            }, $imageUrls);\n        }\n        \n        return ['https://images.pexels.com/photos/28468503/pexels-photo-28468503.jpeg'];\n    }\n}\n\n// Example usage (commented out - uncomment to test):\n/*\n$helper = new QuickArticleHelper();\n\n// Quick article creation\n$articleId = $helper->quickCreateArticle(\n    \"Test Article with Auto Image\", \n    \"This is a test article with automatically assigned image based on category.\",\n    \"This is the full content of the test article. It includes detailed information and uses the category-appropriate image automatically.\",\n    1, // Politics category\n    1, // Author ID\n    false, // Not breaking\n    true   // Featured\n);\n\necho \"Created article ID: \" . $articleId;\n*/\n?>","size_bytes":5142}},"version":1}